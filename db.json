{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/images/javascript.png","path":"images/javascript.png","modified":0,"renderable":0},{"_id":"source/images/baptiste-vannesson.png","path":"images/baptiste-vannesson.png","modified":0,"renderable":0},{"_id":"themes/icarus/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/icarus/source/js/insight.js","path":"js/insight.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/css/images/avatar.png","path":"css/images/avatar.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/css/images/logo.png","path":"css/images/logo.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/css/images/thumb-default-small.png","path":"css/images/thumb-default-small.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/justified-gallery/jquery.justifiedGallery.min.js","path":"libs/justified-gallery/jquery.justifiedGallery.min.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/justified-gallery/justifiedGallery.min.css","path":"libs/justified-gallery/justifiedGallery.min.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/styles.css","path":"libs/open-sans/styles.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/source-code-pro/styles.css","path":"libs/source-code-pro/styles.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/font-awesome/css/font-awesome.css","path":"libs/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/font-awesome/css/font-awesome.min.css","path":"libs/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-fb-comment-box.css","path":"libs/lightgallery/css/lg-fb-comment-box.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-fb-comment-box.css.map","path":"libs/lightgallery/css/lg-fb-comment-box.css.map","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-fb-comment-box.min.css","path":"libs/lightgallery/css/lg-fb-comment-box.min.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-transitions.css","path":"libs/lightgallery/css/lg-transitions.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-transitions.css.map","path":"libs/lightgallery/css/lg-transitions.css.map","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-transitions.min.css","path":"libs/lightgallery/css/lg-transitions.min.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lightgallery.css","path":"libs/lightgallery/css/lightgallery.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lightgallery.css.map","path":"libs/lightgallery/css/lightgallery.css.map","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/css/lightgallery.min.css","path":"libs/lightgallery/css/lightgallery.min.css","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.eot","path":"libs/lightgallery/fonts/lg.eot","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.svg","path":"libs/lightgallery/fonts/lg.svg","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.ttf","path":"libs/lightgallery/fonts/lg.ttf","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.woff","path":"libs/lightgallery/fonts/lg.woff","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/img/loading.gif","path":"libs/lightgallery/img/loading.gif","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/img/video-play.png","path":"libs/lightgallery/img/video-play.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/img/vimeo-play.png","path":"libs/lightgallery/img/vimeo-play.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/img/youtube-play.png","path":"libs/lightgallery/img/youtube-play.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-autoplay.js","path":"libs/lightgallery/js/lg-autoplay.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-autoplay.min.js","path":"libs/lightgallery/js/lg-autoplay.min.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-fullscreen.js","path":"libs/lightgallery/js/lg-fullscreen.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-fullscreen.min.js","path":"libs/lightgallery/js/lg-fullscreen.min.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-hash.js","path":"libs/lightgallery/js/lg-hash.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-hash.min.js","path":"libs/lightgallery/js/lg-hash.min.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-pager.js","path":"libs/lightgallery/js/lg-pager.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-pager.min.js","path":"libs/lightgallery/js/lg-pager.min.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-share.js","path":"libs/lightgallery/js/lg-share.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-share.min.js","path":"libs/lightgallery/js/lg-share.min.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-thumbnail.js","path":"libs/lightgallery/js/lg-thumbnail.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-thumbnail.min.js","path":"libs/lightgallery/js/lg-thumbnail.min.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-video.js","path":"libs/lightgallery/js/lg-video.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-video.min.js","path":"libs/lightgallery/js/lg-video.min.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-zoom.js","path":"libs/lightgallery/js/lg-zoom.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-zoom.min.js","path":"libs/lightgallery/js/lg-zoom.min.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lightgallery.js","path":"libs/lightgallery/js/lightgallery.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/lightgallery/js/lightgallery.min.js","path":"libs/lightgallery/js/lightgallery.min.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/59ZRklaO5bWGqF5A9baEERJtnKITppOI_IvcXXDNrsc.woff2","path":"libs/open-sans/fonts/59ZRklaO5bWGqF5A9baEERJtnKITppOI_IvcXXDNrsc.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/K88pR3goAWT7BTt32Z01mxJtnKITppOI_IvcXXDNrsc.woff2","path":"libs/open-sans/fonts/K88pR3goAWT7BTt32Z01mxJtnKITppOI_IvcXXDNrsc.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/LWCjsQkB6EMdfHrEVqA1KRJtnKITppOI_IvcXXDNrsc.woff2","path":"libs/open-sans/fonts/LWCjsQkB6EMdfHrEVqA1KRJtnKITppOI_IvcXXDNrsc.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNShWV49_lSm1NYrwo-zkhivY.woff2","path":"libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNShWV49_lSm1NYrwo-zkhivY.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSj0LW-43aMEzIO6XUTLjad8.woff2","path":"libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSj0LW-43aMEzIO6XUTLjad8.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSpX5f-9o1vgP2EXwfjgl7AY.woff2","path":"libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSpX5f-9o1vgP2EXwfjgl7AY.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSq-j2U0lmluP9RWlSytm3ho.woff2","path":"libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSq-j2U0lmluP9RWlSytm3ho.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSqaRobkAwv3vxw3jMhVENGA.woff2","path":"libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSqaRobkAwv3vxw3jMhVENGA.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSugdm0LZdjqr5-oayXSOefg.woff2","path":"libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSugdm0LZdjqr5-oayXSOefg.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSv8zf_FOSsgRmwsS7Aa9k2w.woff2","path":"libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSv8zf_FOSsgRmwsS7Aa9k2w.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/RjgO7rYTmqiVp7vzi-Q5URJtnKITppOI_IvcXXDNrsc.woff2","path":"libs/open-sans/fonts/RjgO7rYTmqiVp7vzi-Q5URJtnKITppOI_IvcXXDNrsc.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/cJZKeOuBrn4kERxqtaUH3VtXRa8TVwTICgirnJhmVJw.woff2","path":"libs/open-sans/fonts/cJZKeOuBrn4kERxqtaUH3VtXRa8TVwTICgirnJhmVJw.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/u-WUoqrET9fUeobQW7jkRRJtnKITppOI_IvcXXDNrsc.woff2","path":"libs/open-sans/fonts/u-WUoqrET9fUeobQW7jkRRJtnKITppOI_IvcXXDNrsc.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBiYE0-AqJ3nfInTTiDXDjU4.woff2","path":"libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBiYE0-AqJ3nfInTTiDXDjU4.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjTOQ_MqJVwkKsUn0wKzc2I.woff2","path":"libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjTOQ_MqJVwkKsUn0wKzc2I.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjUj_cnvWIuuBMVgbX098Mw.woff2","path":"libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjUj_cnvWIuuBMVgbX098Mw.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBkbcKLIaa1LC45dFaAfauRA.woff2","path":"libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBkbcKLIaa1LC45dFaAfauRA.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBmo_sUJ8uO4YLWRInS22T3Y.woff2","path":"libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBmo_sUJ8uO4YLWRInS22T3Y.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBo4P5ICox8Kq3LLUNMylGO4.woff2","path":"libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBo4P5ICox8Kq3LLUNMylGO4.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBr6up8jxqWt8HVA3mDhkV_0.woff2","path":"libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBr6up8jxqWt8HVA3mDhkV_0.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/open-sans/fonts/xozscpT2726on7jbcb_pAhJtnKITppOI_IvcXXDNrsc.woff2","path":"libs/open-sans/fonts/xozscpT2726on7jbcb_pAhJtnKITppOI_IvcXXDNrsc.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","path":"libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","path":"libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/font-awesome/fonts/FontAwesome.otf","path":"libs/font-awesome/fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.eot","path":"libs/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.woff","path":"libs/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.woff2","path":"libs/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/jquery/2.1.3/jquery.min.js","path":"libs/jquery/2.1.3/jquery.min.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.ttf","path":"libs/font-awesome/fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.svg","path":"libs/font-awesome/fonts/fontawesome-webfont.svg","modified":0,"renderable":1}],"Cache":[{"_id":"themes/icarus/.gitignore","hash":"0fee42374144d257513f9023994dbc903069144b","modified":1497136364020},{"_id":"themes/icarus/LICENSE","hash":"df00918fa95de563927fd92b26f14c7affdc3052","modified":1495667407056},{"_id":"themes/icarus/README.md","hash":"acd2d5d12820b065345d68f88bfc3a739f8d8ae2","modified":1497136138606},{"_id":"themes/icarus/_config.yml","hash":"1496dafe0e48d79636b56bef84d392ee3d2336f3","modified":1496795941060},{"_id":"themes/icarus/package.json","hash":"1bc52ef10a33df23e56bd73c927f605019c87d41","modified":1495667407059},{"_id":"source/_posts/Building-a-visual-form-in-your-terminal-emulator-with-Blessed.md","hash":"7f08f278f1884869cbf777108ed2748190e4eb5c","modified":1496871300973},{"_id":"source/_posts/Scraping-a-Ghost-blog-with-PhantomJS-and-SlimerJS-using-CasperJS.md","hash":"9a86ee67a4a8e1c52cfd1016f868fbb1332bc2ba","modified":1496796572763},{"_id":"source/_posts/Understanding-JSFuck.md","hash":"c728838647601b992b63a8e4b334916111600d9e","modified":1496796541157},{"_id":"source/_posts/What-if-JavaScript-was-a-Java-scripting-language.md","hash":"065cac0ab2423c76b1dce0b6f489fd921ef9dc75","modified":1497131813180},{"_id":"source/about/index.md","hash":"81f02b4c3b3e4fd598710ad89508de4ce69daa64","modified":1496669541020},{"_id":"source/images/javascript.png","hash":"3bbc67834e1d9e7c0ea6265759ebc250ffeadbdc","modified":1496795863213},{"_id":"themes/icarus/.git/HEAD","hash":"acbaef275e46a7f14c1ef456fff2c8bbe8c84724","modified":1495667407052},{"_id":"themes/icarus/.git/config","hash":"d29e0b80e29cd924161a73c63bac11af41d2631c","modified":1495667407052},{"_id":"themes/icarus/.git/description","hash":"9635f1b7e12c045212819dd934d809ef07efa2f4","modified":1495667397132},{"_id":"themes/icarus/.git/index","hash":"b15c00e58c372d285cff6f7e168f675d08d50745","modified":1495667407069},{"_id":"themes/icarus/.git/packed-refs","hash":"5cf9ace7c4ebfcad08c0495221ef763311b5de14","modified":1495667407052},{"_id":"themes/icarus/.github/ISSUE_TEMPLATE.md","hash":"9393fd3dbc943f1544facb66af7fd8b7a5b9ddbb","modified":1495667407056},{"_id":"themes/icarus/languages/en.yml","hash":"ade241498b85503a8953a1deca963222f47067a7","modified":1495667407059},{"_id":"themes/icarus/languages/es.yml","hash":"d7432219be5bee4cb569331378ade61b749688e0","modified":1495667407059},{"_id":"themes/icarus/languages/fr.yml","hash":"cb3e597cbec7e8f458858c457bafd1f3a225083d","modified":1495667407059},{"_id":"themes/icarus/languages/id.yml","hash":"70ec9ab2ac04cf882e81377ca5ad15bf8adceca8","modified":1495667407059},{"_id":"themes/icarus/languages/ja.yml","hash":"ff972961e5f468a695d80d21b62c3e9032cdf561","modified":1495667407059},{"_id":"themes/icarus/languages/ko.yml","hash":"7c4ad4577dc0577ad2ca1c0410507f5e5fadf530","modified":1495667407059},{"_id":"themes/icarus/languages/pt-BR.yml","hash":"3c5d5293575593705b9a2dfa9d97b017eb4bc8c3","modified":1495667407059},{"_id":"themes/icarus/languages/ru.yml","hash":"d1aab2b0c939d0c6020f881d664b660a01ee7327","modified":1495667407059},{"_id":"themes/icarus/languages/tr.yml","hash":"8b7eb6aec264db50dbabea89f680acca256f4cd1","modified":1495667407059},{"_id":"themes/icarus/languages/zh-CN.yml","hash":"3dc8ec524805afd090438be717908750da439204","modified":1495667407059},{"_id":"themes/icarus/languages/zh-TW.yml","hash":"d8d96a0a17c20af11919ce036e87379a6b163db9","modified":1495667407059},{"_id":"themes/icarus/layout/archive.ejs","hash":"c1ecf667f40f34d61ab33eed46bab143eb1af36d","modified":1495667407059},{"_id":"themes/icarus/layout/categories.ejs","hash":"aa95629b770cff8cca9d663aeb6b17928f070de5","modified":1495667407059},{"_id":"themes/icarus/layout/category.ejs","hash":"1d407f9176db84e83062c52ad4755aaea9e74401","modified":1495667407059},{"_id":"themes/icarus/layout/index.ejs","hash":"43e971ebc35657b18e08a049559790348a16666f","modified":1495667407059},{"_id":"themes/icarus/layout/layout.ejs","hash":"6f01b3d46d184a820297f9542497808b152bb09e","modified":1495667407059},{"_id":"themes/icarus/layout/page.ejs","hash":"50170783bac99946ae8af483920568de9b2d9801","modified":1495667407059},{"_id":"themes/icarus/layout/post.ejs","hash":"50170783bac99946ae8af483920568de9b2d9801","modified":1495667407059},{"_id":"themes/icarus/layout/tag.ejs","hash":"f6c220d4e5c231028bc71ddc11aec97d7b5a9943","modified":1495667407059},{"_id":"themes/icarus/layout/tags.ejs","hash":"b0fcea68d7c11e5899bf0375d80997685111653f","modified":1495667407059},{"_id":"themes/icarus/scripts/meta.js","hash":"1993754a2f3dffa283fa0538eb8f056385b69ad4","modified":1495667407059},{"_id":"themes/icarus/scripts/thumbnail.js","hash":"e667a611f9baac270281b765832020d50bf8fb7f","modified":1495667407059},{"_id":"source/images/baptiste-vannesson.png","hash":"a210cdf3306ba6435d4cda28f8af0de5f53f1a33","modified":1496600796427},{"_id":"source/_posts/Building-a-visual-form-in-your-terminal-emulator-with-Blessed/blessed.png","hash":"008f6c309bae827ed12783ce23825bcfe50c00cb","modified":1496699563220},{"_id":"themes/icarus/.git/hooks/applypatch-msg.sample","hash":"4de88eb95a5e93fd27e78b5fb3b5231a8d8917dd","modified":1495667397132},{"_id":"themes/icarus/.git/hooks/commit-msg.sample","hash":"ee1ed5aad98a435f2020b6de35c173b75d9affac","modified":1495667397132},{"_id":"themes/icarus/.git/hooks/post-update.sample","hash":"b614c2f63da7dca9f1db2e7ade61ef30448fc96c","modified":1495667397132},{"_id":"themes/icarus/.git/hooks/pre-applypatch.sample","hash":"f208287c1a92525de9f5462e905a9d31de1e2d75","modified":1495667397132},{"_id":"themes/icarus/.git/hooks/pre-commit.sample","hash":"36aed8976dcc08b5076844f0ec645b18bc37758f","modified":1495667397132},{"_id":"themes/icarus/.git/hooks/pre-push.sample","hash":"5c8518bfd1d1d3d2c1a7194994c0a16d8a313a41","modified":1495667397132},{"_id":"themes/icarus/.git/hooks/pre-rebase.sample","hash":"5885a56ab4fca8075a05a562d005e922cde9853b","modified":1495667397132},{"_id":"themes/icarus/.git/hooks/pre-receive.sample","hash":"705a17d259e7896f0082fe2e9f2c0c3b127be5ac","modified":1495667397132},{"_id":"themes/icarus/.git/hooks/prepare-commit-msg.sample","hash":"2b6275eda365cad50d167fe3a387c9bc9fedd54f","modified":1495667397132},{"_id":"themes/icarus/.git/hooks/update.sample","hash":"e729cd61b27c128951d139de8e7c63d1a3758dde","modified":1495667397132},{"_id":"themes/icarus/.git/info/exclude","hash":"c879df015d97615050afa7b9641e3352a1e701ac","modified":1495667397132},{"_id":"themes/icarus/.git/logs/HEAD","hash":"ef08319941da56e612cbfae0421cb7604e851747","modified":1495667407052},{"_id":"themes/icarus/_source/about/index.md","hash":"2847759c65295fdc47685cc32e10ae30b2f022ae","modified":1497136138606},{"_id":"themes/icarus/_source/categories/index.md","hash":"55bee2cb88da438a2e8b1f29b1d7e954c07a9e60","modified":1495667407059},{"_id":"themes/icarus/_source/tags/index.md","hash":"e999413d6392c34156b5c6e9273f9069f9e6d92d","modified":1495667407059},{"_id":"themes/icarus/layout/comment/changyan.ejs","hash":"b4bd2e641af59e06becaa8f2dc97867f023b8dcf","modified":1495667407059},{"_id":"themes/icarus/layout/comment/counter.ejs","hash":"466e01abb13d0a2b9ed281b2362740baa32afaff","modified":1495667407059},{"_id":"themes/icarus/layout/comment/disqus.ejs","hash":"1b32a90f400dc580f4b8298de75b94429ca6de68","modified":1495667407059},{"_id":"themes/icarus/layout/comment/duoshuo.ejs","hash":"ce46d7410a99b57704da32e9d09071cef6c9fa93","modified":1495667407059},{"_id":"themes/icarus/layout/comment/facebook.ejs","hash":"5ee16430a4435c2fead0275ff83fc98092d73d4c","modified":1495667407059},{"_id":"themes/icarus/layout/comment/index.ejs","hash":"300f6e0eebfac973798012ba0221d23887129d1a","modified":1497136138610},{"_id":"themes/icarus/layout/comment/isso.ejs","hash":"4f8b81ff5bb418ec11ce080d515f247bfe436014","modified":1495667407059},{"_id":"themes/icarus/layout/comment/scripts.ejs","hash":"08e52232b5ca58846f4aa23ed17a8297c5452cc5","modified":1497136138610},{"_id":"themes/icarus/layout/comment/youyan.ejs","hash":"6fe807992832939caf6c3e7651d052df9520d88e","modified":1495667407059},{"_id":"themes/icarus/layout/common/article.ejs","hash":"9c260a551596f71e93177f2289b5cb1c4bc7d96c","modified":1495667407059},{"_id":"themes/icarus/layout/common/footer.ejs","hash":"cbfe560fcab445d42ceeb5d1beba5957d5be5eaa","modified":1495667407059},{"_id":"themes/icarus/layout/common/head.ejs","hash":"44f30945882afd27c89da2173da501fb1b531488","modified":1495667407059},{"_id":"themes/icarus/layout/common/header.ejs","hash":"9276d5fec918899c3e4e4e7eed1d598791a88b8c","modified":1497136866510},{"_id":"themes/icarus/layout/common/profile.ejs","hash":"0513baf0ba8eb8c7c71aab2d3c2405602a3396ba","modified":1497137053043},{"_id":"themes/icarus/layout/common/scripts.ejs","hash":"c0a1a9e53f89440c42c325d5bd8c7234652c8937","modified":1495667407059},{"_id":"themes/icarus/layout/common/sidebar.ejs","hash":"1ee2384f98c8ccaa7a5b00f14ad2a9a67022c143","modified":1497136138610},{"_id":"themes/icarus/layout/common/thumbnail.ejs","hash":"1b70f8a98cd8650b159bda858dbee38dbdb7f0c5","modified":1495667407059},{"_id":"themes/icarus/layout/common/timeline.ejs","hash":"6420e34e0332c9b6670011519f341340db989343","modified":1495667407059},{"_id":"themes/icarus/layout/plugin/baidu-analytics.ejs","hash":"6a7bee18e666e627e62541a5e30906f87ba1bfe8","modified":1495667407059},{"_id":"themes/icarus/layout/plugin/google-analytics.ejs","hash":"349f08b6521a16e79046b1f94f04317ac74f556e","modified":1495667407059},{"_id":"themes/icarus/layout/plugin/scripts.ejs","hash":"b349c7089a44302eaa8291c0ed13ef815f868a68","modified":1495667407059},{"_id":"themes/icarus/layout/search/baidu.ejs","hash":"3e603a702d20c53fd3bcbeb570a16a86d54781ce","modified":1495667407059},{"_id":"themes/icarus/layout/search/index-mobile.ejs","hash":"50a727ac1dfe3073eb6fa6699ba01e66f4ac41c0","modified":1495667407059},{"_id":"themes/icarus/layout/search/index.ejs","hash":"24935e32e61d4706454b174ea3bed0726ae7fb34","modified":1495667407059},{"_id":"themes/icarus/layout/search/insight.ejs","hash":"130fe3d33ac71da0b50f7fee6a87979f30938a1b","modified":1495667407059},{"_id":"themes/icarus/layout/search/swiftype.ejs","hash":"379e66d2c13526e72e4120c443f95fccf4edef71","modified":1495667407059},{"_id":"themes/icarus/layout/share/addtoany.ejs","hash":"ac180c4c84b73a04d61b17e7dc18c257e20bf59f","modified":1495667407059},{"_id":"themes/icarus/layout/share/bdshare.ejs","hash":"a1e772c5a6f174d585b0c1e574058f75dc8e2898","modified":1495667407059},{"_id":"themes/icarus/layout/share/default.ejs","hash":"ebfb919dc525b3ed61a6a5ee05ee71410eedc541","modified":1495667407059},{"_id":"themes/icarus/layout/share/index.ejs","hash":"2a2c0095b95b11e5692bd8ad6a2337aa644189a2","modified":1495667407059},{"_id":"themes/icarus/layout/share/jiathis.ejs","hash":"21ebaa51e828cba2cefbeeaccb01514643565755","modified":1495667407059},{"_id":"themes/icarus/layout/widget/archive.ejs","hash":"d9ebbb7f6ce2f25df5ae25e4a1fef3c08f7054b9","modified":1495667407059},{"_id":"themes/icarus/layout/widget/category.ejs","hash":"583bda80cf15b3ef11fefbd1b502897dfff40100","modified":1495667407059},{"_id":"themes/icarus/layout/widget/links.ejs","hash":"aad118699718b62c0d3f3cfd6f17a181139a76af","modified":1495667407059},{"_id":"themes/icarus/layout/widget/recent_posts.ejs","hash":"2ca923465275fb38a7ac7d67211d6e94a977e957","modified":1495667407059},{"_id":"themes/icarus/layout/widget/tag.ejs","hash":"3b8ae5953990436893da9d68f910ebe592005659","modified":1495667407059},{"_id":"themes/icarus/layout/widget/tagcloud.ejs","hash":"ca8c7bf555fb6ce4904f2c59160548405c2c8a82","modified":1495667407059},{"_id":"themes/icarus/source/css/_extend.styl","hash":"539e02107f35e8b3bdb9bf160dc212a433a7b60e","modified":1495667407059},{"_id":"themes/icarus/source/css/_variables.styl","hash":"d62af931be6612ec8c3a917836379a8cd92fbce1","modified":1495667407062},{"_id":"themes/icarus/source/css/style.styl","hash":"1716b199dba80b26086f325d69c36fa682465106","modified":1495667407062},{"_id":"themes/icarus/source/js/insight.js","hash":"c1bafa7f87e9f25fca1e033fc6d1e0c82712ac99","modified":1497136138616},{"_id":"themes/icarus/source/js/main.js","hash":"93dc932946e2898bf4f39c42af1b27295e886af1","modified":1495667407062},{"_id":"themes/icarus/tags","hash":"142540760ac1cd60f058dfe1e34020bed814f98e","modified":1497136548900},{"_id":"themes/icarus/.git/objects/pack/pack-62aa05f5ea6737de40f82cb798b88498face209f.idx","hash":"b80b97caf64030bf056320eae63050bc1c2cf816","modified":1495667407019},{"_id":"themes/icarus/.git/refs/heads/master","hash":"f4c94e8dcf2a004a0b4803f76f6a37a119a2f11c","modified":1495667407052},{"_id":"themes/icarus/layout/common/post/banner.ejs","hash":"47ced3f03525698c79c6b1c07b48383fb6c496b2","modified":1495667407059},{"_id":"themes/icarus/layout/common/post/category.ejs","hash":"75c9dda2e7ec041943855ca163a6b1c4c8b4f260","modified":1495667407059},{"_id":"themes/icarus/layout/common/post/date.ejs","hash":"45cb0bcad461036cdd1fe2e3fbb5f2f19940025c","modified":1495667407059},{"_id":"themes/icarus/layout/common/post/gallery.ejs","hash":"659f019761116313169148ec61773e7b84abb739","modified":1495667407059},{"_id":"themes/icarus/layout/common/post/nav.ejs","hash":"d7cd611e642327f33dff3963ef869c2b46824a11","modified":1495667407059},{"_id":"themes/icarus/layout/common/post/tag.ejs","hash":"2e966216256321aa0c76fe1b9be689601c76ef31","modified":1495667407059},{"_id":"themes/icarus/layout/common/post/title.ejs","hash":"669ddb46fefa100856588351a7a2d30ad996b755","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/agate.styl","hash":"601eb70448a16b918df132f6fc41e891ae053653","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/androidstudio.styl","hash":"65d09f1b0e81c6a182f549fd3de51e59823c97ae","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/arduino-light.styl","hash":"15e8572585cd708221c513dea4bdd89d8fe56c10","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/arta.styl","hash":"1a5accc115f41d1b669ed708ac6a29abac876599","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/ascetic.styl","hash":"32cff3bef6fac3760fe78f203096477052a90552","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-cave-dark.styl","hash":"bc647b2c1d971d7cc947aa1ed66e9fd115261921","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-cave-light.styl","hash":"a5be0744a7ecf4a08f600ade4cfd555afc67bc15","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-dune-dark.styl","hash":"df50a85a4b14c7ca6e825d665594b91229d0e460","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-dune-light.styl","hash":"931435fbc6f974e8ce9e32722680035d248a9dc1","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-estuary-dark.styl","hash":"d84382bc8298f96730757391d3e761b7e640f406","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-estuary-light.styl","hash":"344276ca9b27e51d4c907f76afe5d13cf8e60bdf","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-forest-dark.styl","hash":"57c154c6045a038dc7df0a25927853e10bf48c4a","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-forest-light.styl","hash":"95228d9f2102fad425536aac44b80b2cba1f5950","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-heath-dark.styl","hash":"b0cf13b2233e7bc38342032d2d7296591a4c2bcf","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-heath-light.styl","hash":"8c8c2e445abef85273be966d59770e9ced6aac21","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-lakeside-dark.styl","hash":"bb0a8c4ad0dd8e3e7de7122ddf268fc42aa94acb","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-lakeside-light.styl","hash":"2c54cb9bdb259ae3b5b29f63ac2469ed34b08578","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-plateau-dark.styl","hash":"09c64f1a7052aec9070c36c0431df25216afaea1","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-plateau-light.styl","hash":"d1a05fdd1ededc9063d181ab25bad55a164aeb4a","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-savanna-dark.styl","hash":"a16c919a1ccf2f845488078fb341381bec46b1f3","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-savanna-light.styl","hash":"f8244c93711c7cb59dd79d2df966806b30d171ea","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-seaside-dark.styl","hash":"ce233a101daea7124cbfcd34add43ccfe2e1e1c7","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-seaside-light.styl","hash":"0597342da6e2d0c5bdcc7d42dabb07322b1a4177","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-sulphurpool-dark.styl","hash":"414b0cfc142f70afe359c16450b651e28bf7325a","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/atelier-sulphurpool-light.styl","hash":"efa52713efc468abeeb2b9299704371583b857de","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/brown-paper.styl","hash":"c2326ba20a5020a66ca7895258d18833327d4334","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/brown-papersq.png","hash":"3a1332ede3a75a3d24f60b6ed69035b72da5e182","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/codepen-embed.styl","hash":"f4dcc84d8e39f9831a5efe80e51923fc3054feb0","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/color-brewer.styl","hash":"2a439d6214430e2f45dd4939b4dfe1fe1a20aa0f","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/dark.styl","hash":"71ce56d311cc2f3a605f6e2c495ccd7236878404","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/darkula.styl","hash":"ad0d5728d21645039c9f199e7a56814170ed3bab","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/docco.styl","hash":"b1c176378bb275f2e8caa759f36294e42d614bf1","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/far.styl","hash":"d9928010ffe71e80b97a5afcba1a4975efdd7372","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/foundation.styl","hash":"bf8ddc94b4ad995b8b8805b5a4cf95004553fdac","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/github-gist.styl","hash":"48211a03d33e7f7ada0b261162bea06676155a71","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/github.styl","hash":"3336aeba324c6d34a6fd41fef9b47bc598f7064c","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/googlecode.styl","hash":"bda816beee7b439814b514e6869dc678822be1bc","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/grayscale.styl","hash":"bf37d8b8d1e602126c51526f0cc28807440228ed","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/highlightjs.styl","hash":"0e198b7a59191c7a39b641a4ddd22c948edb9358","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/hopscotch.styl","hash":"b374c6550b89b4751aedc8fbc3cf98d95bd70ead","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/hybrid.styl","hash":"ea8d7ddc258b073308746385f5cb85aabb8bfb83","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/idea.styl","hash":"a02967cb51c16a34e0ee895d33ded2b823d35b21","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/index.styl","hash":"002d5596f6379cc87dbd43d9145bc764aa666be1","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/ir-black.styl","hash":"693078bbd72a2091ed30f506cc55949600b717af","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/kimbie.dark.styl","hash":"45dbb168f22d739d0109745d2decd66b5f94e786","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/kimbie.light.styl","hash":"61f8baed25be05288c8604d5070afbcd9f183f49","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/magula.styl","hash":"16d323f989b1420a0f72ef989242ece9bf17a456","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/mono-blue.styl","hash":"4c89a6ae29de67c0700585af82a60607e85df928","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/monokai-sublime.styl","hash":"25aa2fc1dbe38593e7c7ebe525438a39574d9935","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/monokai.styl","hash":"5a4fe9f957fd7a368c21b62a818403db4270452f","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/obsidian.styl","hash":"55572bbcfee1de6c31ac54681bb00336f5ae826d","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/paraiso-dark.styl","hash":"f1537bd868579fa018ecdbfd2eb922dcf3ba2cac","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/paraiso-light.styl","hash":"d224d1df0eb3395d9eea1344cee945c228af2911","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/pojoaque.jpg","hash":"c5fe6533b88b21f8d90d3d03954c6b29baa67791","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/pojoaque.styl","hash":"77dae9dc41945359d17fe84dbd317f1b40b2ee33","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/railscasts.styl","hash":"acd620f8bb7ff0e3fe5f9a22b4433ceef93a05e6","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/rainbow.styl","hash":"ce73b858fc0aba0e57ef9fb136c083082746bc1d","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/school-book.png","hash":"711ec983c874e093bb89eb77afcbdf6741fa61ee","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/school-book.styl","hash":"d43560fe519a931ce6da7d57416d7aa148441b83","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/solarized-dark.styl","hash":"702b9299a48c90124e3ac1d45f1591042f2beccc","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/solarized-light.styl","hash":"aa0dd3fd25c464183b59c5575c9bee8756b397f2","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/sunburst.styl","hash":"a0b5b5129547a23865d400cfa562ea0ac1ee3958","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/tomorrow-night-blue.styl","hash":"8b3087d4422be6eb800935a22eb11e035341c4ba","modified":1495667407059},{"_id":"themes/icarus/source/css/_highlight/tomorrow-night-bright.styl","hash":"0ac6af6ecb446b5b60d6226748e4a6532db34f57","modified":1495667407062},{"_id":"themes/icarus/source/css/_highlight/tomorrow-night-eighties.styl","hash":"fa57b3bb7857a160fc856dbe319b31e30cc5d771","modified":1495667407062},{"_id":"themes/icarus/source/css/_highlight/tomorrow-night.styl","hash":"19b3080d4b066b40d50d7e7f297472482b5801fd","modified":1495667407062},{"_id":"themes/icarus/source/css/_highlight/tomorrow.styl","hash":"15779cf6846725c7c35fc56cac39047d7e0aec1c","modified":1495667407062},{"_id":"themes/icarus/source/css/_highlight/vs.styl","hash":"959a746f4b37aacb5d1d6ff1d57e0c045289d75d","modified":1495667407062},{"_id":"themes/icarus/source/css/_highlight/xcode.styl","hash":"5e8532ae8366dcf6a4ef5e4813dc3d42ab3d0a50","modified":1495667407062},{"_id":"themes/icarus/source/css/_highlight/zenburn.styl","hash":"fc5ec840435dad80964d04519d3f882ddc03746a","modified":1495667407062},{"_id":"themes/icarus/source/css/_partial/archive.styl","hash":"d35088c83ddd7a197d6d94e16a2ce3a7e29fa1dc","modified":1495667407062},{"_id":"themes/icarus/source/css/_partial/article.styl","hash":"512b9252e1799b93a17c4ad847b0586814a030b4","modified":1495667407062},{"_id":"themes/icarus/source/css/_partial/comment.styl","hash":"784646796184d4f27918c22395288a2fafbf9554","modified":1495667407062},{"_id":"themes/icarus/source/css/_partial/footer.styl","hash":"484776654e4c1691dc844e6e93786a08855c1c99","modified":1495667407062},{"_id":"themes/icarus/source/css/_partial/header.styl","hash":"1e351f741144135871a3373fe7e969dc961b65e7","modified":1495667407062},{"_id":"themes/icarus/source/css/_partial/insight.styl","hash":"19833cd127f26ad90b06c115f8a96a30e0c0e53b","modified":1495667407062},{"_id":"themes/icarus/source/css/_partial/profile.styl","hash":"fb0170075dc2a41e01dd11bbfdbccbed544c479a","modified":1495667407062},{"_id":"themes/icarus/source/css/_partial/sidebar.styl","hash":"f528ca7064d9fcecd737b9b71c9c54601365d7d3","modified":1495667407062},{"_id":"themes/icarus/source/css/_partial/timeline.styl","hash":"c813b98f4fc45b64d2e07e5d944745a654c8c943","modified":1495667407062},{"_id":"themes/icarus/source/css/_util/grid.styl","hash":"93fb6f1e2f40cd7d88ad0d56dd73d3f9a7bc853e","modified":1495667407062},{"_id":"themes/icarus/source/css/_util/mixin.styl","hash":"c8e1ddfc0fe9108bab592c7a73b73ce9344991fd","modified":1495667407062},{"_id":"themes/icarus/source/css/images/avatar.png","hash":"0d8236dcca871735500e9d06bbdbe0853ed6775b","modified":1495667407062},{"_id":"themes/icarus/source/css/images/logo.png","hash":"e606a0584f98268b2fe92303f3254520862ef659","modified":1495667407062},{"_id":"themes/icarus/source/css/images/thumb-default-small.png","hash":"e8403b97ed9251f9f5207765b0ce796c5000b4ba","modified":1495667407062},{"_id":"themes/icarus/source/libs/justified-gallery/jquery.justifiedGallery.min.js","hash":"b2683e7a872bc109b1756a65188a37cef7d0bd5c","modified":1495667407066},{"_id":"themes/icarus/source/libs/justified-gallery/justifiedGallery.min.css","hash":"13fbcba5e97aa88b748d94d3efc4718475279907","modified":1495667407066},{"_id":"themes/icarus/source/libs/open-sans/styles.css","hash":"5ca6e111046232bde112d33201a60532aee7d3c4","modified":1495667407069},{"_id":"themes/icarus/source/libs/source-code-pro/styles.css","hash":"93c308012738728f906cd4c5cfdb34189e0c712b","modified":1495667407069},{"_id":"themes/icarus/.git/logs/refs/heads/master","hash":"ef08319941da56e612cbfae0421cb7604e851747","modified":1495667407052},{"_id":"themes/icarus/.git/refs/remotes/origin/HEAD","hash":"d9427cda09aba1cdde5c69c2b13c905bddb0bc51","modified":1495667407052},{"_id":"themes/icarus/source/libs/font-awesome/css/font-awesome.css","hash":"b5020c3860669185ba3f316fa7332cdf5c06f393","modified":1495667407062},{"_id":"themes/icarus/source/libs/font-awesome/css/font-awesome.min.css","hash":"7cd5a3384333f95c3d37d9488ad82cd6c4b03761","modified":1495667407062},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-fb-comment-box.css","hash":"844ce27b8488968bccb3e50bb49184ba2aae0625","modified":1495667407066},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-fb-comment-box.css.map","hash":"51e9df39edf0faa3f38c1bab0c1fa6c922b9edcb","modified":1495667407066},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-fb-comment-box.min.css","hash":"05830fadb8454f39dcc98c8686eb4d5c24b71fc0","modified":1495667407066},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-transitions.css","hash":"7871c28498d74451d6aa438c8d3a1817810a1e19","modified":1495667407066},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-transitions.css.map","hash":"50c3348638b4d82fa08a449c690e8d2bb593005d","modified":1495667407066},{"_id":"themes/icarus/source/libs/lightgallery/css/lg-transitions.min.css","hash":"5c22e2073a4c96d6212c72135391b599e8d1359f","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/css/lightgallery.css","hash":"bef55316a32e512d5a8940e5d0bfe8bf7a9c5c61","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/css/lightgallery.css.map","hash":"3175b4107078674d25798979f7666f4daf31e624","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/css/lightgallery.min.css","hash":"c9a2e19c932b56f4a2ce30c98910d10b74edb38a","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.svg","hash":"9a732790adc004b22022cc60fd5f77ec4c8e3e5a","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/img/loading.gif","hash":"607810444094b8619fa4efa6273bc2a7e38dd4b4","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/img/video-play.png","hash":"3ea484cdc04d2e4547f80cbf80001dcf248c94ef","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/img/vimeo-play.png","hash":"6190254f2804904a4a1fa1eb390dfd334e416992","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/img/youtube-play.png","hash":"fea6df9d9d43151f9c9d15f000adb30eb3e26fc4","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-autoplay.js","hash":"426bb78b93acfc39d533ea2bab1cec8dc289cf24","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-autoplay.min.js","hash":"d845741bcaf961579622880eb2a445257efad1ac","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-fullscreen.js","hash":"65c47ac65362854ba44b00a010bb01e3630209d8","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-fullscreen.min.js","hash":"b6b9e4022700b7faf2a5a175ba44a3bd938fdd20","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-hash.js","hash":"15d16516c5642d3de1566ff8fc9160136ccaa405","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-hash.min.js","hash":"43f1e1e720ab0e241c19b83aa26bd6848eab8edc","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-pager.js","hash":"8092c692b244bb26343eb03b91bd97deb9dafc9c","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-pager.min.js","hash":"25caa6ff65b1c6dee09941e795ae2633bdbab211","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-share.js","hash":"b7fb5f6474911060a351b0a6fe9dbb9ac3fb22aa","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-share.min.js","hash":"39c615f07c5d3aaa65a2c3068a30fdd6dd5c372d","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-thumbnail.js","hash":"3a6476b6df1d2bef4a21861a78776282a7a11ef1","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-thumbnail.min.js","hash":"18dd7d2909d1bfd6852f031d03e774b4428c512b","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-video.js","hash":"4f99b598f6bb18de9eca8c45c5b4373a03962367","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-video.min.js","hash":"032c001ab045a69856f9c3ed4a2a3bf12a8e310f","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-zoom.js","hash":"a758e2c8fcf710f9ff761da0eea0ab9321f3484d","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lg-zoom.min.js","hash":"15b49f9728439819ece15e4295cce254c87a4f45","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lightgallery.js","hash":"3cd19b33ba99efd5ba1d167da91720566d274b2c","modified":1495667407069},{"_id":"themes/icarus/source/libs/lightgallery/js/lightgallery.min.js","hash":"956ef9b706755318da69ad0b5d7786339d831251","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/59ZRklaO5bWGqF5A9baEERJtnKITppOI_IvcXXDNrsc.woff2","hash":"c4248ea800bd5608344ce163f5658b57e7ef9410","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/K88pR3goAWT7BTt32Z01mxJtnKITppOI_IvcXXDNrsc.woff2","hash":"e0350190d720a8fec0557ab47b318ec4e4486448","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/LWCjsQkB6EMdfHrEVqA1KRJtnKITppOI_IvcXXDNrsc.woff2","hash":"2c5b039b57f62625e88226a938679ec937431ad1","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNShWV49_lSm1NYrwo-zkhivY.woff2","hash":"22413bb8bfb78608c1e25aa1ed5c1f38557df79f","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSj0LW-43aMEzIO6XUTLjad8.woff2","hash":"63eb74ef040aade256f2274a7f31a914edddb0ea","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSpX5f-9o1vgP2EXwfjgl7AY.woff2","hash":"328a22fe3eec71ad9e5ece4d67dd62e79dab6b7f","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSq-j2U0lmluP9RWlSytm3ho.woff2","hash":"4dc6d7174ea6d89f4c45e43e1bfc3e03d8ffebaf","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSqaRobkAwv3vxw3jMhVENGA.woff2","hash":"415eee05976ab8b2471602a5ddb78a6c58fc21aa","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSugdm0LZdjqr5-oayXSOefg.woff2","hash":"a0b0c389cf46d63c850e61fed572485ff0b68183","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSv8zf_FOSsgRmwsS7Aa9k2w.woff2","hash":"c5f29fed6632efe0aa83318369f0d8c4061b775b","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/RjgO7rYTmqiVp7vzi-Q5URJtnKITppOI_IvcXXDNrsc.woff2","hash":"be201d32a9aa5d186723ebb3c538be691aa8c53a","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/cJZKeOuBrn4kERxqtaUH3VtXRa8TVwTICgirnJhmVJw.woff2","hash":"afc44700053c9a28f9ab26f6aec4862ac1d0795d","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/u-WUoqrET9fUeobQW7jkRRJtnKITppOI_IvcXXDNrsc.woff2","hash":"113978181dcac77baecef6115a9121d8f6e4fc3a","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBiYE0-AqJ3nfInTTiDXDjU4.woff2","hash":"5067c81462c15422853c94d21a1726865a61634f","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjTOQ_MqJVwkKsUn0wKzc2I.woff2","hash":"b366f2fda2e524eb5ef50058eefff249a3b96e6c","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjUj_cnvWIuuBMVgbX098Mw.woff2","hash":"d22904914469be735490e3c8cb093c7862896dd5","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBkbcKLIaa1LC45dFaAfauRA.woff2","hash":"ae80fb3cd16339aa7b5da280ab53975523dcaac2","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBmo_sUJ8uO4YLWRInS22T3Y.woff2","hash":"b85efde42fa3a03c32b1d31c6cd74c622fc7916c","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBo4P5ICox8Kq3LLUNMylGO4.woff2","hash":"e75607ba1417181397c700775b84303d5a2957b9","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBr6up8jxqWt8HVA3mDhkV_0.woff2","hash":"d0b40a7848703556c6631f24e961a98ca5829255","modified":1495667407069},{"_id":"themes/icarus/source/libs/open-sans/fonts/xozscpT2726on7jbcb_pAhJtnKITppOI_IvcXXDNrsc.woff2","hash":"be365eca44760ce3fc9b377c43d4634958479c69","modified":1495667407069},{"_id":"themes/icarus/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","hash":"942addaec4d3a60af33947a84a3d85f926015947","modified":1495667407069},{"_id":"themes/icarus/source/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","hash":"b0e0bb5ef78db8b15d430d0b9be9d4329289a310","modified":1495667407069},{"_id":"themes/icarus/source/libs/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1495667407062},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1495667407062},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1495667407066},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1495667407066},{"_id":"themes/icarus/source/libs/jquery/2.1.3/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1495667407066},{"_id":"themes/icarus/.git/logs/refs/remotes/origin/HEAD","hash":"ef08319941da56e612cbfae0421cb7604e851747","modified":1495667407052},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1495667407066},{"_id":"themes/icarus/source/libs/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1495667407066},{"_id":"themes/icarus/.git/objects/pack/pack-62aa05f5ea6737de40f82cb798b88498face209f.pack","hash":"5fafd09a3a622f85b2d6a79c2c4f0209027c4239","modified":1495667407019},{"_id":"public/atom.xml","hash":"b14bacd83f75ec5155809e83683a7d261585dcda","modified":1497029463385},{"_id":"public/content.json","hash":"c09b032944f12ba68897ff8bbc1a70ce09f09bf5","modified":1497029463385},{"_id":"public/sitemap.xml","hash":"14c6d518f9edb07ae7d0f6ac0a89d332de27e7ae","modified":1497029463386},{"_id":"public/Building-a-visual-form-in-your-terminal-emulator-with-Blessed/index.html","hash":"920fab1e45d5bec39db00f3890d267c904996810","modified":1496958775508},{"_id":"public/about/index.html","hash":"da6db6d3fceafab27b41472a572d9c64a1362200","modified":1496958775521},{"_id":"public/Scraping-a-Ghost-blog-with-PhantomJS-and-SlimerJS-using-CasperJS/index.html","hash":"a1cb53d92bd71e94eb8109fc1fe1e38993b5d52f","modified":1496958775522},{"_id":"public/archives/index.html","hash":"62edc305fa63d8c574fb19e81471f83d9253ca17","modified":1496958775522},{"_id":"public/Understanding-JSFuck/index.html","hash":"89cf6b5671065180ce189abd3f764ed683d02fe9","modified":1496958775522},{"_id":"public/archives/2017/index.html","hash":"f8c13e6bde0d7844d65165520be49fc32f4b6bf3","modified":1496958775523},{"_id":"public/archives/2017/06/index.html","hash":"148bcbdd935feda4b769a8fc7d0ff8eae1031f62","modified":1496958775523},{"_id":"public/categories/JavaScript/index.html","hash":"14dcd7b7b29e89bf8a465e4fc81d8bfcda3bf599","modified":1496958775523},{"_id":"public/tags/Blessed/index.html","hash":"2600fc685428dfe8879d30d36a436428124a0bf6","modified":1496958775523},{"_id":"public/tags/Node-js/index.html","hash":"c404388193a2dd1e32327c62a4c40f099fc19f09","modified":1496958775523},{"_id":"public/tags/ES5/index.html","hash":"7b8fb244f2fc1b56f8dfdefd92d4122882899ad1","modified":1496958775523},{"_id":"public/tags/Ghost/index.html","hash":"d7ffda3b353aa47a679e74500f68290ae8b135a8","modified":1496958775523},{"_id":"public/tags/SlimerJS/index.html","hash":"3aa402d0b2e2c6f1ce98c0ccb3aaa9ee0def19f7","modified":1496958775523},{"_id":"public/index.html","hash":"7a38e87e83bd65802d0bc73a8cc005287da3301f","modified":1497029464422},{"_id":"public/tags/JSFuck/index.html","hash":"8fe30ac190941da455608734f8b85895eb4dd340","modified":1496958775523},{"_id":"public/tags/CasperJS/index.html","hash":"7156cbc43f531794625ad64edbc37402c49b7b8b","modified":1496958775523},{"_id":"public/tags/PhantomJS/index.html","hash":"813443867c2742ba2dbc90b651dd6d61f36be111","modified":1496958775523},{"_id":"public/What-if-JavaScript-was-a-Java-scripting-language/index.html","hash":"7a974c959b68b02bf06587c9aa779a5ff8b56916","modified":1497029464422},{"_id":"public/tags/OOP/index.html","hash":"f71d7ed056765c3d2a135ed7058fbc716e8bb881","modified":1496958775540},{"_id":"public/tags/ES6/index.html","hash":"da1334e2ad3edcb01c36081b475f81d92d1b4166","modified":1496958775540},{"_id":"public/images/javascript.png","hash":"3bbc67834e1d9e7c0ea6265759ebc250ffeadbdc","modified":1496958775540},{"_id":"public/css/images/thumb-default-small.png","hash":"e8403b97ed9251f9f5207765b0ce796c5000b4ba","modified":1496958775547},{"_id":"public/css/images/avatar.png","hash":"0d8236dcca871735500e9d06bbdbe0853ed6775b","modified":1496958775547},{"_id":"public/css/images/logo.png","hash":"e606a0584f98268b2fe92303f3254520862ef659","modified":1496958775547},{"_id":"public/libs/lightgallery/css/lg-transitions.css.map","hash":"50c3348638b4d82fa08a449c690e8d2bb593005d","modified":1496958775547},{"_id":"public/libs/lightgallery/css/lightgallery.css.map","hash":"3175b4107078674d25798979f7666f4daf31e624","modified":1496958775548},{"_id":"public/libs/lightgallery/css/lg-fb-comment-box.css.map","hash":"51e9df39edf0faa3f38c1bab0c1fa6c922b9edcb","modified":1496958775548},{"_id":"public/libs/lightgallery/fonts/lg.ttf","hash":"f6421c0c397311ae09f9257aa58bcd5e9720f493","modified":1496958775548},{"_id":"public/libs/lightgallery/fonts/lg.eot","hash":"54caf05a81e33d7bf04f2e420736ce6f1de5f936","modified":1496958775548},{"_id":"public/libs/lightgallery/fonts/lg.woff","hash":"3048de344dd5cad4624e0127e58eaae4b576f574","modified":1496958775548},{"_id":"public/libs/lightgallery/fonts/lg.svg","hash":"9a732790adc004b22022cc60fd5f77ec4c8e3e5a","modified":1496958775548},{"_id":"public/libs/lightgallery/img/loading.gif","hash":"607810444094b8619fa4efa6273bc2a7e38dd4b4","modified":1496958775548},{"_id":"public/libs/lightgallery/img/video-play.png","hash":"3ea484cdc04d2e4547f80cbf80001dcf248c94ef","modified":1496958775548},{"_id":"public/libs/lightgallery/img/youtube-play.png","hash":"fea6df9d9d43151f9c9d15f000adb30eb3e26fc4","modified":1496958775548},{"_id":"public/libs/lightgallery/img/vimeo-play.png","hash":"6190254f2804904a4a1fa1eb390dfd334e416992","modified":1496958775548},{"_id":"public/libs/open-sans/fonts/LWCjsQkB6EMdfHrEVqA1KRJtnKITppOI_IvcXXDNrsc.woff2","hash":"2c5b039b57f62625e88226a938679ec937431ad1","modified":1496958775548},{"_id":"public/libs/open-sans/fonts/59ZRklaO5bWGqF5A9baEERJtnKITppOI_IvcXXDNrsc.woff2","hash":"c4248ea800bd5608344ce163f5658b57e7ef9410","modified":1496958775548},{"_id":"public/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSj0LW-43aMEzIO6XUTLjad8.woff2","hash":"63eb74ef040aade256f2274a7f31a914edddb0ea","modified":1496958775548},{"_id":"public/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSpX5f-9o1vgP2EXwfjgl7AY.woff2","hash":"328a22fe3eec71ad9e5ece4d67dd62e79dab6b7f","modified":1496958775548},{"_id":"public/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSq-j2U0lmluP9RWlSytm3ho.woff2","hash":"4dc6d7174ea6d89f4c45e43e1bfc3e03d8ffebaf","modified":1496958775548},{"_id":"public/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSqaRobkAwv3vxw3jMhVENGA.woff2","hash":"415eee05976ab8b2471602a5ddb78a6c58fc21aa","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSugdm0LZdjqr5-oayXSOefg.woff2","hash":"a0b0c389cf46d63c850e61fed572485ff0b68183","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNSv8zf_FOSsgRmwsS7Aa9k2w.woff2","hash":"c5f29fed6632efe0aa83318369f0d8c4061b775b","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/RjgO7rYTmqiVp7vzi-Q5URJtnKITppOI_IvcXXDNrsc.woff2","hash":"be201d32a9aa5d186723ebb3c538be691aa8c53a","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/u-WUoqrET9fUeobQW7jkRRJtnKITppOI_IvcXXDNrsc.woff2","hash":"113978181dcac77baecef6115a9121d8f6e4fc3a","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/cJZKeOuBrn4kERxqtaUH3VtXRa8TVwTICgirnJhmVJw.woff2","hash":"afc44700053c9a28f9ab26f6aec4862ac1d0795d","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBiYE0-AqJ3nfInTTiDXDjU4.woff2","hash":"5067c81462c15422853c94d21a1726865a61634f","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjTOQ_MqJVwkKsUn0wKzc2I.woff2","hash":"b366f2fda2e524eb5ef50058eefff249a3b96e6c","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBjUj_cnvWIuuBMVgbX098Mw.woff2","hash":"d22904914469be735490e3c8cb093c7862896dd5","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBkbcKLIaa1LC45dFaAfauRA.woff2","hash":"ae80fb3cd16339aa7b5da280ab53975523dcaac2","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBmo_sUJ8uO4YLWRInS22T3Y.woff2","hash":"b85efde42fa3a03c32b1d31c6cd74c622fc7916c","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBo4P5ICox8Kq3LLUNMylGO4.woff2","hash":"e75607ba1417181397c700775b84303d5a2957b9","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/xjAJXh38I15wypJXxuGMBr6up8jxqWt8HVA3mDhkV_0.woff2","hash":"d0b40a7848703556c6631f24e961a98ca5829255","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/xozscpT2726on7jbcb_pAhJtnKITppOI_IvcXXDNrsc.woff2","hash":"be365eca44760ce3fc9b377c43d4634958479c69","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/K88pR3goAWT7BTt32Z01mxJtnKITppOI_IvcXXDNrsc.woff2","hash":"e0350190d720a8fec0557ab47b318ec4e4486448","modified":1496958775549},{"_id":"public/libs/open-sans/fonts/MTP_ySUJH_bn48VBG8sNShWV49_lSm1NYrwo-zkhivY.woff2","hash":"22413bb8bfb78608c1e25aa1ed5c1f38557df79f","modified":1496958775549},{"_id":"public/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasD9V_2ngZ8dMf8fLgjYEouxg.woff2","hash":"942addaec4d3a60af33947a84a3d85f926015947","modified":1496958775549},{"_id":"public/libs/source-code-pro/fonts/mrl8jkM18OlOQN8JLgasDy2Q8seG17bfDXYR_jUsrzg.woff2","hash":"b0e0bb5ef78db8b15d430d0b9be9d4329289a310","modified":1496958775549},{"_id":"public/Building-a-visual-form-in-your-terminal-emulator-with-Blessed/blessed.png","hash":"008f6c309bae827ed12783ce23825bcfe50c00cb","modified":1496958775549},{"_id":"public/images/baptiste-vannesson.png","hash":"a210cdf3306ba6435d4cda28f8af0de5f53f1a33","modified":1496958775549},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.woff","hash":"6d7e6a5fc802b13694d8820fc0138037c0977d2e","modified":1496958776121},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.woff2","hash":"97e438cc545714309882fbceadbf344fcaddcec5","modified":1496958776125},{"_id":"public/libs/font-awesome/fonts/FontAwesome.otf","hash":"1b22f17fdc38070de50e6d1ab3a32da71aa2d819","modified":1496958776125},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.eot","hash":"965ce8f688fedbeed504efd498bc9c1622d12362","modified":1496958776126},{"_id":"public/js/main.js","hash":"93dc932946e2898bf4f39c42af1b27295e886af1","modified":1496958776128},{"_id":"public/js/insight.js","hash":"6ee84c42c2b230ff9e9bf605a444bd671d44f9e3","modified":1496958776128},{"_id":"public/libs/justified-gallery/justifiedGallery.min.css","hash":"13fbcba5e97aa88b748d94d3efc4718475279907","modified":1496958776128},{"_id":"public/libs/open-sans/styles.css","hash":"5ca6e111046232bde112d33201a60532aee7d3c4","modified":1496958776128},{"_id":"public/libs/source-code-pro/styles.css","hash":"93c308012738728f906cd4c5cfdb34189e0c712b","modified":1496958776128},{"_id":"public/libs/lightgallery/css/lg-fb-comment-box.min.css","hash":"05830fadb8454f39dcc98c8686eb4d5c24b71fc0","modified":1496958776128},{"_id":"public/libs/lightgallery/css/lg-fb-comment-box.css","hash":"844ce27b8488968bccb3e50bb49184ba2aae0625","modified":1496958776128},{"_id":"public/libs/lightgallery/js/lg-fullscreen.js","hash":"65c47ac65362854ba44b00a010bb01e3630209d8","modified":1496958776128},{"_id":"public/libs/lightgallery/js/lg-autoplay.min.js","hash":"d845741bcaf961579622880eb2a445257efad1ac","modified":1496958776128},{"_id":"public/libs/lightgallery/js/lg-hash.js","hash":"15d16516c5642d3de1566ff8fc9160136ccaa405","modified":1496958776128},{"_id":"public/libs/lightgallery/js/lg-pager.js","hash":"8092c692b244bb26343eb03b91bd97deb9dafc9c","modified":1496958776128},{"_id":"public/libs/lightgallery/js/lg-hash.min.js","hash":"43f1e1e720ab0e241c19b83aa26bd6848eab8edc","modified":1496958776128},{"_id":"public/libs/lightgallery/js/lg-pager.min.js","hash":"25caa6ff65b1c6dee09941e795ae2633bdbab211","modified":1496958776128},{"_id":"public/libs/lightgallery/js/lg-share.js","hash":"b7fb5f6474911060a351b0a6fe9dbb9ac3fb22aa","modified":1496958776129},{"_id":"public/libs/lightgallery/js/lg-share.min.js","hash":"39c615f07c5d3aaa65a2c3068a30fdd6dd5c372d","modified":1496958776129},{"_id":"public/libs/lightgallery/js/lg-thumbnail.min.js","hash":"18dd7d2909d1bfd6852f031d03e774b4428c512b","modified":1496958776129},{"_id":"public/libs/lightgallery/js/lg-video.js","hash":"4f99b598f6bb18de9eca8c45c5b4373a03962367","modified":1496958776129},{"_id":"public/libs/lightgallery/js/lg-video.min.js","hash":"032c001ab045a69856f9c3ed4a2a3bf12a8e310f","modified":1496958776129},{"_id":"public/libs/lightgallery/js/lg-zoom.min.js","hash":"15b49f9728439819ece15e4295cce254c87a4f45","modified":1496958776129},{"_id":"public/libs/lightgallery/js/lg-autoplay.js","hash":"426bb78b93acfc39d533ea2bab1cec8dc289cf24","modified":1496958776129},{"_id":"public/libs/lightgallery/js/lg-fullscreen.min.js","hash":"b6b9e4022700b7faf2a5a175ba44a3bd938fdd20","modified":1496958776129},{"_id":"public/css/style.css","hash":"ca6d61dc52173a38515ed55737f8338b5d736153","modified":1496958776129},{"_id":"public/libs/justified-gallery/jquery.justifiedGallery.min.js","hash":"b2683e7a872bc109b1756a65188a37cef7d0bd5c","modified":1496958776129},{"_id":"public/libs/font-awesome/css/font-awesome.css","hash":"b5020c3860669185ba3f316fa7332cdf5c06f393","modified":1496958776129},{"_id":"public/libs/font-awesome/css/font-awesome.min.css","hash":"7cd5a3384333f95c3d37d9488ad82cd6c4b03761","modified":1496958776129},{"_id":"public/libs/lightgallery/css/lg-transitions.css","hash":"7871c28498d74451d6aa438c8d3a1817810a1e19","modified":1496958776129},{"_id":"public/libs/lightgallery/css/lg-transitions.min.css","hash":"5c22e2073a4c96d6212c72135391b599e8d1359f","modified":1496958776129},{"_id":"public/libs/lightgallery/css/lightgallery.css","hash":"bef55316a32e512d5a8940e5d0bfe8bf7a9c5c61","modified":1496958776129},{"_id":"public/libs/lightgallery/css/lightgallery.min.css","hash":"c9a2e19c932b56f4a2ce30c98910d10b74edb38a","modified":1496958776129},{"_id":"public/libs/lightgallery/js/lg-thumbnail.js","hash":"3a6476b6df1d2bef4a21861a78776282a7a11ef1","modified":1496958776129},{"_id":"public/libs/lightgallery/js/lg-zoom.js","hash":"a758e2c8fcf710f9ff761da0eea0ab9321f3484d","modified":1496958776129},{"_id":"public/libs/lightgallery/js/lightgallery.js","hash":"3cd19b33ba99efd5ba1d167da91720566d274b2c","modified":1496958776129},{"_id":"public/libs/lightgallery/js/lightgallery.min.js","hash":"956ef9b706755318da69ad0b5d7786339d831251","modified":1496958776129},{"_id":"public/libs/jquery/2.1.3/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1496958776130},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.ttf","hash":"61d8d967807ef12598d81582fa95b9f600c3ee01","modified":1496958776130},{"_id":"public/libs/font-awesome/fonts/fontawesome-webfont.svg","hash":"c0522272bbaef2acb3d341912754d6ea2d0ecfc0","modified":1496958776134},{"_id":"themes/icarus/.git","hash":"0c6275f90869ffa89aeaf88c140d155d48b02079","modified":1497136138600},{"_id":"themes/icarus/layout/comment/gitment.ejs","hash":"c7998209b9a766eeba6976dd4bdffb1f87469358","modified":1497136138610}],"Category":[{"name":"JavaScript","_id":"cj3oylqtv0003o3c6tlt0lm8s"}],"Data":[],"Page":[{"title":"About","date":"2017-05-27T16:45:01.000Z","comments":0,"_content":"\n```JavaScript\nconsole.log('Hello, World!');\n```\n\nI am **Baptiste Vannesson** (aka **Badacadabra**), a modest Internet citizen from France.\n\nAs far as I can remember, I have always been driven by a devouring intellectual curiosity and, to some extent, obsessed by the Socratic paradox. I work hard everyday to escape the Plato's cave, absorbing some drops from the vast ocean of human knowledge.\n\n**Free/Libre and Open Source Software** (FLOSS) is my religion. I do believe that proprietary licenses conflict with basic freedoms of the modern world. Let's share software, my friends!\n\nOn this blog, you will read technical articles; mainly about **JavaScript**, **Vim** and **GNU/Linux**. If you find articles helpful or if I make a mistake somewhere, feel free to comment. You can also follow me on social media because, if you are here, we probably have interests in common...\n\n<a rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\"><img alt=\"Creative Commons License\" style=\"border-width:0\" src=\"https://i.creativecommons.org/l/by/4.0/88x31.png\" /></a><br />This work is licensed under a <a rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\">Creative Commons Attribution 4.0 International License</a>.\n\n```Bash\nexit 0\n```\n","source":"about/index.md","raw":"---\ntitle: About\ndate: 2017-05-27 18:45:01\ncomments: false\n---\n\n```JavaScript\nconsole.log('Hello, World!');\n```\n\nI am **Baptiste Vannesson** (aka **Badacadabra**), a modest Internet citizen from France.\n\nAs far as I can remember, I have always been driven by a devouring intellectual curiosity and, to some extent, obsessed by the Socratic paradox. I work hard everyday to escape the Plato's cave, absorbing some drops from the vast ocean of human knowledge.\n\n**Free/Libre and Open Source Software** (FLOSS) is my religion. I do believe that proprietary licenses conflict with basic freedoms of the modern world. Let's share software, my friends!\n\nOn this blog, you will read technical articles; mainly about **JavaScript**, **Vim** and **GNU/Linux**. If you find articles helpful or if I make a mistake somewhere, feel free to comment. You can also follow me on social media because, if you are here, we probably have interests in common...\n\n<a rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\"><img alt=\"Creative Commons License\" style=\"border-width:0\" src=\"https://i.creativecommons.org/l/by/4.0/88x31.png\" /></a><br />This work is licensed under a <a rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\">Creative Commons Attribution 4.0 International License</a>.\n\n```Bash\nexit 0\n```\n","updated":"2017-06-05T13:32:21.020Z","path":"about/index.html","layout":"page","_id":"cj3oylqts0001o3c69pkrwaoq","content":"<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello, World!'</span>);</div></pre></td></tr></table></figure>\n<p>I am <strong>Baptiste Vannesson</strong> (aka <strong>Badacadabra</strong>), a modest Internet citizen from France.</p>\n<p>As far as I can remember, I have always been driven by a devouring intellectual curiosity and, to some extent, obsessed by the Socratic paradox. I work hard everyday to escape the Plato’s cave, absorbing some drops from the vast ocean of human knowledge.</p>\n<p><strong>Free/Libre and Open Source Software</strong> (FLOSS) is my religion. I do believe that proprietary licenses conflict with basic freedoms of the modern world. Let’s share software, my friends!</p>\n<p>On this blog, you will read technical articles; mainly about <strong>JavaScript</strong>, <strong>Vim</strong> and <strong>GNU/Linux</strong>. If you find articles helpful or if I make a mistake somewhere, feel free to comment. You can also follow me on social media because, if you are here, we probably have interests in common…</p>\n<p><a rel=\"external\" href=\"http://creativecommons.org/licenses/by/4.0/\" target=\"_blank\"><img alt=\"Creative Commons License\" style=\"border-width:0\" src=\"https://i.creativecommons.org/l/by/4.0/88x31.png\"></a><br>This work is licensed under a <a rel=\"external\" href=\"http://creativecommons.org/licenses/by/4.0/\" target=\"_blank\">Creative Commons Attribution 4.0 International License</a>.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">exit</span> 0</div></pre></td></tr></table></figure>\n","excerpt":"","more":"<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'Hello, World!'</span>);</div></pre></td></tr></table></figure>\n<p>I am <strong>Baptiste Vannesson</strong> (aka <strong>Badacadabra</strong>), a modest Internet citizen from France.</p>\n<p>As far as I can remember, I have always been driven by a devouring intellectual curiosity and, to some extent, obsessed by the Socratic paradox. I work hard everyday to escape the Plato’s cave, absorbing some drops from the vast ocean of human knowledge.</p>\n<p><strong>Free/Libre and Open Source Software</strong> (FLOSS) is my religion. I do believe that proprietary licenses conflict with basic freedoms of the modern world. Let’s share software, my friends!</p>\n<p>On this blog, you will read technical articles; mainly about <strong>JavaScript</strong>, <strong>Vim</strong> and <strong>GNU/Linux</strong>. If you find articles helpful or if I make a mistake somewhere, feel free to comment. You can also follow me on social media because, if you are here, we probably have interests in common…</p>\n<p><a rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\"><img alt=\"Creative Commons License\" style=\"border-width:0\" src=\"https://i.creativecommons.org/l/by/4.0/88x31.png\" /></a><br />This work is licensed under a <a rel=\"license\" href=\"http://creativecommons.org/licenses/by/4.0/\">Creative Commons Attribution 4.0 International License</a>.</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">exit</span> 0</div></pre></td></tr></table></figure>\n"}],"Post":[{"title":"Building a visual form in your terminal emulator with Blessed","date":"2017-06-05T21:52:43.000Z","thumbnail":"/images/javascript.png","_content":"\nDo you like **ncurses**? Do you like **JavaScript**? If yes, you will love [**Blessed**](https://github.com/chjj/blessed); a Node.js library to create highly interactive and rich text-based user interfaces.\n\n<!-- more -->\n\n## GUI vs CLI vs TUI\n\n**Graphical User Interfaces** (GUIs) are great in terms of design and usability, but they are quite poor when it comes to automation and performance. For complex operations, it is much easier to write a shell script with Bash than programming macros to interact with graphical components. Of course, sometimes we have to test GUIs. But do we need to automate heavy ones when we just want to manipulate files and perform basic operations? The answer is obviously NO.\n\nHowever, a **Command Line Interface** (CLI) is not very user-friendly. For this reason, we might need a better interface, without sacrificing too much performance. Here comes the **Text-based User Interface** (TUI)...\n\nThe principle is simple: we are still in a terminal, we are still in a textual environment, but here we can create visual layouts using widgets. Graphical components are lightweight and can be used to reproduce layouts we can find on most desktop or web applications.\n\n## Specifications\n\nLet's say we want to get some information about a user. We need to know:\n\n- The full name (first name + last name) of the user\n- His favorite text editors among \"Vim\", \"Emacs\", \"Atom\" and \"Brackets\"\n- If he likes Blessed or not\n- If he has some comments to share\n\n## Basic CLI implementation with Bash\n\nTo get user input, we can create a Bash script and use the `read` command. A possible (but very basic) implementation could look like this:\n\n```Bash\n#!/bin/bash\n\necho -e \"\\033[0;34mFirst name:\\033[0m\"\nread -r firstname\n\necho -e \"\\033[0;34mLast name:\\033[0m\"\nread -r lastname\n\necho -e \"\\033[0;34mWhat are your favorite editors? (enter numbers only)\n 1) Vim\n 2) Emacs\n 3) Atom\n 4) Brackets\\033[0m\"\nread -r selection\n\neditors=\"\"\nif [[ \"$selection\" =~ ^.*1.*$ ]]; then editors+=\"Vim \"; fi\nif [[ \"$selection\" =~ ^.*2.*$ ]]; then editors+=\"Emacs \"; fi\nif [[ \"$selection\" =~ ^.*3.*$ ]]; then editors+=\"Atom \"; fi\nif [[ \"$selection\" =~ ^.*4.*$ ]]; then editors+=\"Brackets \"; fi\n\necho -e \"\\033[0;34mDo you like Blessed? (y/n)\\033[0m\"\nread -r blessed\n\necho -e \"\\033[0;34mYour comments...\\033[0m\"\nread -r comments\n\necho \"$firstname $lastname\n--------------------------\nFavorite editors: $editors\nLikes Blessed: $blessed\nComments: $comments\" > data.txt\n```\n\nIf I run the script and provide all relevant information, a `data.txt` file is generated with the following content:\n\n```\nBaptiste Vannesson\n--------------------------\nFavorite editors: Vim Atom \nLikes Blessed: y\nComments: It works!\n```\n\nThis solution is acceptable if we do not need a sophisticated interface. But to shine in society, we may need something more advanced... Blessed comes to the rescue!\n\n## Advanced TUI implementation with Blessed\n\nHere is the layout we are going to build programmatically:\n\n![Blessed form](/Building-a-visual-form-in-your-terminal-emulator-with-Blessed/blessed.png)\n\n### Importing modules\n\nHere we use the **CommonJS** syntax. We need two modules only: **blessed** and **fs**.\n\n```JavaScript\nvar blessed = require('blessed'),\n    fs = require('fs');\n```\n\n### Creating a screen object\n\nJust like the scene in [three.js](https://threejs.org/), we need a primary object to render something on screen. With Blessed, this is easy to memorize because it is actually the **screen** object (which has a `render()` method). The following code creates a screen object called \"Blessed form\" with smart CSR (change-scroll-region) for a more efficient rendering:\n\n```JavaScript\nvar screen = blessed.screen({\n  smartCSR: true,\n  title: 'Blessed form'\n});\n```\n\nBecause we are building a TUI, we can set global key bindings to interact more easily with our interface. A must-have is a shortcut that allows us to quit instead of killing the current shell session. By convention, we will press <kbd>Q</kbd> to quit:\n\n```JavaScript\nscreen.key('q', function () {\n  this.destroy();\n});\n```\n\n### Configuring widgets\n\nCreating user interfaces with Blessed is not very hard, but extremely verbose and declarative. The library makes an intensive use of the **object specifier** pattern (aka **options object**).\n\n> It sometimes happens that a constructor is given a very large number of parameters. This can be troublesome because it can be very difficult to remember the order of the arguments. In such cases, it can be much friendlier if we write the constructor to accept a single object specifier instead. That object contains the specification of the object to be constructed.\n\n> **Douglas Crockford**, *JavaScript: The Good Parts*\n\nIn fact, Blessed is based on **widgets** (text inputs, checkboxes, radio buttons, etc.) that can be configured quite precisely. As an example, here we create the form and its first text box:\n\n```JavaScript\nvar form = blessed.form({\n  parent: screen,\n  width: '90%',\n  left: 'center',\n  keys: true,\n  vi: true\n});\n\nvar label = blessed.text({\n  parent: screen,\n  top: 3,\n  left: 5,\n  content: 'FIRST NAME:'\n});\n\nvar firstName = blessed.textbox({\n  parent: form,\n  name: 'firstname',\n  top: 4,\n  left: 5,\n  height: 3,\n  inputOnFocus: true,\n  content: 'first',\n  border: {\n    type: 'line'\n  },\n  focus: {\n    fg: 'blue'\n  }\n});\n```\n\nBlessed positioning is a bit less convenient and powerful than CSS positioning, but we do not have the same constraints for a web page and a terminal app. For a TUI, absolute positioning does the job quite well...\n\n### Handling events\n\nTo submit or reset the form, we have two main buttons: `submit` & `reset`. These buttons must trigger the appropriate form action. It could be done like so:\n\n```JavaScript\nsubmit.on('press', function () {\n  form.submit();\n});\n\nreset.on('press', function () {\n  form.reset();\n});\n```\n\nWhen the form is submitted, we have to parse its data properly and write the result to a file. When it is reset, we just send a message (a toast):\n\n```JavaScript\nform.on('submit', function (data) {\n  // Checkboxes return an array of booleans like [true, false, true, false]\n  var editors = ['Vim', 'Emacs', 'Atom', 'Brackets'].filter(function (item, index) {\n    return data.editors[index];\n  });\n\n  msg.display('Form submitted!', function () {\n    var summary = '';\n    summary += data.firstname + ' ' + data.lastname + '\\n';\n    summary += '------------------------------\\n';\n    summary += 'Favorite editors: ' + editors + '\\n';\n    summary += 'Likes Blessed: ' + data.like[0] + '\\n';\n    summary += 'Comments: ' + data.comments;\n\n    fs.writeFile('form-data.txt', summary, function (err) {\n      if (err) throw err;\n    });\n  });\n});\n\nform.on('reset', function () {\n  msg.display('Form cleared!', function () {});\n});\n```\n\nDone!\n\n### Full implementation\n\nIf your environment is properly set up, you can run the following script with `node`:\n\n```JavaScript\nvar blessed = require('blessed'),\n    fs = require('fs');\n\n// Screen\n\nvar screen = blessed.screen({\n  smartCSR: true,\n  title: 'Blessed form'\n});\n\n// Form\n\nvar form = blessed.form({\n  parent: screen,\n  width: '90%',\n  left: 'center',\n  keys: true,\n  vi: true\n});\n\n// Text boxes\n\nvar label1 = blessed.text({\n  parent: screen,\n  top: 3,\n  left: 5,\n  content: 'FIRST NAME:'\n});\n\nvar firstName = blessed.textbox({\n  parent: form,\n  name: 'firstname',\n  top: 4,\n  left: 5,\n  height: 3,\n  inputOnFocus: true,\n  content: 'first',\n  border: {\n    type: 'line'\n  },\n  focus: {\n    fg: 'blue'\n  }\n});\n\nvar label2 = blessed.text({\n  parent: screen,\n  content: 'LAST NAME:',\n  top: 8,\n  left: 5\n});\n\nvar lastName = blessed.textbox({\n  parent: form,\n  name: 'lastname',\n  top: 9,\n  left: 5,\n  height: 3,\n  inputOnFocus: true,\n  content: 'last',\n  border: {\n    type: 'line'\n  },\n  focus: {\n    fg: 'blue'\n  }\n});\n\n// Check boxes\n\nvar label3 = blessed.text({\n  parent: screen,\n  content: 'What are your favorite editors?',\n  top: 14,\n  left: 5\n});\n\nvar vim = blessed.checkbox({\n  parent: form,\n  name: 'editors',\n  content: 'Vim',\n  top: 16,\n  left: 5\n});\n\nvar emacs = blessed.checkbox({\n  parent: form,\n  name: 'editors',\n  content: 'Emacs',\n  top: 16,\n  left: 20\n});\n\nvar atom = blessed.checkbox({\n  parent: form,\n  name: 'editors',\n  content: 'Atom',\n  top: 16,\n  left: 35\n});\n\nvar brackets = blessed.checkbox({\n  parent: form,\n  name: 'editors',\n  content: 'Brackets',\n  top: 16,\n  left: 50\n});\n\n// Radio buttons\n\nvar label4 = blessed.text({\n  parent: screen,\n  content: 'Do you like Blessed?',\n  top: 19,\n  left: 5\n});\n\nvar radioset = blessed.radioset({\n  parent: form,\n  width: '100%',\n  height: 5,\n  top: 21\n});\n\nvar yes = blessed.radiobutton({\n  parent: radioset,\n  name: 'like',\n  content: 'Yes',\n  left: 5\n});\n\nvar no = blessed.radiobutton({\n  parent: radioset,\n  name: 'like',\n  content: 'No',\n  left: 15\n});\n\n// Text area\n\nvar label5 = blessed.text({\n  parent: screen,\n  content: 'Your comments...',\n  top: 24,\n  left: 5\n});\n\nvar textarea = blessed.textarea({\n  parent: form,\n  name: 'comments',\n  top: 26,\n  left: 5,\n  height: 7,\n  inputOnFocus: true,\n  border: {\n    type: 'line'\n  }\n});\n\n// Submit/Cancel buttons\n\nvar submit = blessed.button({\n  parent: form,\n  name: 'submit',\n  content: 'Submit',\n  top: 35,\n  left: 5,\n  shrink: true,\n  padding: {\n    top: 1,\n    right: 2,\n    bottom: 1,\n    left: 2\n  },\n  style: {\n    bold: true,\n    fg: 'white',\n    bg: 'green',\n    focus: {\n      inverse: true\n    }\n  }\n});\n\nvar reset = blessed.button({\n  parent: form,\n  name: 'reset',\n  content: 'Reset',\n  top: 35,\n  left: 15,\n  shrink: true,\n  padding: {\n    top: 1,\n    right: 2,\n    bottom: 1,\n    left: 2\n  },\n  style: {\n    bold: true,\n    fg: 'white',\n    bg: 'red',\n    focus: {\n      inverse: true\n    }\n  }\n});\n\n// Info\n\nvar msg = blessed.message({\n  parent: screen,\n  top: 40,\n  left: 5,\n  style: {\n    italic: true,\n    fg: 'green'\n  }\n});\n\nvar table = blessed.table({\n  parent: screen,\n  content: '',\n  top: 40,\n  left: 'center',\n  style: {\n    fg: 'green',\n    header: {\n      bold: true,\n      fg: 'white',\n      bg: 'blue'\n    }\n  },\n  hidden: true\n});\n\n// Event management\n\nsubmit.on('press', function () {\n  form.submit();\n});\n\nreset.on('press', function () {\n  form.reset();\n});\n\nform.on('submit', function (data) {\n  var editors = ['Vim', 'Emacs', 'Atom', 'Brackets'].filter(function (item, index) {\n    return data.editors[index];\n  });\n\n  msg.display('Form submitted!', function () {\n    var summary = '';\n    summary += data.firstname + ' ' + data.lastname + '\\n';\n    summary += '------------------------------\\n';\n    summary += 'Favorite editors: ' + editors + '\\n';\n    summary += 'Likes Blessed: ' + data.like[0] + '\\n';\n    summary += 'Comments: ' + data.comments;\n\n    fs.writeFile('form-data.txt', summary, function (err) {\n      if (err) throw err;\n    });\n  });\n});\n\nform.on('reset', function () {\n  msg.display('Form cleared!', function () {});\n});\n\n// Key bindings\n\nscreen.key('q', function () {\n  this.destroy();\n});\n\n// Render everything!\n\nscreen.render();\n```\n\n## Conclusion\n\nBuilding an advanced TUI may be a long process. Sometimes a raw CLI program is better, but if usability really matters, Blessed can be an interesting option and a good alternative to ncurses.\n\nBy the way, in the use case presented here, there is no validation at all: not in our Bash script, nor in our Blessed script. If you want a good exercise, maybe you can try to implement it...\n","source":"_posts/Building-a-visual-form-in-your-terminal-emulator-with-Blessed.md","raw":"---\ntitle: Building a visual form in your terminal emulator with Blessed\ndate: 2017-06-05 23:52:43\ncategories:\n  - JavaScript\ntags:\n  - Blessed\n  - Node.js\n  - ES5\nthumbnail: /images/javascript.png\n---\n\nDo you like **ncurses**? Do you like **JavaScript**? If yes, you will love [**Blessed**](https://github.com/chjj/blessed); a Node.js library to create highly interactive and rich text-based user interfaces.\n\n<!-- more -->\n\n## GUI vs CLI vs TUI\n\n**Graphical User Interfaces** (GUIs) are great in terms of design and usability, but they are quite poor when it comes to automation and performance. For complex operations, it is much easier to write a shell script with Bash than programming macros to interact with graphical components. Of course, sometimes we have to test GUIs. But do we need to automate heavy ones when we just want to manipulate files and perform basic operations? The answer is obviously NO.\n\nHowever, a **Command Line Interface** (CLI) is not very user-friendly. For this reason, we might need a better interface, without sacrificing too much performance. Here comes the **Text-based User Interface** (TUI)...\n\nThe principle is simple: we are still in a terminal, we are still in a textual environment, but here we can create visual layouts using widgets. Graphical components are lightweight and can be used to reproduce layouts we can find on most desktop or web applications.\n\n## Specifications\n\nLet's say we want to get some information about a user. We need to know:\n\n- The full name (first name + last name) of the user\n- His favorite text editors among \"Vim\", \"Emacs\", \"Atom\" and \"Brackets\"\n- If he likes Blessed or not\n- If he has some comments to share\n\n## Basic CLI implementation with Bash\n\nTo get user input, we can create a Bash script and use the `read` command. A possible (but very basic) implementation could look like this:\n\n```Bash\n#!/bin/bash\n\necho -e \"\\033[0;34mFirst name:\\033[0m\"\nread -r firstname\n\necho -e \"\\033[0;34mLast name:\\033[0m\"\nread -r lastname\n\necho -e \"\\033[0;34mWhat are your favorite editors? (enter numbers only)\n 1) Vim\n 2) Emacs\n 3) Atom\n 4) Brackets\\033[0m\"\nread -r selection\n\neditors=\"\"\nif [[ \"$selection\" =~ ^.*1.*$ ]]; then editors+=\"Vim \"; fi\nif [[ \"$selection\" =~ ^.*2.*$ ]]; then editors+=\"Emacs \"; fi\nif [[ \"$selection\" =~ ^.*3.*$ ]]; then editors+=\"Atom \"; fi\nif [[ \"$selection\" =~ ^.*4.*$ ]]; then editors+=\"Brackets \"; fi\n\necho -e \"\\033[0;34mDo you like Blessed? (y/n)\\033[0m\"\nread -r blessed\n\necho -e \"\\033[0;34mYour comments...\\033[0m\"\nread -r comments\n\necho \"$firstname $lastname\n--------------------------\nFavorite editors: $editors\nLikes Blessed: $blessed\nComments: $comments\" > data.txt\n```\n\nIf I run the script and provide all relevant information, a `data.txt` file is generated with the following content:\n\n```\nBaptiste Vannesson\n--------------------------\nFavorite editors: Vim Atom \nLikes Blessed: y\nComments: It works!\n```\n\nThis solution is acceptable if we do not need a sophisticated interface. But to shine in society, we may need something more advanced... Blessed comes to the rescue!\n\n## Advanced TUI implementation with Blessed\n\nHere is the layout we are going to build programmatically:\n\n![Blessed form](/Building-a-visual-form-in-your-terminal-emulator-with-Blessed/blessed.png)\n\n### Importing modules\n\nHere we use the **CommonJS** syntax. We need two modules only: **blessed** and **fs**.\n\n```JavaScript\nvar blessed = require('blessed'),\n    fs = require('fs');\n```\n\n### Creating a screen object\n\nJust like the scene in [three.js](https://threejs.org/), we need a primary object to render something on screen. With Blessed, this is easy to memorize because it is actually the **screen** object (which has a `render()` method). The following code creates a screen object called \"Blessed form\" with smart CSR (change-scroll-region) for a more efficient rendering:\n\n```JavaScript\nvar screen = blessed.screen({\n  smartCSR: true,\n  title: 'Blessed form'\n});\n```\n\nBecause we are building a TUI, we can set global key bindings to interact more easily with our interface. A must-have is a shortcut that allows us to quit instead of killing the current shell session. By convention, we will press <kbd>Q</kbd> to quit:\n\n```JavaScript\nscreen.key('q', function () {\n  this.destroy();\n});\n```\n\n### Configuring widgets\n\nCreating user interfaces with Blessed is not very hard, but extremely verbose and declarative. The library makes an intensive use of the **object specifier** pattern (aka **options object**).\n\n> It sometimes happens that a constructor is given a very large number of parameters. This can be troublesome because it can be very difficult to remember the order of the arguments. In such cases, it can be much friendlier if we write the constructor to accept a single object specifier instead. That object contains the specification of the object to be constructed.\n\n> **Douglas Crockford**, *JavaScript: The Good Parts*\n\nIn fact, Blessed is based on **widgets** (text inputs, checkboxes, radio buttons, etc.) that can be configured quite precisely. As an example, here we create the form and its first text box:\n\n```JavaScript\nvar form = blessed.form({\n  parent: screen,\n  width: '90%',\n  left: 'center',\n  keys: true,\n  vi: true\n});\n\nvar label = blessed.text({\n  parent: screen,\n  top: 3,\n  left: 5,\n  content: 'FIRST NAME:'\n});\n\nvar firstName = blessed.textbox({\n  parent: form,\n  name: 'firstname',\n  top: 4,\n  left: 5,\n  height: 3,\n  inputOnFocus: true,\n  content: 'first',\n  border: {\n    type: 'line'\n  },\n  focus: {\n    fg: 'blue'\n  }\n});\n```\n\nBlessed positioning is a bit less convenient and powerful than CSS positioning, but we do not have the same constraints for a web page and a terminal app. For a TUI, absolute positioning does the job quite well...\n\n### Handling events\n\nTo submit or reset the form, we have two main buttons: `submit` & `reset`. These buttons must trigger the appropriate form action. It could be done like so:\n\n```JavaScript\nsubmit.on('press', function () {\n  form.submit();\n});\n\nreset.on('press', function () {\n  form.reset();\n});\n```\n\nWhen the form is submitted, we have to parse its data properly and write the result to a file. When it is reset, we just send a message (a toast):\n\n```JavaScript\nform.on('submit', function (data) {\n  // Checkboxes return an array of booleans like [true, false, true, false]\n  var editors = ['Vim', 'Emacs', 'Atom', 'Brackets'].filter(function (item, index) {\n    return data.editors[index];\n  });\n\n  msg.display('Form submitted!', function () {\n    var summary = '';\n    summary += data.firstname + ' ' + data.lastname + '\\n';\n    summary += '------------------------------\\n';\n    summary += 'Favorite editors: ' + editors + '\\n';\n    summary += 'Likes Blessed: ' + data.like[0] + '\\n';\n    summary += 'Comments: ' + data.comments;\n\n    fs.writeFile('form-data.txt', summary, function (err) {\n      if (err) throw err;\n    });\n  });\n});\n\nform.on('reset', function () {\n  msg.display('Form cleared!', function () {});\n});\n```\n\nDone!\n\n### Full implementation\n\nIf your environment is properly set up, you can run the following script with `node`:\n\n```JavaScript\nvar blessed = require('blessed'),\n    fs = require('fs');\n\n// Screen\n\nvar screen = blessed.screen({\n  smartCSR: true,\n  title: 'Blessed form'\n});\n\n// Form\n\nvar form = blessed.form({\n  parent: screen,\n  width: '90%',\n  left: 'center',\n  keys: true,\n  vi: true\n});\n\n// Text boxes\n\nvar label1 = blessed.text({\n  parent: screen,\n  top: 3,\n  left: 5,\n  content: 'FIRST NAME:'\n});\n\nvar firstName = blessed.textbox({\n  parent: form,\n  name: 'firstname',\n  top: 4,\n  left: 5,\n  height: 3,\n  inputOnFocus: true,\n  content: 'first',\n  border: {\n    type: 'line'\n  },\n  focus: {\n    fg: 'blue'\n  }\n});\n\nvar label2 = blessed.text({\n  parent: screen,\n  content: 'LAST NAME:',\n  top: 8,\n  left: 5\n});\n\nvar lastName = blessed.textbox({\n  parent: form,\n  name: 'lastname',\n  top: 9,\n  left: 5,\n  height: 3,\n  inputOnFocus: true,\n  content: 'last',\n  border: {\n    type: 'line'\n  },\n  focus: {\n    fg: 'blue'\n  }\n});\n\n// Check boxes\n\nvar label3 = blessed.text({\n  parent: screen,\n  content: 'What are your favorite editors?',\n  top: 14,\n  left: 5\n});\n\nvar vim = blessed.checkbox({\n  parent: form,\n  name: 'editors',\n  content: 'Vim',\n  top: 16,\n  left: 5\n});\n\nvar emacs = blessed.checkbox({\n  parent: form,\n  name: 'editors',\n  content: 'Emacs',\n  top: 16,\n  left: 20\n});\n\nvar atom = blessed.checkbox({\n  parent: form,\n  name: 'editors',\n  content: 'Atom',\n  top: 16,\n  left: 35\n});\n\nvar brackets = blessed.checkbox({\n  parent: form,\n  name: 'editors',\n  content: 'Brackets',\n  top: 16,\n  left: 50\n});\n\n// Radio buttons\n\nvar label4 = blessed.text({\n  parent: screen,\n  content: 'Do you like Blessed?',\n  top: 19,\n  left: 5\n});\n\nvar radioset = blessed.radioset({\n  parent: form,\n  width: '100%',\n  height: 5,\n  top: 21\n});\n\nvar yes = blessed.radiobutton({\n  parent: radioset,\n  name: 'like',\n  content: 'Yes',\n  left: 5\n});\n\nvar no = blessed.radiobutton({\n  parent: radioset,\n  name: 'like',\n  content: 'No',\n  left: 15\n});\n\n// Text area\n\nvar label5 = blessed.text({\n  parent: screen,\n  content: 'Your comments...',\n  top: 24,\n  left: 5\n});\n\nvar textarea = blessed.textarea({\n  parent: form,\n  name: 'comments',\n  top: 26,\n  left: 5,\n  height: 7,\n  inputOnFocus: true,\n  border: {\n    type: 'line'\n  }\n});\n\n// Submit/Cancel buttons\n\nvar submit = blessed.button({\n  parent: form,\n  name: 'submit',\n  content: 'Submit',\n  top: 35,\n  left: 5,\n  shrink: true,\n  padding: {\n    top: 1,\n    right: 2,\n    bottom: 1,\n    left: 2\n  },\n  style: {\n    bold: true,\n    fg: 'white',\n    bg: 'green',\n    focus: {\n      inverse: true\n    }\n  }\n});\n\nvar reset = blessed.button({\n  parent: form,\n  name: 'reset',\n  content: 'Reset',\n  top: 35,\n  left: 15,\n  shrink: true,\n  padding: {\n    top: 1,\n    right: 2,\n    bottom: 1,\n    left: 2\n  },\n  style: {\n    bold: true,\n    fg: 'white',\n    bg: 'red',\n    focus: {\n      inverse: true\n    }\n  }\n});\n\n// Info\n\nvar msg = blessed.message({\n  parent: screen,\n  top: 40,\n  left: 5,\n  style: {\n    italic: true,\n    fg: 'green'\n  }\n});\n\nvar table = blessed.table({\n  parent: screen,\n  content: '',\n  top: 40,\n  left: 'center',\n  style: {\n    fg: 'green',\n    header: {\n      bold: true,\n      fg: 'white',\n      bg: 'blue'\n    }\n  },\n  hidden: true\n});\n\n// Event management\n\nsubmit.on('press', function () {\n  form.submit();\n});\n\nreset.on('press', function () {\n  form.reset();\n});\n\nform.on('submit', function (data) {\n  var editors = ['Vim', 'Emacs', 'Atom', 'Brackets'].filter(function (item, index) {\n    return data.editors[index];\n  });\n\n  msg.display('Form submitted!', function () {\n    var summary = '';\n    summary += data.firstname + ' ' + data.lastname + '\\n';\n    summary += '------------------------------\\n';\n    summary += 'Favorite editors: ' + editors + '\\n';\n    summary += 'Likes Blessed: ' + data.like[0] + '\\n';\n    summary += 'Comments: ' + data.comments;\n\n    fs.writeFile('form-data.txt', summary, function (err) {\n      if (err) throw err;\n    });\n  });\n});\n\nform.on('reset', function () {\n  msg.display('Form cleared!', function () {});\n});\n\n// Key bindings\n\nscreen.key('q', function () {\n  this.destroy();\n});\n\n// Render everything!\n\nscreen.render();\n```\n\n## Conclusion\n\nBuilding an advanced TUI may be a long process. Sometimes a raw CLI program is better, but if usability really matters, Blessed can be an interesting option and a good alternative to ncurses.\n\nBy the way, in the use case presented here, there is no validation at all: not in our Bash script, nor in our Blessed script. If you want a good exercise, maybe you can try to implement it...\n","slug":"Building-a-visual-form-in-your-terminal-emulator-with-Blessed","published":1,"updated":"2017-06-07T21:35:00.973Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3oylqto0000o3c63cm9oewt","content":"<p>Do you like <strong>ncurses</strong>? Do you like <strong>JavaScript</strong>? If yes, you will love <a href=\"https://github.com/chjj/blessed\" target=\"_blank\" rel=\"external\"><strong>Blessed</strong></a>; a Node.js library to create highly interactive and rich text-based user interfaces.</p>\n<a id=\"more\"></a>\n<h2 id=\"GUI-vs-CLI-vs-TUI\"><a href=\"#GUI-vs-CLI-vs-TUI\" class=\"headerlink\" title=\"GUI vs CLI vs TUI\"></a>GUI vs CLI vs TUI</h2><p><strong>Graphical User Interfaces</strong> (GUIs) are great in terms of design and usability, but they are quite poor when it comes to automation and performance. For complex operations, it is much easier to write a shell script with Bash than programming macros to interact with graphical components. Of course, sometimes we have to test GUIs. But do we need to automate heavy ones when we just want to manipulate files and perform basic operations? The answer is obviously NO.</p>\n<p>However, a <strong>Command Line Interface</strong> (CLI) is not very user-friendly. For this reason, we might need a better interface, without sacrificing too much performance. Here comes the <strong>Text-based User Interface</strong> (TUI)…</p>\n<p>The principle is simple: we are still in a terminal, we are still in a textual environment, but here we can create visual layouts using widgets. Graphical components are lightweight and can be used to reproduce layouts we can find on most desktop or web applications.</p>\n<h2 id=\"Specifications\"><a href=\"#Specifications\" class=\"headerlink\" title=\"Specifications\"></a>Specifications</h2><p>Let’s say we want to get some information about a user. We need to know:</p>\n<ul>\n<li>The full name (first name + last name) of the user</li>\n<li>His favorite text editors among “Vim”, “Emacs”, “Atom” and “Brackets”</li>\n<li>If he likes Blessed or not</li>\n<li>If he has some comments to share</li>\n</ul>\n<h2 id=\"Basic-CLI-implementation-with-Bash\"><a href=\"#Basic-CLI-implementation-with-Bash\" class=\"headerlink\" title=\"Basic CLI implementation with Bash\"></a>Basic CLI implementation with Bash</h2><p>To get user input, we can create a Bash script and use the <code>read</code> command. A possible (but very basic) implementation could look like this:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"\\033[0;34mFirst name:\\033[0m\"</span></div><div class=\"line\"><span class=\"built_in\">read</span> -r firstname</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"\\033[0;34mLast name:\\033[0m\"</span></div><div class=\"line\"><span class=\"built_in\">read</span> -r lastname</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"\\033[0;34mWhat are your favorite editors? (enter numbers only)</span></div><div class=\"line\"> 1) Vim</div><div class=\"line\"> 2) Emacs</div><div class=\"line\"> 3) Atom</div><div class=\"line\"> 4) Brackets\\033[0m\"</div><div class=\"line\"><span class=\"built_in\">read</span> -r selection</div><div class=\"line\"></div><div class=\"line\">editors=<span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$selection</span>\"</span> =~ ^.*1.*$ ]]; <span class=\"keyword\">then</span> editors+=<span class=\"string\">\"Vim \"</span>; <span class=\"keyword\">fi</span></div><div class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$selection</span>\"</span> =~ ^.*2.*$ ]]; <span class=\"keyword\">then</span> editors+=<span class=\"string\">\"Emacs \"</span>; <span class=\"keyword\">fi</span></div><div class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$selection</span>\"</span> =~ ^.*3.*$ ]]; <span class=\"keyword\">then</span> editors+=<span class=\"string\">\"Atom \"</span>; <span class=\"keyword\">fi</span></div><div class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$selection</span>\"</span> =~ ^.*4.*$ ]]; <span class=\"keyword\">then</span> editors+=<span class=\"string\">\"Brackets \"</span>; <span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"\\033[0;34mDo you like Blessed? (y/n)\\033[0m\"</span></div><div class=\"line\"><span class=\"built_in\">read</span> -r blessed</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"\\033[0;34mYour comments...\\033[0m\"</span></div><div class=\"line\"><span class=\"built_in\">read</span> -r comments</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$firstname</span> <span class=\"variable\">$lastname</span></span></div><div class=\"line\">--------------------------</div><div class=\"line\">Favorite editors: <span class=\"variable\">$editors</span></div><div class=\"line\">Likes Blessed: <span class=\"variable\">$blessed</span></div><div class=\"line\">Comments: <span class=\"variable\">$comments</span>\" &gt; data.txt</div></pre></td></tr></table></figure>\n<p>If I run the script and provide all relevant information, a <code>data.txt</code> file is generated with the following content:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">Baptiste Vannesson</div><div class=\"line\">--------------------------</div><div class=\"line\">Favorite editors: Vim Atom </div><div class=\"line\">Likes Blessed: y</div><div class=\"line\">Comments: It works!</div></pre></td></tr></table></figure>\n<p>This solution is acceptable if we do not need a sophisticated interface. But to shine in society, we may need something more advanced… Blessed comes to the rescue!</p>\n<h2 id=\"Advanced-TUI-implementation-with-Blessed\"><a href=\"#Advanced-TUI-implementation-with-Blessed\" class=\"headerlink\" title=\"Advanced TUI implementation with Blessed\"></a>Advanced TUI implementation with Blessed</h2><p>Here is the layout we are going to build programmatically:</p>\n<p><img src=\"/Building-a-visual-form-in-your-terminal-emulator-with-Blessed/blessed.png\" alt=\"Blessed form\"></p>\n<h3 id=\"Importing-modules\"><a href=\"#Importing-modules\" class=\"headerlink\" title=\"Importing modules\"></a>Importing modules</h3><p>Here we use the <strong>CommonJS</strong> syntax. We need two modules only: <strong>blessed</strong> and <strong>fs</strong>.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> blessed = <span class=\"built_in\">require</span>(<span class=\"string\">'blessed'</span>),</div><div class=\"line\">    fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</div></pre></td></tr></table></figure>\n<h3 id=\"Creating-a-screen-object\"><a href=\"#Creating-a-screen-object\" class=\"headerlink\" title=\"Creating a screen object\"></a>Creating a screen object</h3><p>Just like the scene in <a href=\"https://threejs.org/\" target=\"_blank\" rel=\"external\">three.js</a>, we need a primary object to render something on screen. With Blessed, this is easy to memorize because it is actually the <strong>screen</strong> object (which has a <code>render()</code> method). The following code creates a screen object called “Blessed form” with smart CSR (change-scroll-region) for a more efficient rendering:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> screen = blessed.screen(&#123;</div><div class=\"line\">  <span class=\"attr\">smartCSR</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">title</span>: <span class=\"string\">'Blessed form'</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>Because we are building a TUI, we can set global key bindings to interact more easily with our interface. A must-have is a shortcut that allows us to quit instead of killing the current shell session. By convention, we will press <kbd>Q</kbd> to quit:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">screen.key(<span class=\"string\">'q'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.destroy();</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h3 id=\"Configuring-widgets\"><a href=\"#Configuring-widgets\" class=\"headerlink\" title=\"Configuring widgets\"></a>Configuring widgets</h3><p>Creating user interfaces with Blessed is not very hard, but extremely verbose and declarative. The library makes an intensive use of the <strong>object specifier</strong> pattern (aka <strong>options object</strong>).</p>\n<blockquote>\n<p>It sometimes happens that a constructor is given a very large number of parameters. This can be troublesome because it can be very difficult to remember the order of the arguments. In such cases, it can be much friendlier if we write the constructor to accept a single object specifier instead. That object contains the specification of the object to be constructed.</p>\n<p><strong>Douglas Crockford</strong>, <em>JavaScript: The Good Parts</em></p>\n</blockquote>\n<p>In fact, Blessed is based on <strong>widgets</strong> (text inputs, checkboxes, radio buttons, etc.) that can be configured quite precisely. As an example, here we create the form and its first text box:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> form = blessed.form(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">width</span>: <span class=\"string\">'90%'</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"string\">'center'</span>,</div><div class=\"line\">  <span class=\"attr\">keys</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">vi</span>: <span class=\"literal\">true</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> label = blessed.text(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">3</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'FIRST NAME:'</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> firstName = blessed.textbox(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'firstname'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">4</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">height</span>: <span class=\"number\">3</span>,</div><div class=\"line\">  <span class=\"attr\">inputOnFocus</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'first'</span>,</div><div class=\"line\">  <span class=\"attr\">border</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">'line'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">focus</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">fg</span>: <span class=\"string\">'blue'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>Blessed positioning is a bit less convenient and powerful than CSS positioning, but we do not have the same constraints for a web page and a terminal app. For a TUI, absolute positioning does the job quite well…</p>\n<h3 id=\"Handling-events\"><a href=\"#Handling-events\" class=\"headerlink\" title=\"Handling events\"></a>Handling events</h3><p>To submit or reset the form, we have two main buttons: <code>submit</code> &amp; <code>reset</code>. These buttons must trigger the appropriate form action. It could be done like so:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">submit.on(<span class=\"string\">'press'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  form.submit();</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">reset.on(<span class=\"string\">'press'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  form.reset();</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>When the form is submitted, we have to parse its data properly and write the result to a file. When it is reset, we just send a message (a toast):</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">form.on(<span class=\"string\">'submit'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// Checkboxes return an array of booleans like [true, false, true, false]</span></div><div class=\"line\">  <span class=\"keyword\">var</span> editors = [<span class=\"string\">'Vim'</span>, <span class=\"string\">'Emacs'</span>, <span class=\"string\">'Atom'</span>, <span class=\"string\">'Brackets'</span>].filter(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">item, index</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> data.editors[index];</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  msg.display(<span class=\"string\">'Form submitted!'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> summary = <span class=\"string\">''</span>;</div><div class=\"line\">    summary += data.firstname + <span class=\"string\">' '</span> + data.lastname + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'------------------------------\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'Favorite editors: '</span> + editors + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'Likes Blessed: '</span> + data.like[<span class=\"number\">0</span>] + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'Comments: '</span> + data.comments;</div><div class=\"line\"></div><div class=\"line\">    fs.writeFile(<span class=\"string\">'form-data.txt'</span>, summary, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err;</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">form.on(<span class=\"string\">'reset'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  msg.display(<span class=\"string\">'Form cleared!'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>Done!</p>\n<h3 id=\"Full-implementation\"><a href=\"#Full-implementation\" class=\"headerlink\" title=\"Full implementation\"></a>Full implementation</h3><p>If your environment is properly set up, you can run the following script with <code>node</code>:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> blessed = <span class=\"built_in\">require</span>(<span class=\"string\">'blessed'</span>),</div><div class=\"line\">    fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Screen</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> screen = blessed.screen(&#123;</div><div class=\"line\">  <span class=\"attr\">smartCSR</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">title</span>: <span class=\"string\">'Blessed form'</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Form</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> form = blessed.form(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">width</span>: <span class=\"string\">'90%'</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"string\">'center'</span>,</div><div class=\"line\">  <span class=\"attr\">keys</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">vi</span>: <span class=\"literal\">true</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Text boxes</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> label1 = blessed.text(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">3</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'FIRST NAME:'</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> firstName = blessed.textbox(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'firstname'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">4</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">height</span>: <span class=\"number\">3</span>,</div><div class=\"line\">  <span class=\"attr\">inputOnFocus</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'first'</span>,</div><div class=\"line\">  <span class=\"attr\">border</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">'line'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">focus</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">fg</span>: <span class=\"string\">'blue'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> label2 = blessed.text(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'LAST NAME:'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">8</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> lastName = blessed.textbox(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'lastname'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">9</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">height</span>: <span class=\"number\">3</span>,</div><div class=\"line\">  <span class=\"attr\">inputOnFocus</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'last'</span>,</div><div class=\"line\">  <span class=\"attr\">border</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">'line'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">focus</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">fg</span>: <span class=\"string\">'blue'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Check boxes</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> label3 = blessed.text(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'What are your favorite editors?'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">14</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> vim = blessed.checkbox(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'editors'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Vim'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">16</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> emacs = blessed.checkbox(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'editors'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Emacs'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">16</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">20</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> atom = blessed.checkbox(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'editors'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Atom'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">16</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">35</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> brackets = blessed.checkbox(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'editors'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Brackets'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">16</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">50</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Radio buttons</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> label4 = blessed.text(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Do you like Blessed?'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">19</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> radioset = blessed.radioset(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">width</span>: <span class=\"string\">'100%'</span>,</div><div class=\"line\">  <span class=\"attr\">height</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">21</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> yes = blessed.radiobutton(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: radioset,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'like'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Yes'</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> no = blessed.radiobutton(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: radioset,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'like'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'No'</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">15</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Text area</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> label5 = blessed.text(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Your comments...'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">24</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> textarea = blessed.textarea(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'comments'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">26</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">height</span>: <span class=\"number\">7</span>,</div><div class=\"line\">  <span class=\"attr\">inputOnFocus</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">border</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">'line'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Submit/Cancel buttons</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> submit = blessed.button(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'submit'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Submit'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">35</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">shrink</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">padding</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">top</span>: <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"attr\">right</span>: <span class=\"number\">2</span>,</div><div class=\"line\">    <span class=\"attr\">bottom</span>: <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"attr\">left</span>: <span class=\"number\">2</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">style</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">bold</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">fg</span>: <span class=\"string\">'white'</span>,</div><div class=\"line\">    <span class=\"attr\">bg</span>: <span class=\"string\">'green'</span>,</div><div class=\"line\">    <span class=\"attr\">focus</span>: &#123;</div><div class=\"line\">      <span class=\"attr\">inverse</span>: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> reset = blessed.button(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'reset'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Reset'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">35</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">15</span>,</div><div class=\"line\">  <span class=\"attr\">shrink</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">padding</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">top</span>: <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"attr\">right</span>: <span class=\"number\">2</span>,</div><div class=\"line\">    <span class=\"attr\">bottom</span>: <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"attr\">left</span>: <span class=\"number\">2</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">style</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">bold</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">fg</span>: <span class=\"string\">'white'</span>,</div><div class=\"line\">    <span class=\"attr\">bg</span>: <span class=\"string\">'red'</span>,</div><div class=\"line\">    <span class=\"attr\">focus</span>: &#123;</div><div class=\"line\">      <span class=\"attr\">inverse</span>: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Info</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> msg = blessed.message(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">40</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">style</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">italic</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">fg</span>: <span class=\"string\">'green'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> table = blessed.table(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">''</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">40</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"string\">'center'</span>,</div><div class=\"line\">  <span class=\"attr\">style</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">fg</span>: <span class=\"string\">'green'</span>,</div><div class=\"line\">    <span class=\"attr\">header</span>: &#123;</div><div class=\"line\">      <span class=\"attr\">bold</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">      <span class=\"attr\">fg</span>: <span class=\"string\">'white'</span>,</div><div class=\"line\">      <span class=\"attr\">bg</span>: <span class=\"string\">'blue'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">hidden</span>: <span class=\"literal\">true</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Event management</span></div><div class=\"line\"></div><div class=\"line\">submit.on(<span class=\"string\">'press'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  form.submit();</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">reset.on(<span class=\"string\">'press'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  form.reset();</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">form.on(<span class=\"string\">'submit'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> editors = [<span class=\"string\">'Vim'</span>, <span class=\"string\">'Emacs'</span>, <span class=\"string\">'Atom'</span>, <span class=\"string\">'Brackets'</span>].filter(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">item, index</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> data.editors[index];</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  msg.display(<span class=\"string\">'Form submitted!'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> summary = <span class=\"string\">''</span>;</div><div class=\"line\">    summary += data.firstname + <span class=\"string\">' '</span> + data.lastname + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'------------------------------\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'Favorite editors: '</span> + editors + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'Likes Blessed: '</span> + data.like[<span class=\"number\">0</span>] + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'Comments: '</span> + data.comments;</div><div class=\"line\"></div><div class=\"line\">    fs.writeFile(<span class=\"string\">'form-data.txt'</span>, summary, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err;</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">form.on(<span class=\"string\">'reset'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  msg.display(<span class=\"string\">'Form cleared!'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;);</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Key bindings</span></div><div class=\"line\"></div><div class=\"line\">screen.key(<span class=\"string\">'q'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.destroy();</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Render everything!</span></div><div class=\"line\"></div><div class=\"line\">screen.render();</div></pre></td></tr></table></figure>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>Building an advanced TUI may be a long process. Sometimes a raw CLI program is better, but if usability really matters, Blessed can be an interesting option and a good alternative to ncurses.</p>\n<p>By the way, in the use case presented here, there is no validation at all: not in our Bash script, nor in our Blessed script. If you want a good exercise, maybe you can try to implement it…</p>\n","excerpt":"<p>Do you like <strong>ncurses</strong>? Do you like <strong>JavaScript</strong>? If yes, you will love <a href=\"https://github.com/chjj/blessed\"><strong>Blessed</strong></a>; a Node.js library to create highly interactive and rich text-based user interfaces.</p>","more":"<h2 id=\"GUI-vs-CLI-vs-TUI\"><a href=\"#GUI-vs-CLI-vs-TUI\" class=\"headerlink\" title=\"GUI vs CLI vs TUI\"></a>GUI vs CLI vs TUI</h2><p><strong>Graphical User Interfaces</strong> (GUIs) are great in terms of design and usability, but they are quite poor when it comes to automation and performance. For complex operations, it is much easier to write a shell script with Bash than programming macros to interact with graphical components. Of course, sometimes we have to test GUIs. But do we need to automate heavy ones when we just want to manipulate files and perform basic operations? The answer is obviously NO.</p>\n<p>However, a <strong>Command Line Interface</strong> (CLI) is not very user-friendly. For this reason, we might need a better interface, without sacrificing too much performance. Here comes the <strong>Text-based User Interface</strong> (TUI)…</p>\n<p>The principle is simple: we are still in a terminal, we are still in a textual environment, but here we can create visual layouts using widgets. Graphical components are lightweight and can be used to reproduce layouts we can find on most desktop or web applications.</p>\n<h2 id=\"Specifications\"><a href=\"#Specifications\" class=\"headerlink\" title=\"Specifications\"></a>Specifications</h2><p>Let’s say we want to get some information about a user. We need to know:</p>\n<ul>\n<li>The full name (first name + last name) of the user</li>\n<li>His favorite text editors among “Vim”, “Emacs”, “Atom” and “Brackets”</li>\n<li>If he likes Blessed or not</li>\n<li>If he has some comments to share</li>\n</ul>\n<h2 id=\"Basic-CLI-implementation-with-Bash\"><a href=\"#Basic-CLI-implementation-with-Bash\" class=\"headerlink\" title=\"Basic CLI implementation with Bash\"></a>Basic CLI implementation with Bash</h2><p>To get user input, we can create a Bash script and use the <code>read</code> command. A possible (but very basic) implementation could look like this:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</div><div class=\"line\"></span></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"\\033[0;34mFirst name:\\033[0m\"</span></div><div class=\"line\"><span class=\"built_in\">read</span> -r firstname</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"\\033[0;34mLast name:\\033[0m\"</span></div><div class=\"line\"><span class=\"built_in\">read</span> -r lastname</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"\\033[0;34mWhat are your favorite editors? (enter numbers only)</div><div class=\"line\"> 1) Vim</div><div class=\"line\"> 2) Emacs</div><div class=\"line\"> 3) Atom</div><div class=\"line\"> 4) Brackets\\033[0m\"</span></div><div class=\"line\"><span class=\"built_in\">read</span> -r selection</div><div class=\"line\"></div><div class=\"line\">editors=<span class=\"string\">\"\"</span></div><div class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$selection</span>\"</span> =~ ^.*1.*$ ]]; <span class=\"keyword\">then</span> editors+=<span class=\"string\">\"Vim \"</span>; <span class=\"keyword\">fi</span></div><div class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$selection</span>\"</span> =~ ^.*2.*$ ]]; <span class=\"keyword\">then</span> editors+=<span class=\"string\">\"Emacs \"</span>; <span class=\"keyword\">fi</span></div><div class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$selection</span>\"</span> =~ ^.*3.*$ ]]; <span class=\"keyword\">then</span> editors+=<span class=\"string\">\"Atom \"</span>; <span class=\"keyword\">fi</span></div><div class=\"line\"><span class=\"keyword\">if</span> [[ <span class=\"string\">\"<span class=\"variable\">$selection</span>\"</span> =~ ^.*4.*$ ]]; <span class=\"keyword\">then</span> editors+=<span class=\"string\">\"Brackets \"</span>; <span class=\"keyword\">fi</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"\\033[0;34mDo you like Blessed? (y/n)\\033[0m\"</span></div><div class=\"line\"><span class=\"built_in\">read</span> -r blessed</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"_\">-e</span> <span class=\"string\">\"\\033[0;34mYour comments...\\033[0m\"</span></div><div class=\"line\"><span class=\"built_in\">read</span> -r comments</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"<span class=\"variable\">$firstname</span> <span class=\"variable\">$lastname</span></div><div class=\"line\">--------------------------</div><div class=\"line\">Favorite editors: <span class=\"variable\">$editors</span></div><div class=\"line\">Likes Blessed: <span class=\"variable\">$blessed</span></div><div class=\"line\">Comments: <span class=\"variable\">$comments</span>\"</span> &gt; data.txt</div></pre></td></tr></table></figure>\n<p>If I run the script and provide all relevant information, a <code>data.txt</code> file is generated with the following content:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">Baptiste Vannesson</div><div class=\"line\">--------------------------</div><div class=\"line\">Favorite editors: Vim Atom </div><div class=\"line\">Likes Blessed: y</div><div class=\"line\">Comments: It works!</div></pre></td></tr></table></figure>\n<p>This solution is acceptable if we do not need a sophisticated interface. But to shine in society, we may need something more advanced… Blessed comes to the rescue!</p>\n<h2 id=\"Advanced-TUI-implementation-with-Blessed\"><a href=\"#Advanced-TUI-implementation-with-Blessed\" class=\"headerlink\" title=\"Advanced TUI implementation with Blessed\"></a>Advanced TUI implementation with Blessed</h2><p>Here is the layout we are going to build programmatically:</p>\n<p><img src=\"/Building-a-visual-form-in-your-terminal-emulator-with-Blessed/blessed.png\" alt=\"Blessed form\"></p>\n<h3 id=\"Importing-modules\"><a href=\"#Importing-modules\" class=\"headerlink\" title=\"Importing modules\"></a>Importing modules</h3><p>Here we use the <strong>CommonJS</strong> syntax. We need two modules only: <strong>blessed</strong> and <strong>fs</strong>.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> blessed = <span class=\"built_in\">require</span>(<span class=\"string\">'blessed'</span>),</div><div class=\"line\">    fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</div></pre></td></tr></table></figure>\n<h3 id=\"Creating-a-screen-object\"><a href=\"#Creating-a-screen-object\" class=\"headerlink\" title=\"Creating a screen object\"></a>Creating a screen object</h3><p>Just like the scene in <a href=\"https://threejs.org/\">three.js</a>, we need a primary object to render something on screen. With Blessed, this is easy to memorize because it is actually the <strong>screen</strong> object (which has a <code>render()</code> method). The following code creates a screen object called “Blessed form” with smart CSR (change-scroll-region) for a more efficient rendering:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> screen = blessed.screen(&#123;</div><div class=\"line\">  <span class=\"attr\">smartCSR</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">title</span>: <span class=\"string\">'Blessed form'</span></div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>Because we are building a TUI, we can set global key bindings to interact more easily with our interface. A must-have is a shortcut that allows us to quit instead of killing the current shell session. By convention, we will press <kbd>Q</kbd> to quit:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">screen.key(<span class=\"string\">'q'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.destroy();</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<h3 id=\"Configuring-widgets\"><a href=\"#Configuring-widgets\" class=\"headerlink\" title=\"Configuring widgets\"></a>Configuring widgets</h3><p>Creating user interfaces with Blessed is not very hard, but extremely verbose and declarative. The library makes an intensive use of the <strong>object specifier</strong> pattern (aka <strong>options object</strong>).</p>\n<blockquote>\n<p>It sometimes happens that a constructor is given a very large number of parameters. This can be troublesome because it can be very difficult to remember the order of the arguments. In such cases, it can be much friendlier if we write the constructor to accept a single object specifier instead. That object contains the specification of the object to be constructed.</p>\n<p><strong>Douglas Crockford</strong>, <em>JavaScript: The Good Parts</em></p>\n</blockquote>\n<p>In fact, Blessed is based on <strong>widgets</strong> (text inputs, checkboxes, radio buttons, etc.) that can be configured quite precisely. As an example, here we create the form and its first text box:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> form = blessed.form(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">width</span>: <span class=\"string\">'90%'</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"string\">'center'</span>,</div><div class=\"line\">  <span class=\"attr\">keys</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">vi</span>: <span class=\"literal\">true</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> label = blessed.text(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">3</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'FIRST NAME:'</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> firstName = blessed.textbox(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'firstname'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">4</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">height</span>: <span class=\"number\">3</span>,</div><div class=\"line\">  <span class=\"attr\">inputOnFocus</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'first'</span>,</div><div class=\"line\">  <span class=\"attr\">border</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">'line'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">focus</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">fg</span>: <span class=\"string\">'blue'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>Blessed positioning is a bit less convenient and powerful than CSS positioning, but we do not have the same constraints for a web page and a terminal app. For a TUI, absolute positioning does the job quite well…</p>\n<h3 id=\"Handling-events\"><a href=\"#Handling-events\" class=\"headerlink\" title=\"Handling events\"></a>Handling events</h3><p>To submit or reset the form, we have two main buttons: <code>submit</code> &amp; <code>reset</code>. These buttons must trigger the appropriate form action. It could be done like so:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">submit.on(<span class=\"string\">'press'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  form.submit();</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">reset.on(<span class=\"string\">'press'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  form.reset();</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>When the form is submitted, we have to parse its data properly and write the result to a file. When it is reset, we just send a message (a toast):</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">form.on(<span class=\"string\">'submit'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// Checkboxes return an array of booleans like [true, false, true, false]</span></div><div class=\"line\">  <span class=\"keyword\">var</span> editors = [<span class=\"string\">'Vim'</span>, <span class=\"string\">'Emacs'</span>, <span class=\"string\">'Atom'</span>, <span class=\"string\">'Brackets'</span>].filter(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">item, index</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> data.editors[index];</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  msg.display(<span class=\"string\">'Form submitted!'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> summary = <span class=\"string\">''</span>;</div><div class=\"line\">    summary += data.firstname + <span class=\"string\">' '</span> + data.lastname + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'------------------------------\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'Favorite editors: '</span> + editors + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'Likes Blessed: '</span> + data.like[<span class=\"number\">0</span>] + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'Comments: '</span> + data.comments;</div><div class=\"line\"></div><div class=\"line\">    fs.writeFile(<span class=\"string\">'form-data.txt'</span>, summary, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err;</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">form.on(<span class=\"string\">'reset'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  msg.display(<span class=\"string\">'Form cleared!'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;);</div><div class=\"line\">&#125;);</div></pre></td></tr></table></figure>\n<p>Done!</p>\n<h3 id=\"Full-implementation\"><a href=\"#Full-implementation\" class=\"headerlink\" title=\"Full implementation\"></a>Full implementation</h3><p>If your environment is properly set up, you can run the following script with <code>node</code>:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> blessed = <span class=\"built_in\">require</span>(<span class=\"string\">'blessed'</span>),</div><div class=\"line\">    fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Screen</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> screen = blessed.screen(&#123;</div><div class=\"line\">  <span class=\"attr\">smartCSR</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">title</span>: <span class=\"string\">'Blessed form'</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Form</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> form = blessed.form(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">width</span>: <span class=\"string\">'90%'</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"string\">'center'</span>,</div><div class=\"line\">  <span class=\"attr\">keys</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">vi</span>: <span class=\"literal\">true</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Text boxes</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> label1 = blessed.text(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">3</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'FIRST NAME:'</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> firstName = blessed.textbox(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'firstname'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">4</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">height</span>: <span class=\"number\">3</span>,</div><div class=\"line\">  <span class=\"attr\">inputOnFocus</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'first'</span>,</div><div class=\"line\">  <span class=\"attr\">border</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">'line'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">focus</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">fg</span>: <span class=\"string\">'blue'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> label2 = blessed.text(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'LAST NAME:'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">8</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> lastName = blessed.textbox(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'lastname'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">9</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">height</span>: <span class=\"number\">3</span>,</div><div class=\"line\">  <span class=\"attr\">inputOnFocus</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'last'</span>,</div><div class=\"line\">  <span class=\"attr\">border</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">'line'</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">focus</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">fg</span>: <span class=\"string\">'blue'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Check boxes</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> label3 = blessed.text(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'What are your favorite editors?'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">14</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> vim = blessed.checkbox(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'editors'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Vim'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">16</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> emacs = blessed.checkbox(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'editors'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Emacs'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">16</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">20</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> atom = blessed.checkbox(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'editors'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Atom'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">16</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">35</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> brackets = blessed.checkbox(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'editors'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Brackets'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">16</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">50</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Radio buttons</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> label4 = blessed.text(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Do you like Blessed?'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">19</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> radioset = blessed.radioset(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">width</span>: <span class=\"string\">'100%'</span>,</div><div class=\"line\">  <span class=\"attr\">height</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">21</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> yes = blessed.radiobutton(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: radioset,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'like'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Yes'</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> no = blessed.radiobutton(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: radioset,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'like'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'No'</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">15</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Text area</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> label5 = blessed.text(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Your comments...'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">24</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> textarea = blessed.textarea(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'comments'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">26</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">height</span>: <span class=\"number\">7</span>,</div><div class=\"line\">  <span class=\"attr\">inputOnFocus</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">border</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">type</span>: <span class=\"string\">'line'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Submit/Cancel buttons</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> submit = blessed.button(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'submit'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Submit'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">35</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">shrink</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">padding</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">top</span>: <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"attr\">right</span>: <span class=\"number\">2</span>,</div><div class=\"line\">    <span class=\"attr\">bottom</span>: <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"attr\">left</span>: <span class=\"number\">2</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">style</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">bold</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">fg</span>: <span class=\"string\">'white'</span>,</div><div class=\"line\">    <span class=\"attr\">bg</span>: <span class=\"string\">'green'</span>,</div><div class=\"line\">    <span class=\"attr\">focus</span>: &#123;</div><div class=\"line\">      <span class=\"attr\">inverse</span>: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> reset = blessed.button(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: form,</div><div class=\"line\">  <span class=\"attr\">name</span>: <span class=\"string\">'reset'</span>,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">'Reset'</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">35</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">15</span>,</div><div class=\"line\">  <span class=\"attr\">shrink</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">  <span class=\"attr\">padding</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">top</span>: <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"attr\">right</span>: <span class=\"number\">2</span>,</div><div class=\"line\">    <span class=\"attr\">bottom</span>: <span class=\"number\">1</span>,</div><div class=\"line\">    <span class=\"attr\">left</span>: <span class=\"number\">2</span></div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">style</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">bold</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">fg</span>: <span class=\"string\">'white'</span>,</div><div class=\"line\">    <span class=\"attr\">bg</span>: <span class=\"string\">'red'</span>,</div><div class=\"line\">    <span class=\"attr\">focus</span>: &#123;</div><div class=\"line\">      <span class=\"attr\">inverse</span>: <span class=\"literal\">true</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Info</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> msg = blessed.message(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">40</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"number\">5</span>,</div><div class=\"line\">  <span class=\"attr\">style</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">italic</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">    <span class=\"attr\">fg</span>: <span class=\"string\">'green'</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> table = blessed.table(&#123;</div><div class=\"line\">  <span class=\"attr\">parent</span>: screen,</div><div class=\"line\">  <span class=\"attr\">content</span>: <span class=\"string\">''</span>,</div><div class=\"line\">  <span class=\"attr\">top</span>: <span class=\"number\">40</span>,</div><div class=\"line\">  <span class=\"attr\">left</span>: <span class=\"string\">'center'</span>,</div><div class=\"line\">  <span class=\"attr\">style</span>: &#123;</div><div class=\"line\">    <span class=\"attr\">fg</span>: <span class=\"string\">'green'</span>,</div><div class=\"line\">    <span class=\"attr\">header</span>: &#123;</div><div class=\"line\">      <span class=\"attr\">bold</span>: <span class=\"literal\">true</span>,</div><div class=\"line\">      <span class=\"attr\">fg</span>: <span class=\"string\">'white'</span>,</div><div class=\"line\">      <span class=\"attr\">bg</span>: <span class=\"string\">'blue'</span></div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">hidden</span>: <span class=\"literal\">true</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Event management</span></div><div class=\"line\"></div><div class=\"line\">submit.on(<span class=\"string\">'press'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  form.submit();</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">reset.on(<span class=\"string\">'press'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  form.reset();</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">form.on(<span class=\"string\">'submit'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">data</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> editors = [<span class=\"string\">'Vim'</span>, <span class=\"string\">'Emacs'</span>, <span class=\"string\">'Atom'</span>, <span class=\"string\">'Brackets'</span>].filter(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">item, index</span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> data.editors[index];</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  msg.display(<span class=\"string\">'Form submitted!'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> summary = <span class=\"string\">''</span>;</div><div class=\"line\">    summary += data.firstname + <span class=\"string\">' '</span> + data.lastname + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'------------------------------\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'Favorite editors: '</span> + editors + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'Likes Blessed: '</span> + data.like[<span class=\"number\">0</span>] + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">    summary += <span class=\"string\">'Comments: '</span> + data.comments;</div><div class=\"line\"></div><div class=\"line\">    fs.writeFile(<span class=\"string\">'form-data.txt'</span>, summary, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err;</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">form.on(<span class=\"string\">'reset'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  msg.display(<span class=\"string\">'Form cleared!'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;);</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Key bindings</span></div><div class=\"line\"></div><div class=\"line\">screen.key(<span class=\"string\">'q'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.destroy();</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Render everything!</span></div><div class=\"line\"></div><div class=\"line\">screen.render();</div></pre></td></tr></table></figure>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>Building an advanced TUI may be a long process. Sometimes a raw CLI program is better, but if usability really matters, Blessed can be an interesting option and a good alternative to ncurses.</p>\n<p>By the way, in the use case presented here, there is no validation at all: not in our Bash script, nor in our Blessed script. If you want a good exercise, maybe you can try to implement it…</p>"},{"title":"Scraping a Ghost blog with PhantomJS and SlimerJS using CasperJS","date":"2017-06-03T00:19:49.000Z","thumbnail":"/images/javascript.png","_content":"\nThis blog post will haunt your computer forever. You have been warned! :D\n\nIn this article, we are going to present different techniques to scrape a **Ghost** blog (especially with the default **Casper** theme). We will use **CasperJS**, which is a scripting utility for **PhantomJS** (WebKit headless browser) and **SlimerJS** (Gecko minimalist GUI browser).\n\n<!-- more -->\n\n## Installation\n\n1. [PhantomJS](http://phantomjs.org/download.html): `npm i -g phantomjs-prebuilt`\n2. [SlimerJS](https://slimerjs.org/download.html): `npm i -g slimerjs`\n3. [CasperJS](http://docs.casperjs.org/en/latest/installation.html): `npm i -g casperjs`\n\n## The basics\n\nA regular CasperJS script is composed of **steps** and has the following structure:\n\n```JavaScript\nvar casper = require('casper').create();\n\ncasper.start('http://www.website.com');\n\ncasper.then(function () {\n  // Do something...\n});\n\ncasper.run();\n```\n\n[`Casper.prototype`](http://docs.casperjs.org/en/latest/modules/casper.html#casper-prototype) defines lots of useful methods to interact with webpages and the most powerful one is probably [`evaluate()`](http://docs.casperjs.org/en/latest/modules/casper.html#evaluate) that gives a direct access to the DOM...\n\n## Printing a list of the latest articles to console\n\nOK, so... Let's take my personal blog in French as an example. In the following script (*ghost.js*), we get a list of the latest articles (these ones are displayed on the homepage):\n\n```JavaScript\nvar casper = require('casper').create();\n\n// Tell CasperJS to visit the homepage\ncasper.start('http://blog.badacadabra.net');\n\n// Wait for articles to be loaded\ncasper.waitForSelector('article', function () {\n  this.echo('BLOG TITLE:\\n' + this.getTitle());\n  this.echo('\\nLATEST ARTICLES:');\n\n  // Each title in the \"titles\" array returned by \"evaluate\"...\n  this.each(this.evaluate(function () {\n    var articles = document.querySelectorAll('article'),\n        titles = [];\n\n    for (var i = 0; i < articles.length; i++) {\n      titles.push(articles[i].querySelector('.post-title').textContent);\n    }\n\n    return titles;\n  }), function (self, title) {\n    // ... should be displayed in console!\n    this.echo(title);\n  });\n});\n\ncasper.run();\n```\n\nTo run the script:\n\n- PhantomJS: `casperjs ghost.js`\n- SlimerJS: `casperjs --engine=slimerjs ghost.js`\n\nHere is the output:\n\n```\nBLOG TITLE:\nHocus Pocus Numericus | Blog de Baptiste Vannesson (Badacadabra)\n\nLATEST ARTICLES:\nLes robots ont-ils des droits ?\nStress, anxiété et phobies à l'ère du numérique\nLe règne de l'autodidaxie\nLes limites du transhumanisme\nL'ambiguïté du référencement payant\n```\n\nSo far, so good! But what if we want to get a full list of all articles?\n\n## Printing a list of all published articles to console\n\nAn elegant solution to achieve this goal is to use **recursion**. Our scraper starts on the homepage, tests if there are older posts (using pagination as a reference), and goes from page to page thanks to an IIFE (Immediately-Invoked Function Expression) which calls itself.\n\n```JavaScript\nvar casper = require('casper').create();\n\ncasper.start('http://blog.badacadabra.net');\n\ncasper.then(function () {\n  this.echo('BLOG TITLE:\\n' + this.getTitle());\n  this.echo('\\nLATEST ARTICLES:');\n});\n\n// Recursive IIFE\n(function getPostTitles() {\n  casper.waitForSelector('article', function () {\n    this.each(this.evaluate(function () {\n      var articles = document.querySelectorAll('article'),\n          titles = [];\n\n      for (var i = 0; i < articles.length; i++) {\n        titles.push(articles[i].querySelector('.post-title').textContent);\n      }\n\n      return titles;\n    }), function (self, title) {\n      this.echo(title);\n    });\n  });\n\n  casper.then(function () {\n    // If the link to older posts is present in pagination, ...\n    if (this.visible('.older-posts')) {\n      // ... click it to go to the next page, ...\n      this.click('.older-posts');\n      // ... then run the same operations on this new page\n      getPostTitles();\n    }\n  });\n})();\n\ncasper.run();\n```\n\nCool! Getting lists of headlines is funny, but is it really useful? RSS feed readers already do this for us without efforts. Would it not be more interesting to extract all articles and create appropriate files to store local copies automatically? Let's do this right now!\n\n## Extracting all articles to save local copies in filesystem\n\nExtracting all articles is not so easy without a clear methodology. Our script should:\n\n1. Start on the homepage\n2. Visit the first article\n3. Extract this article\n4. Go back to the homepage\n5. Visit the second article\n6. ...\n7. Go to the next page\n8. Visit the first article of this page\n9. ...\n10. End when the last article from the last page has been extracted\n\nIt would be easy to define an array of predefined URLs, but this is not what we are going to do. This solution is not viable because each new article would not be taken into account by our script. In fact, we have to simulate the behavior of a user who would click each article in sequence to download all blog posts.\n\nHere we will need to interact with the filesystem, so the **fs** module is required. For this script, we keep the recursive IIFE:\n\n```JavaScript\nvar casper = require('casper').create(),\n    fs = require('fs');\n\ncasper.start('http://blog.badacadabra.net');\n\nvar index = 1, // index of the article in the current page\n    content = ''; // textual content of the latest extracted article\n\n(function getPostContent() {\n  // Wait for articles to be loaded\n  casper.waitForSelector('article', function () {\n    // Click the first link (the index starts at 1)\n    this.click('.post:nth-of-type(' + index + ') a');\n  });\n\n  casper.then(function () {\n    // Extract the textual content of the article\n    content = this.evaluate(function () {\n      return document.querySelector('.post').textContent;\n    });\n  });\n\n  casper.then(function () {\n    var title = this.getTitle();\n    this.echo('EXTRACTING - ' + title);\n    // Process the title string to create a decent filename\n    title = title.replace(/[ '\",]/g, '-').toLowerCase();\n    // Write the file to disk\n    fs.write('articles/' + title, content, 'w');\n    // Go back to the homepage\n    this.back();\n  });\n\n  casper.waitForSelector('article', function () {\n    index++;\n    // If there is another article on this page, get its content\n    if (this.visible('.post:nth-of-type(' + index + ')')) {\n      getPostContent();\n    } else { // If not, continue on the next page (if there is one)\n      if (this.visible('.older-posts')) {\n        index = 1;\n        this.click('.older-posts');\n        getPostContent();\n      }\n    }\n  });\n})();\n\ncasper.run();\n```\n\nDone! This script will create a local `articles/` directory containing articles/files with raw textual content.\n\n## Conclusion\n\nCasperJS is a powerful automation library on top of PhantomJS and SlimerJS. Moreover, thanks to a clean HTML code, a Ghost blog is a pleasure to scrape!\n\nIf you want to learn more about these amazing technologies, maybe you can try to scrape articles filtered by author, by tag or by date... This is not very difficult with the code provided here, but this is a good exercise. You may also be interested in the [Ghost API](https://api.ghost.org/v0.1/docs).\n\nSpectres have never been so kind!\n","source":"_posts/Scraping-a-Ghost-blog-with-PhantomJS-and-SlimerJS-using-CasperJS.md","raw":"---\ntitle: Scraping a Ghost blog with PhantomJS and SlimerJS using CasperJS\ndate: 2017-06-03 02:19:49\ncategories:\n  - JavaScript\ntags:\n  - Ghost\n  - PhantomJS\n  - SlimerJS\n  - CasperJS\n  - ES5\nthumbnail: /images/javascript.png\n---\n\nThis blog post will haunt your computer forever. You have been warned! :D\n\nIn this article, we are going to present different techniques to scrape a **Ghost** blog (especially with the default **Casper** theme). We will use **CasperJS**, which is a scripting utility for **PhantomJS** (WebKit headless browser) and **SlimerJS** (Gecko minimalist GUI browser).\n\n<!-- more -->\n\n## Installation\n\n1. [PhantomJS](http://phantomjs.org/download.html): `npm i -g phantomjs-prebuilt`\n2. [SlimerJS](https://slimerjs.org/download.html): `npm i -g slimerjs`\n3. [CasperJS](http://docs.casperjs.org/en/latest/installation.html): `npm i -g casperjs`\n\n## The basics\n\nA regular CasperJS script is composed of **steps** and has the following structure:\n\n```JavaScript\nvar casper = require('casper').create();\n\ncasper.start('http://www.website.com');\n\ncasper.then(function () {\n  // Do something...\n});\n\ncasper.run();\n```\n\n[`Casper.prototype`](http://docs.casperjs.org/en/latest/modules/casper.html#casper-prototype) defines lots of useful methods to interact with webpages and the most powerful one is probably [`evaluate()`](http://docs.casperjs.org/en/latest/modules/casper.html#evaluate) that gives a direct access to the DOM...\n\n## Printing a list of the latest articles to console\n\nOK, so... Let's take my personal blog in French as an example. In the following script (*ghost.js*), we get a list of the latest articles (these ones are displayed on the homepage):\n\n```JavaScript\nvar casper = require('casper').create();\n\n// Tell CasperJS to visit the homepage\ncasper.start('http://blog.badacadabra.net');\n\n// Wait for articles to be loaded\ncasper.waitForSelector('article', function () {\n  this.echo('BLOG TITLE:\\n' + this.getTitle());\n  this.echo('\\nLATEST ARTICLES:');\n\n  // Each title in the \"titles\" array returned by \"evaluate\"...\n  this.each(this.evaluate(function () {\n    var articles = document.querySelectorAll('article'),\n        titles = [];\n\n    for (var i = 0; i < articles.length; i++) {\n      titles.push(articles[i].querySelector('.post-title').textContent);\n    }\n\n    return titles;\n  }), function (self, title) {\n    // ... should be displayed in console!\n    this.echo(title);\n  });\n});\n\ncasper.run();\n```\n\nTo run the script:\n\n- PhantomJS: `casperjs ghost.js`\n- SlimerJS: `casperjs --engine=slimerjs ghost.js`\n\nHere is the output:\n\n```\nBLOG TITLE:\nHocus Pocus Numericus | Blog de Baptiste Vannesson (Badacadabra)\n\nLATEST ARTICLES:\nLes robots ont-ils des droits ?\nStress, anxiété et phobies à l'ère du numérique\nLe règne de l'autodidaxie\nLes limites du transhumanisme\nL'ambiguïté du référencement payant\n```\n\nSo far, so good! But what if we want to get a full list of all articles?\n\n## Printing a list of all published articles to console\n\nAn elegant solution to achieve this goal is to use **recursion**. Our scraper starts on the homepage, tests if there are older posts (using pagination as a reference), and goes from page to page thanks to an IIFE (Immediately-Invoked Function Expression) which calls itself.\n\n```JavaScript\nvar casper = require('casper').create();\n\ncasper.start('http://blog.badacadabra.net');\n\ncasper.then(function () {\n  this.echo('BLOG TITLE:\\n' + this.getTitle());\n  this.echo('\\nLATEST ARTICLES:');\n});\n\n// Recursive IIFE\n(function getPostTitles() {\n  casper.waitForSelector('article', function () {\n    this.each(this.evaluate(function () {\n      var articles = document.querySelectorAll('article'),\n          titles = [];\n\n      for (var i = 0; i < articles.length; i++) {\n        titles.push(articles[i].querySelector('.post-title').textContent);\n      }\n\n      return titles;\n    }), function (self, title) {\n      this.echo(title);\n    });\n  });\n\n  casper.then(function () {\n    // If the link to older posts is present in pagination, ...\n    if (this.visible('.older-posts')) {\n      // ... click it to go to the next page, ...\n      this.click('.older-posts');\n      // ... then run the same operations on this new page\n      getPostTitles();\n    }\n  });\n})();\n\ncasper.run();\n```\n\nCool! Getting lists of headlines is funny, but is it really useful? RSS feed readers already do this for us without efforts. Would it not be more interesting to extract all articles and create appropriate files to store local copies automatically? Let's do this right now!\n\n## Extracting all articles to save local copies in filesystem\n\nExtracting all articles is not so easy without a clear methodology. Our script should:\n\n1. Start on the homepage\n2. Visit the first article\n3. Extract this article\n4. Go back to the homepage\n5. Visit the second article\n6. ...\n7. Go to the next page\n8. Visit the first article of this page\n9. ...\n10. End when the last article from the last page has been extracted\n\nIt would be easy to define an array of predefined URLs, but this is not what we are going to do. This solution is not viable because each new article would not be taken into account by our script. In fact, we have to simulate the behavior of a user who would click each article in sequence to download all blog posts.\n\nHere we will need to interact with the filesystem, so the **fs** module is required. For this script, we keep the recursive IIFE:\n\n```JavaScript\nvar casper = require('casper').create(),\n    fs = require('fs');\n\ncasper.start('http://blog.badacadabra.net');\n\nvar index = 1, // index of the article in the current page\n    content = ''; // textual content of the latest extracted article\n\n(function getPostContent() {\n  // Wait for articles to be loaded\n  casper.waitForSelector('article', function () {\n    // Click the first link (the index starts at 1)\n    this.click('.post:nth-of-type(' + index + ') a');\n  });\n\n  casper.then(function () {\n    // Extract the textual content of the article\n    content = this.evaluate(function () {\n      return document.querySelector('.post').textContent;\n    });\n  });\n\n  casper.then(function () {\n    var title = this.getTitle();\n    this.echo('EXTRACTING - ' + title);\n    // Process the title string to create a decent filename\n    title = title.replace(/[ '\",]/g, '-').toLowerCase();\n    // Write the file to disk\n    fs.write('articles/' + title, content, 'w');\n    // Go back to the homepage\n    this.back();\n  });\n\n  casper.waitForSelector('article', function () {\n    index++;\n    // If there is another article on this page, get its content\n    if (this.visible('.post:nth-of-type(' + index + ')')) {\n      getPostContent();\n    } else { // If not, continue on the next page (if there is one)\n      if (this.visible('.older-posts')) {\n        index = 1;\n        this.click('.older-posts');\n        getPostContent();\n      }\n    }\n  });\n})();\n\ncasper.run();\n```\n\nDone! This script will create a local `articles/` directory containing articles/files with raw textual content.\n\n## Conclusion\n\nCasperJS is a powerful automation library on top of PhantomJS and SlimerJS. Moreover, thanks to a clean HTML code, a Ghost blog is a pleasure to scrape!\n\nIf you want to learn more about these amazing technologies, maybe you can try to scrape articles filtered by author, by tag or by date... This is not very difficult with the code provided here, but this is a good exercise. You may also be interested in the [Ghost API](https://api.ghost.org/v0.1/docs).\n\nSpectres have never been so kind!\n","slug":"Scraping-a-Ghost-blog-with-PhantomJS-and-SlimerJS-using-CasperJS","published":1,"updated":"2017-06-07T00:49:32.763Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3oylqtt0002o3c6prc718r6","content":"<p>This blog post will haunt your computer forever. You have been warned! :D</p>\n<p>In this article, we are going to present different techniques to scrape a <strong>Ghost</strong> blog (especially with the default <strong>Casper</strong> theme). We will use <strong>CasperJS</strong>, which is a scripting utility for <strong>PhantomJS</strong> (WebKit headless browser) and <strong>SlimerJS</strong> (Gecko minimalist GUI browser).</p>\n<a id=\"more\"></a>\n<h2 id=\"Installation\"><a href=\"#Installation\" class=\"headerlink\" title=\"Installation\"></a>Installation</h2><ol>\n<li><a href=\"http://phantomjs.org/download.html\" target=\"_blank\" rel=\"external\">PhantomJS</a>: <code>npm i -g phantomjs-prebuilt</code></li>\n<li><a href=\"https://slimerjs.org/download.html\" target=\"_blank\" rel=\"external\">SlimerJS</a>: <code>npm i -g slimerjs</code></li>\n<li><a href=\"http://docs.casperjs.org/en/latest/installation.html\" target=\"_blank\" rel=\"external\">CasperJS</a>: <code>npm i -g casperjs</code></li>\n</ol>\n<h2 id=\"The-basics\"><a href=\"#The-basics\" class=\"headerlink\" title=\"The basics\"></a>The basics</h2><p>A regular CasperJS script is composed of <strong>steps</strong> and has the following structure:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> casper = <span class=\"built_in\">require</span>(<span class=\"string\">'casper'</span>).create();</div><div class=\"line\"></div><div class=\"line\">casper.start(<span class=\"string\">'http://www.website.com'</span>);</div><div class=\"line\"></div><div class=\"line\">casper.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// Do something...</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">casper.run();</div></pre></td></tr></table></figure>\n<p><a href=\"http://docs.casperjs.org/en/latest/modules/casper.html#casper-prototype\" target=\"_blank\" rel=\"external\"><code>Casper.prototype</code></a> defines lots of useful methods to interact with webpages and the most powerful one is probably <a href=\"http://docs.casperjs.org/en/latest/modules/casper.html#evaluate\" target=\"_blank\" rel=\"external\"><code>evaluate()</code></a> that gives a direct access to the DOM…</p>\n<h2 id=\"Printing-a-list-of-the-latest-articles-to-console\"><a href=\"#Printing-a-list-of-the-latest-articles-to-console\" class=\"headerlink\" title=\"Printing a list of the latest articles to console\"></a>Printing a list of the latest articles to console</h2><p>OK, so… Let’s take my personal blog in French as an example. In the following script (<em>ghost.js</em>), we get a list of the latest articles (these ones are displayed on the homepage):</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> casper = <span class=\"built_in\">require</span>(<span class=\"string\">'casper'</span>).create();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Tell CasperJS to visit the homepage</span></div><div class=\"line\">casper.start(<span class=\"string\">'http://blog.badacadabra.net'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Wait for articles to be loaded</span></div><div class=\"line\">casper.waitForSelector(<span class=\"string\">'article'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.echo(<span class=\"string\">'BLOG TITLE:\\n'</span> + <span class=\"keyword\">this</span>.getTitle());</div><div class=\"line\">  <span class=\"keyword\">this</span>.echo(<span class=\"string\">'\\nLATEST ARTICLES:'</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Each title in the \"titles\" array returned by \"evaluate\"...</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.each(<span class=\"keyword\">this</span>.evaluate(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> articles = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'article'</span>),</div><div class=\"line\">        titles = [];</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; articles.length; i++) &#123;</div><div class=\"line\">      titles.push(articles[i].querySelector(<span class=\"string\">'.post-title'</span>).textContent);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> titles;</div><div class=\"line\">  &#125;), <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">self, title</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// ... should be displayed in console!</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.echo(title);</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">casper.run();</div></pre></td></tr></table></figure>\n<p>To run the script:</p>\n<ul>\n<li>PhantomJS: <code>casperjs ghost.js</code></li>\n<li>SlimerJS: <code>casperjs --engine=slimerjs ghost.js</code></li>\n</ul>\n<p>Here is the output:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">BLOG TITLE:</div><div class=\"line\">Hocus Pocus Numericus | Blog de Baptiste Vannesson (Badacadabra)</div><div class=\"line\"></div><div class=\"line\">LATEST ARTICLES:</div><div class=\"line\">Les robots ont-ils des droits ?</div><div class=\"line\">Stress, anxiété et phobies à l&apos;ère du numérique</div><div class=\"line\">Le règne de l&apos;autodidaxie</div><div class=\"line\">Les limites du transhumanisme</div><div class=\"line\">L&apos;ambiguïté du référencement payant</div></pre></td></tr></table></figure>\n<p>So far, so good! But what if we want to get a full list of all articles?</p>\n<h2 id=\"Printing-a-list-of-all-published-articles-to-console\"><a href=\"#Printing-a-list-of-all-published-articles-to-console\" class=\"headerlink\" title=\"Printing a list of all published articles to console\"></a>Printing a list of all published articles to console</h2><p>An elegant solution to achieve this goal is to use <strong>recursion</strong>. Our scraper starts on the homepage, tests if there are older posts (using pagination as a reference), and goes from page to page thanks to an IIFE (Immediately-Invoked Function Expression) which calls itself.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> casper = <span class=\"built_in\">require</span>(<span class=\"string\">'casper'</span>).create();</div><div class=\"line\"></div><div class=\"line\">casper.start(<span class=\"string\">'http://blog.badacadabra.net'</span>);</div><div class=\"line\"></div><div class=\"line\">casper.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.echo(<span class=\"string\">'BLOG TITLE:\\n'</span> + <span class=\"keyword\">this</span>.getTitle());</div><div class=\"line\">  <span class=\"keyword\">this</span>.echo(<span class=\"string\">'\\nLATEST ARTICLES:'</span>);</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Recursive IIFE</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPostTitles</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  casper.waitForSelector(<span class=\"string\">'article'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.each(<span class=\"keyword\">this</span>.evaluate(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> articles = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'article'</span>),</div><div class=\"line\">          titles = [];</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; articles.length; i++) &#123;</div><div class=\"line\">        titles.push(articles[i].querySelector(<span class=\"string\">'.post-title'</span>).textContent);</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">return</span> titles;</div><div class=\"line\">    &#125;), <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">self, title</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.echo(title);</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  casper.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// If the link to older posts is present in pagination, ...</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.visible(<span class=\"string\">'.older-posts'</span>)) &#123;</div><div class=\"line\">      <span class=\"comment\">// ... click it to go to the next page, ...</span></div><div class=\"line\">      <span class=\"keyword\">this</span>.click(<span class=\"string\">'.older-posts'</span>);</div><div class=\"line\">      <span class=\"comment\">// ... then run the same operations on this new page</span></div><div class=\"line\">      getPostTitles();</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\">casper.run();</div></pre></td></tr></table></figure>\n<p>Cool! Getting lists of headlines is funny, but is it really useful? RSS feed readers already do this for us without efforts. Would it not be more interesting to extract all articles and create appropriate files to store local copies automatically? Let’s do this right now!</p>\n<h2 id=\"Extracting-all-articles-to-save-local-copies-in-filesystem\"><a href=\"#Extracting-all-articles-to-save-local-copies-in-filesystem\" class=\"headerlink\" title=\"Extracting all articles to save local copies in filesystem\"></a>Extracting all articles to save local copies in filesystem</h2><p>Extracting all articles is not so easy without a clear methodology. Our script should:</p>\n<ol>\n<li>Start on the homepage</li>\n<li>Visit the first article</li>\n<li>Extract this article</li>\n<li>Go back to the homepage</li>\n<li>Visit the second article</li>\n<li>…</li>\n<li>Go to the next page</li>\n<li>Visit the first article of this page</li>\n<li>…</li>\n<li>End when the last article from the last page has been extracted</li>\n</ol>\n<p>It would be easy to define an array of predefined URLs, but this is not what we are going to do. This solution is not viable because each new article would not be taken into account by our script. In fact, we have to simulate the behavior of a user who would click each article in sequence to download all blog posts.</p>\n<p>Here we will need to interact with the filesystem, so the <strong>fs</strong> module is required. For this script, we keep the recursive IIFE:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> casper = <span class=\"built_in\">require</span>(<span class=\"string\">'casper'</span>).create(),</div><div class=\"line\">    fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</div><div class=\"line\"></div><div class=\"line\">casper.start(<span class=\"string\">'http://blog.badacadabra.net'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> index = <span class=\"number\">1</span>, <span class=\"comment\">// index of the article in the current page</span></div><div class=\"line\">    content = <span class=\"string\">''</span>; <span class=\"comment\">// textual content of the latest extracted article</span></div><div class=\"line\"></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPostContent</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// Wait for articles to be loaded</span></div><div class=\"line\">  casper.waitForSelector(<span class=\"string\">'article'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// Click the first link (the index starts at 1)</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.click(<span class=\"string\">'.post:nth-of-type('</span> + index + <span class=\"string\">') a'</span>);</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  casper.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// Extract the textual content of the article</span></div><div class=\"line\">    content = <span class=\"keyword\">this</span>.evaluate(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.post'</span>).textContent;</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  casper.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> title = <span class=\"keyword\">this</span>.getTitle();</div><div class=\"line\">    <span class=\"keyword\">this</span>.echo(<span class=\"string\">'EXTRACTING - '</span> + title);</div><div class=\"line\">    <span class=\"comment\">// Process the title string to create a decent filename</span></div><div class=\"line\">    title = title.replace(<span class=\"regexp\">/[ '\",]/g</span>, <span class=\"string\">'-'</span>).toLowerCase();</div><div class=\"line\">    <span class=\"comment\">// Write the file to disk</span></div><div class=\"line\">    fs.write(<span class=\"string\">'articles/'</span> + title, content, <span class=\"string\">'w'</span>);</div><div class=\"line\">    <span class=\"comment\">// Go back to the homepage</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.back();</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  casper.waitForSelector(<span class=\"string\">'article'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    index++;</div><div class=\"line\">    <span class=\"comment\">// If there is another article on this page, get its content</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.visible(<span class=\"string\">'.post:nth-of-type('</span> + index + <span class=\"string\">')'</span>)) &#123;</div><div class=\"line\">      getPostContent();</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123; <span class=\"comment\">// If not, continue on the next page (if there is one)</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.visible(<span class=\"string\">'.older-posts'</span>)) &#123;</div><div class=\"line\">        index = <span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"keyword\">this</span>.click(<span class=\"string\">'.older-posts'</span>);</div><div class=\"line\">        getPostContent();</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\">casper.run();</div></pre></td></tr></table></figure>\n<p>Done! This script will create a local <code>articles/</code> directory containing articles/files with raw textual content.</p>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>CasperJS is a powerful automation library on top of PhantomJS and SlimerJS. Moreover, thanks to a clean HTML code, a Ghost blog is a pleasure to scrape!</p>\n<p>If you want to learn more about these amazing technologies, maybe you can try to scrape articles filtered by author, by tag or by date… This is not very difficult with the code provided here, but this is a good exercise. You may also be interested in the <a href=\"https://api.ghost.org/v0.1/docs\" target=\"_blank\" rel=\"external\">Ghost API</a>.</p>\n<p>Spectres have never been so kind!</p>\n","excerpt":"<p>This blog post will haunt your computer forever. You have been warned! :D</p>\n<p>In this article, we are going to present different techniques to scrape a <strong>Ghost</strong> blog (especially with the default <strong>Casper</strong> theme). We will use <strong>CasperJS</strong>, which is a scripting utility for <strong>PhantomJS</strong> (WebKit headless browser) and <strong>SlimerJS</strong> (Gecko minimalist GUI browser).</p>","more":"<h2 id=\"Installation\"><a href=\"#Installation\" class=\"headerlink\" title=\"Installation\"></a>Installation</h2><ol>\n<li><a href=\"http://phantomjs.org/download.html\">PhantomJS</a>: <code>npm i -g phantomjs-prebuilt</code></li>\n<li><a href=\"https://slimerjs.org/download.html\">SlimerJS</a>: <code>npm i -g slimerjs</code></li>\n<li><a href=\"http://docs.casperjs.org/en/latest/installation.html\">CasperJS</a>: <code>npm i -g casperjs</code></li>\n</ol>\n<h2 id=\"The-basics\"><a href=\"#The-basics\" class=\"headerlink\" title=\"The basics\"></a>The basics</h2><p>A regular CasperJS script is composed of <strong>steps</strong> and has the following structure:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> casper = <span class=\"built_in\">require</span>(<span class=\"string\">'casper'</span>).create();</div><div class=\"line\"></div><div class=\"line\">casper.start(<span class=\"string\">'http://www.website.com'</span>);</div><div class=\"line\"></div><div class=\"line\">casper.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// Do something...</span></div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">casper.run();</div></pre></td></tr></table></figure>\n<p><a href=\"http://docs.casperjs.org/en/latest/modules/casper.html#casper-prototype\"><code>Casper.prototype</code></a> defines lots of useful methods to interact with webpages and the most powerful one is probably <a href=\"http://docs.casperjs.org/en/latest/modules/casper.html#evaluate\"><code>evaluate()</code></a> that gives a direct access to the DOM…</p>\n<h2 id=\"Printing-a-list-of-the-latest-articles-to-console\"><a href=\"#Printing-a-list-of-the-latest-articles-to-console\" class=\"headerlink\" title=\"Printing a list of the latest articles to console\"></a>Printing a list of the latest articles to console</h2><p>OK, so… Let’s take my personal blog in French as an example. In the following script (<em>ghost.js</em>), we get a list of the latest articles (these ones are displayed on the homepage):</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> casper = <span class=\"built_in\">require</span>(<span class=\"string\">'casper'</span>).create();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Tell CasperJS to visit the homepage</span></div><div class=\"line\">casper.start(<span class=\"string\">'http://blog.badacadabra.net'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Wait for articles to be loaded</span></div><div class=\"line\">casper.waitForSelector(<span class=\"string\">'article'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.echo(<span class=\"string\">'BLOG TITLE:\\n'</span> + <span class=\"keyword\">this</span>.getTitle());</div><div class=\"line\">  <span class=\"keyword\">this</span>.echo(<span class=\"string\">'\\nLATEST ARTICLES:'</span>);</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Each title in the \"titles\" array returned by \"evaluate\"...</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.each(<span class=\"keyword\">this</span>.evaluate(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> articles = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'article'</span>),</div><div class=\"line\">        titles = [];</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; articles.length; i++) &#123;</div><div class=\"line\">      titles.push(articles[i].querySelector(<span class=\"string\">'.post-title'</span>).textContent);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> titles;</div><div class=\"line\">  &#125;), <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">self, title</span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// ... should be displayed in console!</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.echo(title);</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\">casper.run();</div></pre></td></tr></table></figure>\n<p>To run the script:</p>\n<ul>\n<li>PhantomJS: <code>casperjs ghost.js</code></li>\n<li>SlimerJS: <code>casperjs --engine=slimerjs ghost.js</code></li>\n</ul>\n<p>Here is the output:</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">BLOG TITLE:</div><div class=\"line\">Hocus Pocus Numericus | Blog de Baptiste Vannesson (Badacadabra)</div><div class=\"line\"></div><div class=\"line\">LATEST ARTICLES:</div><div class=\"line\">Les robots ont-ils des droits ?</div><div class=\"line\">Stress, anxiété et phobies à l&apos;ère du numérique</div><div class=\"line\">Le règne de l&apos;autodidaxie</div><div class=\"line\">Les limites du transhumanisme</div><div class=\"line\">L&apos;ambiguïté du référencement payant</div></pre></td></tr></table></figure>\n<p>So far, so good! But what if we want to get a full list of all articles?</p>\n<h2 id=\"Printing-a-list-of-all-published-articles-to-console\"><a href=\"#Printing-a-list-of-all-published-articles-to-console\" class=\"headerlink\" title=\"Printing a list of all published articles to console\"></a>Printing a list of all published articles to console</h2><p>An elegant solution to achieve this goal is to use <strong>recursion</strong>. Our scraper starts on the homepage, tests if there are older posts (using pagination as a reference), and goes from page to page thanks to an IIFE (Immediately-Invoked Function Expression) which calls itself.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> casper = <span class=\"built_in\">require</span>(<span class=\"string\">'casper'</span>).create();</div><div class=\"line\"></div><div class=\"line\">casper.start(<span class=\"string\">'http://blog.badacadabra.net'</span>);</div><div class=\"line\"></div><div class=\"line\">casper.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.echo(<span class=\"string\">'BLOG TITLE:\\n'</span> + <span class=\"keyword\">this</span>.getTitle());</div><div class=\"line\">  <span class=\"keyword\">this</span>.echo(<span class=\"string\">'\\nLATEST ARTICLES:'</span>);</div><div class=\"line\">&#125;);</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Recursive IIFE</span></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPostTitles</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  casper.waitForSelector(<span class=\"string\">'article'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.each(<span class=\"keyword\">this</span>.evaluate(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">var</span> articles = <span class=\"built_in\">document</span>.querySelectorAll(<span class=\"string\">'article'</span>),</div><div class=\"line\">          titles = [];</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; articles.length; i++) &#123;</div><div class=\"line\">        titles.push(articles[i].querySelector(<span class=\"string\">'.post-title'</span>).textContent);</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      <span class=\"keyword\">return</span> titles;</div><div class=\"line\">    &#125;), <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">self, title</span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">this</span>.echo(title);</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  casper.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// If the link to older posts is present in pagination, ...</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.visible(<span class=\"string\">'.older-posts'</span>)) &#123;</div><div class=\"line\">      <span class=\"comment\">// ... click it to go to the next page, ...</span></div><div class=\"line\">      <span class=\"keyword\">this</span>.click(<span class=\"string\">'.older-posts'</span>);</div><div class=\"line\">      <span class=\"comment\">// ... then run the same operations on this new page</span></div><div class=\"line\">      getPostTitles();</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\">casper.run();</div></pre></td></tr></table></figure>\n<p>Cool! Getting lists of headlines is funny, but is it really useful? RSS feed readers already do this for us without efforts. Would it not be more interesting to extract all articles and create appropriate files to store local copies automatically? Let’s do this right now!</p>\n<h2 id=\"Extracting-all-articles-to-save-local-copies-in-filesystem\"><a href=\"#Extracting-all-articles-to-save-local-copies-in-filesystem\" class=\"headerlink\" title=\"Extracting all articles to save local copies in filesystem\"></a>Extracting all articles to save local copies in filesystem</h2><p>Extracting all articles is not so easy without a clear methodology. Our script should:</p>\n<ol>\n<li>Start on the homepage</li>\n<li>Visit the first article</li>\n<li>Extract this article</li>\n<li>Go back to the homepage</li>\n<li>Visit the second article</li>\n<li>…</li>\n<li>Go to the next page</li>\n<li>Visit the first article of this page</li>\n<li>…</li>\n<li>End when the last article from the last page has been extracted</li>\n</ol>\n<p>It would be easy to define an array of predefined URLs, but this is not what we are going to do. This solution is not viable because each new article would not be taken into account by our script. In fact, we have to simulate the behavior of a user who would click each article in sequence to download all blog posts.</p>\n<p>Here we will need to interact with the filesystem, so the <strong>fs</strong> module is required. For this script, we keep the recursive IIFE:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> casper = <span class=\"built_in\">require</span>(<span class=\"string\">'casper'</span>).create(),</div><div class=\"line\">    fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</div><div class=\"line\"></div><div class=\"line\">casper.start(<span class=\"string\">'http://blog.badacadabra.net'</span>);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> index = <span class=\"number\">1</span>, <span class=\"comment\">// index of the article in the current page</span></div><div class=\"line\">    content = <span class=\"string\">''</span>; <span class=\"comment\">// textual content of the latest extracted article</span></div><div class=\"line\"></div><div class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getPostContent</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// Wait for articles to be loaded</span></div><div class=\"line\">  casper.waitForSelector(<span class=\"string\">'article'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// Click the first link (the index starts at 1)</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.click(<span class=\"string\">'.post:nth-of-type('</span> + index + <span class=\"string\">') a'</span>);</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  casper.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"comment\">// Extract the textual content of the article</span></div><div class=\"line\">    content = <span class=\"keyword\">this</span>.evaluate(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">document</span>.querySelector(<span class=\"string\">'.post'</span>).textContent;</div><div class=\"line\">    &#125;);</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  casper.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> title = <span class=\"keyword\">this</span>.getTitle();</div><div class=\"line\">    <span class=\"keyword\">this</span>.echo(<span class=\"string\">'EXTRACTING - '</span> + title);</div><div class=\"line\">    <span class=\"comment\">// Process the title string to create a decent filename</span></div><div class=\"line\">    title = title.replace(<span class=\"regexp\">/[ '\",]/g</span>, <span class=\"string\">'-'</span>).toLowerCase();</div><div class=\"line\">    <span class=\"comment\">// Write the file to disk</span></div><div class=\"line\">    fs.write(<span class=\"string\">'articles/'</span> + title, content, <span class=\"string\">'w'</span>);</div><div class=\"line\">    <span class=\"comment\">// Go back to the homepage</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.back();</div><div class=\"line\">  &#125;);</div><div class=\"line\"></div><div class=\"line\">  casper.waitForSelector(<span class=\"string\">'article'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    index++;</div><div class=\"line\">    <span class=\"comment\">// If there is another article on this page, get its content</span></div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.visible(<span class=\"string\">'.post:nth-of-type('</span> + index + <span class=\"string\">')'</span>)) &#123;</div><div class=\"line\">      getPostContent();</div><div class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123; <span class=\"comment\">// If not, continue on the next page (if there is one)</span></div><div class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.visible(<span class=\"string\">'.older-posts'</span>)) &#123;</div><div class=\"line\">        index = <span class=\"number\">1</span>;</div><div class=\"line\">        <span class=\"keyword\">this</span>.click(<span class=\"string\">'.older-posts'</span>);</div><div class=\"line\">        getPostContent();</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;);</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\">casper.run();</div></pre></td></tr></table></figure>\n<p>Done! This script will create a local <code>articles/</code> directory containing articles/files with raw textual content.</p>\n<h2 id=\"Conclusion\"><a href=\"#Conclusion\" class=\"headerlink\" title=\"Conclusion\"></a>Conclusion</h2><p>CasperJS is a powerful automation library on top of PhantomJS and SlimerJS. Moreover, thanks to a clean HTML code, a Ghost blog is a pleasure to scrape!</p>\n<p>If you want to learn more about these amazing technologies, maybe you can try to scrape articles filtered by author, by tag or by date… This is not very difficult with the code provided here, but this is a good exercise. You may also be interested in the <a href=\"https://api.ghost.org/v0.1/docs\">Ghost API</a>.</p>\n<p>Spectres have never been so kind!</p>"},{"title":"Understanding JSFuck","date":"2017-05-31T23:36:53.000Z","thumbnail":"/images/javascript.png","_content":"\n*JavaScript: The Good Parts* readers and **Douglas Crockford** fans know that JavaScript subsets matter. Due to the permissive and versatile nature of the language, it is reasonable to select only the most solid stones to build a wall. But hey, why would we need to bother with a full programming language when we just need 6 characters? Here comes [**JSFuck**](http://www.jsfuck.com/) by **Martin Kleppe**...\n\n<!-- more -->\n\n> JSFuck is an esoteric and educational programming style based on the atomic parts of JavaScript. It uses only six different characters to write and execute code.\n\nI know what you think: \"*6 characters? WTF!?*\". Yes, JSFuck allows you to code using `(`, `)`, `[`, `]`, `+` and `!` only. How is this possible?\n\nTo understand what is going on behind JSFuck, we have to explain how JavaScript works with:\n\n- **Type conversion/coercion**\n- **Truthy/falsy values**\n- **Operator precedence/associativity**\n- **Bracket notation**\n\n## Type conversion/coercion\n\n### Explicit type conversion\n\nFor explicit type conversion in JavaScript, **unary operators** like `+` or `!` may be used:\n\n- `+` can convert the operand to a number\n- `!` can convert the operand to a boolean (and \"negates\" it)\n\n```JavaScript\n// MULTIPLE TYPES\n\nvar str = '',\n    nb = 42,\n    bool = true,\n    arr = [],\n    obj = {};\n\nconsole.log(str, typeof str); // \"\" string\nconsole.log(nb, typeof nb); // 42 number\nconsole.log(bool, typeof bool); // true boolean\nconsole.log(arr, Array.isArray(arr)); // [] true\nconsole.log(obj, typeof obj); // {} object\n\n// NUMBERS\n\nvar n_str = +str,\n    n_nb = +nb,\n    n_bool = +bool,\n    n_arr = +arr,\n    n_obj = +obj;\n\nconsole.log(n_str, typeof n_str); // 0 number\nconsole.log(n_nb, typeof n_nb); // 42 number\nconsole.log(n_bool, typeof n_bool); // 1 number\nconsole.log(n_arr, typeof n_arr); // 0 number\nconsole.log(n_obj, typeof n_obj); // NaN number\n\n// BOOLEANS\n\nvar b_str = !str,\n    b_nb = !nb,\n    b_bool = !bool,\n    b_arr = !arr,\n    b_obj = !obj;\n\nconsole.log(b_str, typeof b_str); // true boolean\nconsole.log(b_nb, typeof b_nb); // false boolean\nconsole.log(b_bool, typeof b_bool); // false boolean\nconsole.log(b_arr, typeof b_arr); // false boolean\nconsole.log(b_obj, typeof b_obj); // false boolean\n```\n\n### Implicit type conversion (coercion)\n\nThere would be many things to say about type coercion in JavaScript... However, with JSFuck, we only need to understand why:\n\n- `[]+[]` is an empty string\n- `+[]` is `0`\n- `true+false` = `1`\n\nThese three odd behaviors are linked to the same ambiguity: the `+` operator which can be used for concatenation (in a string context) and for addition/incrementation/conversion (in a numerical context).\n\nIn fact, `Array.prototype.toString()` is called internally during an array-to-primitive conversion, and we know that its output is different from the one given by `Object.prototype.toString()`: it will not return something like `[object Object]`, but a concatenation of all elements in the array with a comma as a separator.\n\n```JavaScript\nvar arr = ['foo', 'bar', 'baz'];\nconsole.log(arr.toString()); // foo,bar,baz\n```\n\nOf course, if the array is empty, `Array.prototype.toString()` returns an empty string. That is why `[]+[]` gives an empty string: this operation is actually no more than a concatenation of empty strings after coercion!\n\nMoreover, when converted to a number, an empty string becomes `0`. `[object Object]` is not an empty string and does not contain numbers, so it becomes `NaN`. Here is what happens (roughly) under the hood:\n\n```JavaScript\nconsole.log([].toString() + [].toString()); // \"\"\nconsole.log([].toString(), +[].toString()); // \"\" 0\nconsole.log({}.toString(), +{}.toString()); // [object Object] NaN\n```\n\nAn operation with `+` where operands are booleans is not evaluated in a string context, but in a numerical context. This means booleans are coerced to numbers. `true` becomes `1` and `false` becomes `0`.\n\n```JavaScript\nconsole.log(false + false); // 0\nconsole.log(true + false); // 1\nconsole.log(true + true); // 2\n```\n\n## Truthy/Falsy values\n\nIn boolean expressions, JavaScript accepts booleans (`true`/`false`), but it also evaluates **truthy** and **falsy** values:\n\n- An object (object literal, array, function, etc.) is always **truthy**\n- `undefined`, `null`, `NaN`, `0` and the empty string are **falsy**\n\n```JavaScript\nfunction truthyOrFalsy(arg) {\n  arg ? console.log('truthy') : console.log('falsy');\n}\n\ntruthyOrFalsy(''); // falsy\ntruthyOrFalsy('str'); // truthy\ntruthyOrFalsy(0); // falsy\ntruthyOrFalsy(1); // truthy\ntruthyOrFalsy([]); // truthy\ntruthyOrFalsy({}); // truthy\n\nconsole.log(!'', !!''); // true false\nconsole.log(!'str', !!'str'); // false true\nconsole.log(!0, !!0); // true false\nconsole.log(!1, !!1); // false true\nconsole.log(![], !![]); // false true\nconsole.log(!{}, !!{}); // false true\n```\n\nObviously, truthy values become `true` when they are converted to booleans with `!!` (double logical NOT or \"NOT NOT\") and falsy values become `false`.\n\n## Operator precedence and associativity\n\nJust like in math, operations must be performed in a specific order, following certain conventions. This order is determined by:\n\n- Operator precedence\n- Operator associativity\n\n### Operator precedence\n\nEach operator has its own priority. For example, we know that multiplication takes priority over addition and that parentheses allow us to override this natural priority.\n\n```JavaScript\nconsole.log(1 + 2 * 3); // 7\nconsole.log((1 + 2) * 3); // 9\n```\n\nLike most programming languages, JavaScript has many operators. The full [reference of operator precedence](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table) is available on MDN.\n\nAn interesting point is that the unary `+` has higher precedence than the binary `+`.\n\n```JavaScript\n// Conversions are performed BEFORE the addition\nconsole.log(+'41' + +true); // 42\n```\n\n### Operator associativity\n\nUnfortunately, operator precedence cannot determine the \"absolute\" order of all operations. An operation can contain several operators that have the same precedence, so we need a clear direction (\"left-to-right\" or \"right-to-left\").\n\nIn math, we know that the order does not really matter to perform an addition:\n\n```JavaScript\nconsole.log(1000 + 300 + 37); // 1337\nconsole.log(300 + 1000 + 37); // 1337\nconsole.log(37 + 300 + 1000); // 1337\n```\n\nBut it is much more problematic with subtraction:\n\n```JavaScript\nconsole.log(100 - 58); // 42\nconsole.log(58 - 100); // -42\n```\n\nAn interesting point is that the unary `+` has \"right-to-left\" associativity, whereas the binary `+` has \"left-to-right\" associativity.\n\nAgain, the full [reference of operator associativity](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table) is available on MDN. We could also bring back the previous example:\n\n```JavaScript\n// Conversions are performed right-to-left\n// The addition is performed left-to-right\nconsole.log(+'41' + +true); // 42\n```\n\n## Bracket notation\n\nIn JavaScript, all objects have **own** and/or **prototype** properties. These properties can be accessed using the **dot** (`.`) notation or the **bracket** notation (`[]`). JSFuck uses bracket notation, which must not be confused with empty arrays...\n\n```JavaScript\nconsole.log({foo: 'Foo'}.foo); // Foo\nconsole.log({foo: 'Foo'}['foo']); // Foo\n\nconsole.log([].length); // 0\nconsole.log([]['length']); // 0\n\nconsole.log(/abc/g.flags); // g\nconsole.log(/abc/g['flags']); // g\n\nconsole.log(function fn() {}.name); // fn\nconsole.log(function fn() {}['name']); // fn\n```\n\n---\n\n## JSFuck basics\n\n[JSFuck](http://www.jsfuck.com/) introduces itself with the following basics:\n\n- **false**       =>  `![]`\n- **true**        =>  `!![]`\n- **undefined**   =>  `[][[]]`\n- **NaN**         =>  `+[![]]`\n- **0**           =>  `+[]`\n- **1**           =>  `+!+[]`\n- **2**           =>  `!+[]+!+[]`\n- **10**          =>  `[+!+[]]+[+[]]`\n- **Array**       =>  `[]`\n- **Number**      =>  `+[]`\n- **String**      =>  `[]+[]`\n- **Boolean**     =>  `![]`\n- **Function**    =>  `[][\"filter\"]`\n- **eval**        =>  `[][\"filter\"][\"constructor\"]( CODE )()`\n- **window**      =>  `[][\"filter\"][\"constructor\"](\"return this\")()`\n\nWith what we know about **type conversion/coercion**, **truthy/falsy values**, **operator precedence/associativity** and **bracket notation**, we can know explain this mess!\n\n### false => `![]`\n\n`[]` is an array. JS arrays are objects and objects are always truthy. So if we negate a truthy value with a logical NOT, it becomes `false`.\n\n### true => `!![]`\n\n`![]` is `false`, but `!![]` is equivalent to `!false`. So it is `true`.\n\n### undefined => `[][[]]`\n\n`[]` is an array. Each array has built-in properties. `length` is a valid one and could be accessed like so: `[][\"length\"]`. In this case, the array is empty and returns `0`.\n\nBut in our case, `[]` or `\"\"` is not a valid property of the array, so `[][[]]` obviously returns `undefined`.\n\n### NaN => `+[![]]`\n\n`![]` is `false`, but `[false]` is truthy (this is an array containing a boolean). `[false].toString()` returns the string `\"false\"` and `+\"false\"` returns `NaN`.\n\n### 0 => `+[]`\n\n`[].toString()` gives an empty string and `+\"\"` gives `0`.\n\n### 1 => `+!+[]`\n\n`+[]` gives `0`. `0` is falsy, so `!0` gives `true`. `+true` gives `1`.\n\n### 2 => `!+[]+!+[]`\n\n`!+[]` is `true` because `+[]` is `0` and `0` is falsy (`!0` is `true`). `true+true` = `2` because booleans are coerced to numbers when evaluated in a numerical context (`+false` is `0` and `+true` is `1`).\n\n### 10 => `[+!+[]]+[+[]]`\n\n**Left part:** `+!+[]` = `1`, so `[+!+[]]` = `[1]`.\n**Right part:** `+[]` = `0`, so `[+[]]` = `[0]`.\n\n**Concatenation:**\n`[1]+[0]` is equivalent to `[1].toString() + [0].toString()` and returns `\"10\"`.\n\n### Array => `[]`\n\nAn array literal (better alternative to `new Array()`). `Array.isArray([])` = `true`.\n\n### Number => `+[]`\n\n`+[] = 0` and `typeof +[]` = `number`.\n\n### String => `[]+[]`\n\n`[]+[]` is equivalent to `[].toString() + [].toString()`. It is actually a concatenation of empty strings and the result is an empty string.\n\n### Boolean => `![]`\n\n`[]` is truthy, `![]` is `false`.\n\n### Function => `[][\"filter\"]`\n\n`[]` is an array (instance of `Array`) and has access to `Array.prototype` methods. We can then access `Array.prototype.filter` (which is a function) using bracket notation.\n\n### eval => `[][\"filter\"][\"constructor\"]( CODE )()`\n\n`[][\"filter\"]` is a function. In JavaScript, each function is an instance of `Function` and has access to `Function.prototype` properties. `Function.prototype.constructor` is one of these properties (this one is actually a reference to `Function`). Thus, `[][\"filter\"][\"constructor\"]` is an equivalent of `Function`. With or without `new`, `Function()` returns a new function. We could then make a simple addition like so:\n\n```JavaScript\nFunction('a', 'b', 'return a + b')(3, 7) // returns 10\n```\n\n### window => `[][\"filter\"][\"constructor\"](\"return this\")()`\n\n`[][\"filter\"][\"constructor\"]` is `Function`. When the code is not in *strict mode*, `this` is generally `window` in regular functions. Here is an example:\n\n```JavaScript\nfunction foo() {\n  console.log(this); // window\n}\n\nfoo();\n```\nFor the record, this result would be `undefined` in strict mode:\n\n```JavaScript\nfunction foo() {\n  'use strict';\n  console.log(this); // undefined\n}\n\nfoo();\n```\n\nIt could also be written like this:\n\n```JavaScript\n[][\"filter\"][\"constructor\"](\"'use strict'; console.log(this);\")()\n```\n\n---\n\n## Challenge\n\nTry to decrypt the following code. Don't cheat, if you can... :P\n\n```JavaScript\n(!![]+[])[!+[]+!+[]+!+[]]+([][[]]+[])[+!+[]]+([][[]]+[])[!+[]+!+[]]\n```\n\n### Hints\n\n- Identify the main operands\n- Break it into small pieces\n- The result is a string\n\nGood luck!\n\n### Solution\n\n```\n(!![]+[]) => (true+[]) => (\"true\"+\"\") => (\"true\") => \"true\"\n[!+[]+!+[]+!+[]] => [!0+!0+!0] => [true+true+true] => [1+1+1] => [3]\n\n+\n\n([][[]]+[]) => (undefined+[]) => (\"undefined\"+\"\") => \"undefined\"\n[+!+[]] => [+!0] => [+true] => [1]\n\n+\n\n([][[]]+[]) => (undefined+[]) => (\"undefined\"+\"\") => \"undefined\"\n[!+[]+!+[]] => [!0+!0] => [true+true] => [1+1] => [2]\n\n= \"true\"[3]+\"undefined\"[1]+\"undefined\"[2]\n= \"e\"+\"n\"+\"d\"\n= \"end\"\n```\n","source":"_posts/Understanding-JSFuck.md","raw":"---\ntitle: Understanding JSFuck\ndate: 2017-06-01 01:36:53\ncategories:\n- JavaScript\ntags:\n- JSFuck\n- ES5\nthumbnail: /images/javascript.png\n---\n\n*JavaScript: The Good Parts* readers and **Douglas Crockford** fans know that JavaScript subsets matter. Due to the permissive and versatile nature of the language, it is reasonable to select only the most solid stones to build a wall. But hey, why would we need to bother with a full programming language when we just need 6 characters? Here comes [**JSFuck**](http://www.jsfuck.com/) by **Martin Kleppe**...\n\n<!-- more -->\n\n> JSFuck is an esoteric and educational programming style based on the atomic parts of JavaScript. It uses only six different characters to write and execute code.\n\nI know what you think: \"*6 characters? WTF!?*\". Yes, JSFuck allows you to code using `(`, `)`, `[`, `]`, `+` and `!` only. How is this possible?\n\nTo understand what is going on behind JSFuck, we have to explain how JavaScript works with:\n\n- **Type conversion/coercion**\n- **Truthy/falsy values**\n- **Operator precedence/associativity**\n- **Bracket notation**\n\n## Type conversion/coercion\n\n### Explicit type conversion\n\nFor explicit type conversion in JavaScript, **unary operators** like `+` or `!` may be used:\n\n- `+` can convert the operand to a number\n- `!` can convert the operand to a boolean (and \"negates\" it)\n\n```JavaScript\n// MULTIPLE TYPES\n\nvar str = '',\n    nb = 42,\n    bool = true,\n    arr = [],\n    obj = {};\n\nconsole.log(str, typeof str); // \"\" string\nconsole.log(nb, typeof nb); // 42 number\nconsole.log(bool, typeof bool); // true boolean\nconsole.log(arr, Array.isArray(arr)); // [] true\nconsole.log(obj, typeof obj); // {} object\n\n// NUMBERS\n\nvar n_str = +str,\n    n_nb = +nb,\n    n_bool = +bool,\n    n_arr = +arr,\n    n_obj = +obj;\n\nconsole.log(n_str, typeof n_str); // 0 number\nconsole.log(n_nb, typeof n_nb); // 42 number\nconsole.log(n_bool, typeof n_bool); // 1 number\nconsole.log(n_arr, typeof n_arr); // 0 number\nconsole.log(n_obj, typeof n_obj); // NaN number\n\n// BOOLEANS\n\nvar b_str = !str,\n    b_nb = !nb,\n    b_bool = !bool,\n    b_arr = !arr,\n    b_obj = !obj;\n\nconsole.log(b_str, typeof b_str); // true boolean\nconsole.log(b_nb, typeof b_nb); // false boolean\nconsole.log(b_bool, typeof b_bool); // false boolean\nconsole.log(b_arr, typeof b_arr); // false boolean\nconsole.log(b_obj, typeof b_obj); // false boolean\n```\n\n### Implicit type conversion (coercion)\n\nThere would be many things to say about type coercion in JavaScript... However, with JSFuck, we only need to understand why:\n\n- `[]+[]` is an empty string\n- `+[]` is `0`\n- `true+false` = `1`\n\nThese three odd behaviors are linked to the same ambiguity: the `+` operator which can be used for concatenation (in a string context) and for addition/incrementation/conversion (in a numerical context).\n\nIn fact, `Array.prototype.toString()` is called internally during an array-to-primitive conversion, and we know that its output is different from the one given by `Object.prototype.toString()`: it will not return something like `[object Object]`, but a concatenation of all elements in the array with a comma as a separator.\n\n```JavaScript\nvar arr = ['foo', 'bar', 'baz'];\nconsole.log(arr.toString()); // foo,bar,baz\n```\n\nOf course, if the array is empty, `Array.prototype.toString()` returns an empty string. That is why `[]+[]` gives an empty string: this operation is actually no more than a concatenation of empty strings after coercion!\n\nMoreover, when converted to a number, an empty string becomes `0`. `[object Object]` is not an empty string and does not contain numbers, so it becomes `NaN`. Here is what happens (roughly) under the hood:\n\n```JavaScript\nconsole.log([].toString() + [].toString()); // \"\"\nconsole.log([].toString(), +[].toString()); // \"\" 0\nconsole.log({}.toString(), +{}.toString()); // [object Object] NaN\n```\n\nAn operation with `+` where operands are booleans is not evaluated in a string context, but in a numerical context. This means booleans are coerced to numbers. `true` becomes `1` and `false` becomes `0`.\n\n```JavaScript\nconsole.log(false + false); // 0\nconsole.log(true + false); // 1\nconsole.log(true + true); // 2\n```\n\n## Truthy/Falsy values\n\nIn boolean expressions, JavaScript accepts booleans (`true`/`false`), but it also evaluates **truthy** and **falsy** values:\n\n- An object (object literal, array, function, etc.) is always **truthy**\n- `undefined`, `null`, `NaN`, `0` and the empty string are **falsy**\n\n```JavaScript\nfunction truthyOrFalsy(arg) {\n  arg ? console.log('truthy') : console.log('falsy');\n}\n\ntruthyOrFalsy(''); // falsy\ntruthyOrFalsy('str'); // truthy\ntruthyOrFalsy(0); // falsy\ntruthyOrFalsy(1); // truthy\ntruthyOrFalsy([]); // truthy\ntruthyOrFalsy({}); // truthy\n\nconsole.log(!'', !!''); // true false\nconsole.log(!'str', !!'str'); // false true\nconsole.log(!0, !!0); // true false\nconsole.log(!1, !!1); // false true\nconsole.log(![], !![]); // false true\nconsole.log(!{}, !!{}); // false true\n```\n\nObviously, truthy values become `true` when they are converted to booleans with `!!` (double logical NOT or \"NOT NOT\") and falsy values become `false`.\n\n## Operator precedence and associativity\n\nJust like in math, operations must be performed in a specific order, following certain conventions. This order is determined by:\n\n- Operator precedence\n- Operator associativity\n\n### Operator precedence\n\nEach operator has its own priority. For example, we know that multiplication takes priority over addition and that parentheses allow us to override this natural priority.\n\n```JavaScript\nconsole.log(1 + 2 * 3); // 7\nconsole.log((1 + 2) * 3); // 9\n```\n\nLike most programming languages, JavaScript has many operators. The full [reference of operator precedence](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table) is available on MDN.\n\nAn interesting point is that the unary `+` has higher precedence than the binary `+`.\n\n```JavaScript\n// Conversions are performed BEFORE the addition\nconsole.log(+'41' + +true); // 42\n```\n\n### Operator associativity\n\nUnfortunately, operator precedence cannot determine the \"absolute\" order of all operations. An operation can contain several operators that have the same precedence, so we need a clear direction (\"left-to-right\" or \"right-to-left\").\n\nIn math, we know that the order does not really matter to perform an addition:\n\n```JavaScript\nconsole.log(1000 + 300 + 37); // 1337\nconsole.log(300 + 1000 + 37); // 1337\nconsole.log(37 + 300 + 1000); // 1337\n```\n\nBut it is much more problematic with subtraction:\n\n```JavaScript\nconsole.log(100 - 58); // 42\nconsole.log(58 - 100); // -42\n```\n\nAn interesting point is that the unary `+` has \"right-to-left\" associativity, whereas the binary `+` has \"left-to-right\" associativity.\n\nAgain, the full [reference of operator associativity](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table) is available on MDN. We could also bring back the previous example:\n\n```JavaScript\n// Conversions are performed right-to-left\n// The addition is performed left-to-right\nconsole.log(+'41' + +true); // 42\n```\n\n## Bracket notation\n\nIn JavaScript, all objects have **own** and/or **prototype** properties. These properties can be accessed using the **dot** (`.`) notation or the **bracket** notation (`[]`). JSFuck uses bracket notation, which must not be confused with empty arrays...\n\n```JavaScript\nconsole.log({foo: 'Foo'}.foo); // Foo\nconsole.log({foo: 'Foo'}['foo']); // Foo\n\nconsole.log([].length); // 0\nconsole.log([]['length']); // 0\n\nconsole.log(/abc/g.flags); // g\nconsole.log(/abc/g['flags']); // g\n\nconsole.log(function fn() {}.name); // fn\nconsole.log(function fn() {}['name']); // fn\n```\n\n---\n\n## JSFuck basics\n\n[JSFuck](http://www.jsfuck.com/) introduces itself with the following basics:\n\n- **false**       =>  `![]`\n- **true**        =>  `!![]`\n- **undefined**   =>  `[][[]]`\n- **NaN**         =>  `+[![]]`\n- **0**           =>  `+[]`\n- **1**           =>  `+!+[]`\n- **2**           =>  `!+[]+!+[]`\n- **10**          =>  `[+!+[]]+[+[]]`\n- **Array**       =>  `[]`\n- **Number**      =>  `+[]`\n- **String**      =>  `[]+[]`\n- **Boolean**     =>  `![]`\n- **Function**    =>  `[][\"filter\"]`\n- **eval**        =>  `[][\"filter\"][\"constructor\"]( CODE )()`\n- **window**      =>  `[][\"filter\"][\"constructor\"](\"return this\")()`\n\nWith what we know about **type conversion/coercion**, **truthy/falsy values**, **operator precedence/associativity** and **bracket notation**, we can know explain this mess!\n\n### false => `![]`\n\n`[]` is an array. JS arrays are objects and objects are always truthy. So if we negate a truthy value with a logical NOT, it becomes `false`.\n\n### true => `!![]`\n\n`![]` is `false`, but `!![]` is equivalent to `!false`. So it is `true`.\n\n### undefined => `[][[]]`\n\n`[]` is an array. Each array has built-in properties. `length` is a valid one and could be accessed like so: `[][\"length\"]`. In this case, the array is empty and returns `0`.\n\nBut in our case, `[]` or `\"\"` is not a valid property of the array, so `[][[]]` obviously returns `undefined`.\n\n### NaN => `+[![]]`\n\n`![]` is `false`, but `[false]` is truthy (this is an array containing a boolean). `[false].toString()` returns the string `\"false\"` and `+\"false\"` returns `NaN`.\n\n### 0 => `+[]`\n\n`[].toString()` gives an empty string and `+\"\"` gives `0`.\n\n### 1 => `+!+[]`\n\n`+[]` gives `0`. `0` is falsy, so `!0` gives `true`. `+true` gives `1`.\n\n### 2 => `!+[]+!+[]`\n\n`!+[]` is `true` because `+[]` is `0` and `0` is falsy (`!0` is `true`). `true+true` = `2` because booleans are coerced to numbers when evaluated in a numerical context (`+false` is `0` and `+true` is `1`).\n\n### 10 => `[+!+[]]+[+[]]`\n\n**Left part:** `+!+[]` = `1`, so `[+!+[]]` = `[1]`.\n**Right part:** `+[]` = `0`, so `[+[]]` = `[0]`.\n\n**Concatenation:**\n`[1]+[0]` is equivalent to `[1].toString() + [0].toString()` and returns `\"10\"`.\n\n### Array => `[]`\n\nAn array literal (better alternative to `new Array()`). `Array.isArray([])` = `true`.\n\n### Number => `+[]`\n\n`+[] = 0` and `typeof +[]` = `number`.\n\n### String => `[]+[]`\n\n`[]+[]` is equivalent to `[].toString() + [].toString()`. It is actually a concatenation of empty strings and the result is an empty string.\n\n### Boolean => `![]`\n\n`[]` is truthy, `![]` is `false`.\n\n### Function => `[][\"filter\"]`\n\n`[]` is an array (instance of `Array`) and has access to `Array.prototype` methods. We can then access `Array.prototype.filter` (which is a function) using bracket notation.\n\n### eval => `[][\"filter\"][\"constructor\"]( CODE )()`\n\n`[][\"filter\"]` is a function. In JavaScript, each function is an instance of `Function` and has access to `Function.prototype` properties. `Function.prototype.constructor` is one of these properties (this one is actually a reference to `Function`). Thus, `[][\"filter\"][\"constructor\"]` is an equivalent of `Function`. With or without `new`, `Function()` returns a new function. We could then make a simple addition like so:\n\n```JavaScript\nFunction('a', 'b', 'return a + b')(3, 7) // returns 10\n```\n\n### window => `[][\"filter\"][\"constructor\"](\"return this\")()`\n\n`[][\"filter\"][\"constructor\"]` is `Function`. When the code is not in *strict mode*, `this` is generally `window` in regular functions. Here is an example:\n\n```JavaScript\nfunction foo() {\n  console.log(this); // window\n}\n\nfoo();\n```\nFor the record, this result would be `undefined` in strict mode:\n\n```JavaScript\nfunction foo() {\n  'use strict';\n  console.log(this); // undefined\n}\n\nfoo();\n```\n\nIt could also be written like this:\n\n```JavaScript\n[][\"filter\"][\"constructor\"](\"'use strict'; console.log(this);\")()\n```\n\n---\n\n## Challenge\n\nTry to decrypt the following code. Don't cheat, if you can... :P\n\n```JavaScript\n(!![]+[])[!+[]+!+[]+!+[]]+([][[]]+[])[+!+[]]+([][[]]+[])[!+[]+!+[]]\n```\n\n### Hints\n\n- Identify the main operands\n- Break it into small pieces\n- The result is a string\n\nGood luck!\n\n### Solution\n\n```\n(!![]+[]) => (true+[]) => (\"true\"+\"\") => (\"true\") => \"true\"\n[!+[]+!+[]+!+[]] => [!0+!0+!0] => [true+true+true] => [1+1+1] => [3]\n\n+\n\n([][[]]+[]) => (undefined+[]) => (\"undefined\"+\"\") => \"undefined\"\n[+!+[]] => [+!0] => [+true] => [1]\n\n+\n\n([][[]]+[]) => (undefined+[]) => (\"undefined\"+\"\") => \"undefined\"\n[!+[]+!+[]] => [!0+!0] => [true+true] => [1+1] => [2]\n\n= \"true\"[3]+\"undefined\"[1]+\"undefined\"[2]\n= \"e\"+\"n\"+\"d\"\n= \"end\"\n```\n","slug":"Understanding-JSFuck","published":1,"updated":"2017-06-07T00:49:01.157Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj3oylqtz0005o3c6cqx2b9a8","content":"<p><em>JavaScript: The Good Parts</em> readers and <strong>Douglas Crockford</strong> fans know that JavaScript subsets matter. Due to the permissive and versatile nature of the language, it is reasonable to select only the most solid stones to build a wall. But hey, why would we need to bother with a full programming language when we just need 6 characters? Here comes <a href=\"http://www.jsfuck.com/\" target=\"_blank\" rel=\"external\"><strong>JSFuck</strong></a> by <strong>Martin Kleppe</strong>…</p>\n<a id=\"more\"></a>\n<blockquote>\n<p>JSFuck is an esoteric and educational programming style based on the atomic parts of JavaScript. It uses only six different characters to write and execute code.</p>\n</blockquote>\n<p>I know what you think: “<em>6 characters? WTF!?</em>“. Yes, JSFuck allows you to code using <code>(</code>, <code>)</code>, <code>[</code>, <code>]</code>, <code>+</code> and <code>!</code> only. How is this possible?</p>\n<p>To understand what is going on behind JSFuck, we have to explain how JavaScript works with:</p>\n<ul>\n<li><strong>Type conversion/coercion</strong></li>\n<li><strong>Truthy/falsy values</strong></li>\n<li><strong>Operator precedence/associativity</strong></li>\n<li><strong>Bracket notation</strong></li>\n</ul>\n<h2 id=\"Type-conversion-coercion\"><a href=\"#Type-conversion-coercion\" class=\"headerlink\" title=\"Type conversion/coercion\"></a>Type conversion/coercion</h2><h3 id=\"Explicit-type-conversion\"><a href=\"#Explicit-type-conversion\" class=\"headerlink\" title=\"Explicit type conversion\"></a>Explicit type conversion</h3><p>For explicit type conversion in JavaScript, <strong>unary operators</strong> like <code>+</code> or <code>!</code> may be used:</p>\n<ul>\n<li><code>+</code> can convert the operand to a number</li>\n<li><code>!</code> can convert the operand to a boolean (and “negates” it)</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// MULTIPLE TYPES</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"string\">''</span>,</div><div class=\"line\">    nb = <span class=\"number\">42</span>,</div><div class=\"line\">    bool = <span class=\"literal\">true</span>,</div><div class=\"line\">    arr = [],</div><div class=\"line\">    obj = &#123;&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(str, <span class=\"keyword\">typeof</span> str); <span class=\"comment\">// \"\" string</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(nb, <span class=\"keyword\">typeof</span> nb); <span class=\"comment\">// 42 number</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(bool, <span class=\"keyword\">typeof</span> bool); <span class=\"comment\">// true boolean</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(arr, <span class=\"built_in\">Array</span>.isArray(arr)); <span class=\"comment\">// [] true</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj, <span class=\"keyword\">typeof</span> obj); <span class=\"comment\">// &#123;&#125; object</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// NUMBERS</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> n_str = +str,</div><div class=\"line\">    n_nb = +nb,</div><div class=\"line\">    n_bool = +bool,</div><div class=\"line\">    n_arr = +arr,</div><div class=\"line\">    n_obj = +obj;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(n_str, <span class=\"keyword\">typeof</span> n_str); <span class=\"comment\">// 0 number</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(n_nb, <span class=\"keyword\">typeof</span> n_nb); <span class=\"comment\">// 42 number</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(n_bool, <span class=\"keyword\">typeof</span> n_bool); <span class=\"comment\">// 1 number</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(n_arr, <span class=\"keyword\">typeof</span> n_arr); <span class=\"comment\">// 0 number</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(n_obj, <span class=\"keyword\">typeof</span> n_obj); <span class=\"comment\">// NaN number</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// BOOLEANS</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> b_str = !str,</div><div class=\"line\">    b_nb = !nb,</div><div class=\"line\">    b_bool = !bool,</div><div class=\"line\">    b_arr = !arr,</div><div class=\"line\">    b_obj = !obj;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(b_str, <span class=\"keyword\">typeof</span> b_str); <span class=\"comment\">// true boolean</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(b_nb, <span class=\"keyword\">typeof</span> b_nb); <span class=\"comment\">// false boolean</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(b_bool, <span class=\"keyword\">typeof</span> b_bool); <span class=\"comment\">// false boolean</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(b_arr, <span class=\"keyword\">typeof</span> b_arr); <span class=\"comment\">// false boolean</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(b_obj, <span class=\"keyword\">typeof</span> b_obj); <span class=\"comment\">// false boolean</span></div></pre></td></tr></table></figure>\n<h3 id=\"Implicit-type-conversion-coercion\"><a href=\"#Implicit-type-conversion-coercion\" class=\"headerlink\" title=\"Implicit type conversion (coercion)\"></a>Implicit type conversion (coercion)</h3><p>There would be many things to say about type coercion in JavaScript… However, with JSFuck, we only need to understand why:</p>\n<ul>\n<li><code>[]+[]</code> is an empty string</li>\n<li><code>+[]</code> is <code>0</code></li>\n<li><code>true+false</code> = <code>1</code></li>\n</ul>\n<p>These three odd behaviors are linked to the same ambiguity: the <code>+</code> operator which can be used for concatenation (in a string context) and for addition/incrementation/conversion (in a numerical context).</p>\n<p>In fact, <code>Array.prototype.toString()</code> is called internally during an array-to-primitive conversion, and we know that its output is different from the one given by <code>Object.prototype.toString()</code>: it will not return something like <code>[object Object]</code>, but a concatenation of all elements in the array with a comma as a separator.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"string\">'foo'</span>, <span class=\"string\">'bar'</span>, <span class=\"string\">'baz'</span>];</div><div class=\"line\"><span class=\"built_in\">console</span>.log(arr.toString()); <span class=\"comment\">// foo,bar,baz</span></div></pre></td></tr></table></figure>\n<p>Of course, if the array is empty, <code>Array.prototype.toString()</code> returns an empty string. That is why <code>[]+[]</code> gives an empty string: this operation is actually no more than a concatenation of empty strings after coercion!</p>\n<p>Moreover, when converted to a number, an empty string becomes <code>0</code>. <code>[object Object]</code> is not an empty string and does not contain numbers, so it becomes <code>NaN</code>. Here is what happens (roughly) under the hood:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log([].toString() + [].toString()); <span class=\"comment\">// \"\"</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log([].toString(), +[].toString()); <span class=\"comment\">// \"\" 0</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(&#123;&#125;.toString(), +&#123;&#125;.toString()); <span class=\"comment\">// [object Object] NaN</span></div></pre></td></tr></table></figure>\n<p>An operation with <code>+</code> where operands are booleans is not evaluated in a string context, but in a numerical context. This means booleans are coerced to numbers. <code>true</code> becomes <code>1</code> and <code>false</code> becomes <code>0</code>.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">false</span> + <span class=\"literal\">false</span>); <span class=\"comment\">// 0</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">true</span> + <span class=\"literal\">false</span>); <span class=\"comment\">// 1</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">true</span> + <span class=\"literal\">true</span>); <span class=\"comment\">// 2</span></div></pre></td></tr></table></figure>\n<h2 id=\"Truthy-Falsy-values\"><a href=\"#Truthy-Falsy-values\" class=\"headerlink\" title=\"Truthy/Falsy values\"></a>Truthy/Falsy values</h2><p>In boolean expressions, JavaScript accepts booleans (<code>true</code>/<code>false</code>), but it also evaluates <strong>truthy</strong> and <strong>falsy</strong> values:</p>\n<ul>\n<li>An object (object literal, array, function, etc.) is always <strong>truthy</strong></li>\n<li><code>undefined</code>, <code>null</code>, <code>NaN</code>, <code>0</code> and the empty string are <strong>falsy</strong></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">truthyOrFalsy</span>(<span class=\"params\">arg</span>) </span>&#123;</div><div class=\"line\">  arg ? <span class=\"built_in\">console</span>.log(<span class=\"string\">'truthy'</span>) : <span class=\"built_in\">console</span>.log(<span class=\"string\">'falsy'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">truthyOrFalsy(<span class=\"string\">''</span>); <span class=\"comment\">// falsy</span></div><div class=\"line\">truthyOrFalsy(<span class=\"string\">'str'</span>); <span class=\"comment\">// truthy</span></div><div class=\"line\">truthyOrFalsy(<span class=\"number\">0</span>); <span class=\"comment\">// falsy</span></div><div class=\"line\">truthyOrFalsy(<span class=\"number\">1</span>); <span class=\"comment\">// truthy</span></div><div class=\"line\">truthyOrFalsy([]); <span class=\"comment\">// truthy</span></div><div class=\"line\">truthyOrFalsy(&#123;&#125;); <span class=\"comment\">// truthy</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(!<span class=\"string\">''</span>, !!<span class=\"string\">''</span>); <span class=\"comment\">// true false</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(!<span class=\"string\">'str'</span>, !!<span class=\"string\">'str'</span>); <span class=\"comment\">// false true</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(!<span class=\"number\">0</span>, !!<span class=\"number\">0</span>); <span class=\"comment\">// true false</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(!<span class=\"number\">1</span>, !!<span class=\"number\">1</span>); <span class=\"comment\">// false true</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(![], !![]); <span class=\"comment\">// false true</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(!&#123;&#125;, !!&#123;&#125;); <span class=\"comment\">// false true</span></div></pre></td></tr></table></figure>\n<p>Obviously, truthy values become <code>true</code> when they are converted to booleans with <code>!!</code> (double logical NOT or “NOT NOT”) and falsy values become <code>false</code>.</p>\n<h2 id=\"Operator-precedence-and-associativity\"><a href=\"#Operator-precedence-and-associativity\" class=\"headerlink\" title=\"Operator precedence and associativity\"></a>Operator precedence and associativity</h2><p>Just like in math, operations must be performed in a specific order, following certain conventions. This order is determined by:</p>\n<ul>\n<li>Operator precedence</li>\n<li>Operator associativity</li>\n</ul>\n<h3 id=\"Operator-precedence\"><a href=\"#Operator-precedence\" class=\"headerlink\" title=\"Operator precedence\"></a>Operator precedence</h3><p>Each operator has its own priority. For example, we know that multiplication takes priority over addition and that parentheses allow us to override this natural priority.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">1</span> + <span class=\"number\">2</span> * <span class=\"number\">3</span>); <span class=\"comment\">// 7</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log((<span class=\"number\">1</span> + <span class=\"number\">2</span>) * <span class=\"number\">3</span>); <span class=\"comment\">// 9</span></div></pre></td></tr></table></figure>\n<p>Like most programming languages, JavaScript has many operators. The full <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table\" target=\"_blank\" rel=\"external\">reference of operator precedence</a> is available on MDN.</p>\n<p>An interesting point is that the unary <code>+</code> has higher precedence than the binary <code>+</code>.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Conversions are performed BEFORE the addition</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(+<span class=\"string\">'41'</span> + +<span class=\"literal\">true</span>); <span class=\"comment\">// 42</span></div></pre></td></tr></table></figure>\n<h3 id=\"Operator-associativity\"><a href=\"#Operator-associativity\" class=\"headerlink\" title=\"Operator associativity\"></a>Operator associativity</h3><p>Unfortunately, operator precedence cannot determine the “absolute” order of all operations. An operation can contain several operators that have the same precedence, so we need a clear direction (“left-to-right” or “right-to-left”).</p>\n<p>In math, we know that the order does not really matter to perform an addition:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">1000</span> + <span class=\"number\">300</span> + <span class=\"number\">37</span>); <span class=\"comment\">// 1337</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">300</span> + <span class=\"number\">1000</span> + <span class=\"number\">37</span>); <span class=\"comment\">// 1337</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">37</span> + <span class=\"number\">300</span> + <span class=\"number\">1000</span>); <span class=\"comment\">// 1337</span></div></pre></td></tr></table></figure>\n<p>But it is much more problematic with subtraction:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">100</span> - <span class=\"number\">58</span>); <span class=\"comment\">// 42</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">58</span> - <span class=\"number\">100</span>); <span class=\"comment\">// -42</span></div></pre></td></tr></table></figure>\n<p>An interesting point is that the unary <code>+</code> has “right-to-left” associativity, whereas the binary <code>+</code> has “left-to-right” associativity.</p>\n<p>Again, the full <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table\" target=\"_blank\" rel=\"external\">reference of operator associativity</a> is available on MDN. We could also bring back the previous example:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Conversions are performed right-to-left</span></div><div class=\"line\"><span class=\"comment\">// The addition is performed left-to-right</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(+<span class=\"string\">'41'</span> + +<span class=\"literal\">true</span>); <span class=\"comment\">// 42</span></div></pre></td></tr></table></figure>\n<h2 id=\"Bracket-notation\"><a href=\"#Bracket-notation\" class=\"headerlink\" title=\"Bracket notation\"></a>Bracket notation</h2><p>In JavaScript, all objects have <strong>own</strong> and/or <strong>prototype</strong> properties. These properties can be accessed using the <strong>dot</strong> (<code>.</code>) notation or the <strong>bracket</strong> notation (<code>[]</code>). JSFuck uses bracket notation, which must not be confused with empty arrays…</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(&#123;<span class=\"attr\">foo</span>: <span class=\"string\">'Foo'</span>&#125;.foo); <span class=\"comment\">// Foo</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(&#123;<span class=\"attr\">foo</span>: <span class=\"string\">'Foo'</span>&#125;[<span class=\"string\">'foo'</span>]); <span class=\"comment\">// Foo</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log([].length); <span class=\"comment\">// 0</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log([][<span class=\"string\">'length'</span>]); <span class=\"comment\">// 0</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"regexp\">/abc/g</span>.flags); <span class=\"comment\">// g</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"regexp\">/abc/g</span>[<span class=\"string\">'flags'</span>]); <span class=\"comment\">// g</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\"></span>) </span>&#123;&#125;.name); <span class=\"comment\">// fn</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\"></span>) </span>&#123;&#125;[<span class=\"string\">'name'</span>]); <span class=\"comment\">// fn</span></div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"JSFuck-basics\"><a href=\"#JSFuck-basics\" class=\"headerlink\" title=\"JSFuck basics\"></a>JSFuck basics</h2><p><a href=\"http://www.jsfuck.com/\" target=\"_blank\" rel=\"external\">JSFuck</a> introduces itself with the following basics:</p>\n<ul>\n<li><strong>false</strong>       =&gt;  <code>![]</code></li>\n<li><strong>true</strong>        =&gt;  <code>!![]</code></li>\n<li><strong>undefined</strong>   =&gt;  <code>[][[]]</code></li>\n<li><strong>NaN</strong>         =&gt;  <code>+[![]]</code></li>\n<li><strong>0</strong>           =&gt;  <code>+[]</code></li>\n<li><strong>1</strong>           =&gt;  <code>+!+[]</code></li>\n<li><strong>2</strong>           =&gt;  <code>!+[]+!+[]</code></li>\n<li><strong>10</strong>          =&gt;  <code>[+!+[]]+[+[]]</code></li>\n<li><strong>Array</strong>       =&gt;  <code>[]</code></li>\n<li><strong>Number</strong>      =&gt;  <code>+[]</code></li>\n<li><strong>String</strong>      =&gt;  <code>[]+[]</code></li>\n<li><strong>Boolean</strong>     =&gt;  <code>![]</code></li>\n<li><strong>Function</strong>    =&gt;  <code>[][&quot;filter&quot;]</code></li>\n<li><strong>eval</strong>        =&gt;  <code>[][&quot;filter&quot;][&quot;constructor&quot;]( CODE )()</code></li>\n<li><strong>window</strong>      =&gt;  <code>[][&quot;filter&quot;][&quot;constructor&quot;](&quot;return this&quot;)()</code></li>\n</ul>\n<p>With what we know about <strong>type conversion/coercion</strong>, <strong>truthy/falsy values</strong>, <strong>operator precedence/associativity</strong> and <strong>bracket notation</strong>, we can know explain this mess!</p>\n<h3 id=\"false-gt\"><a href=\"#false-gt\" class=\"headerlink\" title=\"false =&gt; ![]\"></a>false =&gt; <code>![]</code></h3><p><code>[]</code> is an array. JS arrays are objects and objects are always truthy. So if we negate a truthy value with a logical NOT, it becomes <code>false</code>.</p>\n<h3 id=\"true-gt\"><a href=\"#true-gt\" class=\"headerlink\" title=\"true =&gt; !![]\"></a>true =&gt; <code>!![]</code></h3><p><code>![]</code> is <code>false</code>, but <code>!![]</code> is equivalent to <code>!false</code>. So it is <code>true</code>.</p>\n<h3 id=\"undefined-gt\"><a href=\"#undefined-gt\" class=\"headerlink\" title=\"undefined =&gt; [][[]]\"></a>undefined =&gt; <code>[][[]]</code></h3><p><code>[]</code> is an array. Each array has built-in properties. <code>length</code> is a valid one and could be accessed like so: <code>[][&quot;length&quot;]</code>. In this case, the array is empty and returns <code>0</code>.</p>\n<p>But in our case, <code>[]</code> or <code>&quot;&quot;</code> is not a valid property of the array, so <code>[][[]]</code> obviously returns <code>undefined</code>.</p>\n<h3 id=\"NaN-gt\"><a href=\"#NaN-gt\" class=\"headerlink\" title=\"NaN =&gt; +[![]]\"></a>NaN =&gt; <code>+[![]]</code></h3><p><code>![]</code> is <code>false</code>, but <code>[false]</code> is truthy (this is an array containing a boolean). <code>[false].toString()</code> returns the string <code>&quot;false&quot;</code> and <code>+&quot;false&quot;</code> returns <code>NaN</code>.</p>\n<h3 id=\"0-gt\"><a href=\"#0-gt\" class=\"headerlink\" title=\"0 =&gt; +[]\"></a>0 =&gt; <code>+[]</code></h3><p><code>[].toString()</code> gives an empty string and <code>+&quot;&quot;</code> gives <code>0</code>.</p>\n<h3 id=\"1-gt\"><a href=\"#1-gt\" class=\"headerlink\" title=\"1 =&gt; +!+[]\"></a>1 =&gt; <code>+!+[]</code></h3><p><code>+[]</code> gives <code>0</code>. <code>0</code> is falsy, so <code>!0</code> gives <code>true</code>. <code>+true</code> gives <code>1</code>.</p>\n<h3 id=\"2-gt\"><a href=\"#2-gt\" class=\"headerlink\" title=\"2 =&gt; !+[]+!+[]\"></a>2 =&gt; <code>!+[]+!+[]</code></h3><p><code>!+[]</code> is <code>true</code> because <code>+[]</code> is <code>0</code> and <code>0</code> is falsy (<code>!0</code> is <code>true</code>). <code>true+true</code> = <code>2</code> because booleans are coerced to numbers when evaluated in a numerical context (<code>+false</code> is <code>0</code> and <code>+true</code> is <code>1</code>).</p>\n<h3 id=\"10-gt\"><a href=\"#10-gt\" class=\"headerlink\" title=\"10 =&gt; [+!+[]]+[+[]]\"></a>10 =&gt; <code>[+!+[]]+[+[]]</code></h3><p><strong>Left part:</strong> <code>+!+[]</code> = <code>1</code>, so <code>[+!+[]]</code> = <code>[1]</code>.<br><strong>Right part:</strong> <code>+[]</code> = <code>0</code>, so <code>[+[]]</code> = <code>[0]</code>.</p>\n<p><strong>Concatenation:</strong><br><code>[1]+[0]</code> is equivalent to <code>[1].toString() + [0].toString()</code> and returns <code>&quot;10&quot;</code>.</p>\n<h3 id=\"Array-gt\"><a href=\"#Array-gt\" class=\"headerlink\" title=\"Array =&gt; []\"></a>Array =&gt; <code>[]</code></h3><p>An array literal (better alternative to <code>new Array()</code>). <code>Array.isArray([])</code> = <code>true</code>.</p>\n<h3 id=\"Number-gt\"><a href=\"#Number-gt\" class=\"headerlink\" title=\"Number =&gt; +[]\"></a>Number =&gt; <code>+[]</code></h3><p><code>+[] = 0</code> and <code>typeof +[]</code> = <code>number</code>.</p>\n<h3 id=\"String-gt\"><a href=\"#String-gt\" class=\"headerlink\" title=\"String =&gt; []+[]\"></a>String =&gt; <code>[]+[]</code></h3><p><code>[]+[]</code> is equivalent to <code>[].toString() + [].toString()</code>. It is actually a concatenation of empty strings and the result is an empty string.</p>\n<h3 id=\"Boolean-gt\"><a href=\"#Boolean-gt\" class=\"headerlink\" title=\"Boolean =&gt; ![]\"></a>Boolean =&gt; <code>![]</code></h3><p><code>[]</code> is truthy, <code>![]</code> is <code>false</code>.</p>\n<h3 id=\"Function-gt-quot-filter-quot\"><a href=\"#Function-gt-quot-filter-quot\" class=\"headerlink\" title=\"Function =&gt; [][&quot;filter&quot;]\"></a>Function =&gt; <code>[][&quot;filter&quot;]</code></h3><p><code>[]</code> is an array (instance of <code>Array</code>) and has access to <code>Array.prototype</code> methods. We can then access <code>Array.prototype.filter</code> (which is a function) using bracket notation.</p>\n<h3 id=\"eval-gt-quot-filter-quot-quot-constructor-quot-CODE\"><a href=\"#eval-gt-quot-filter-quot-quot-constructor-quot-CODE\" class=\"headerlink\" title=\"eval =&gt; [][&quot;filter&quot;][&quot;constructor&quot;]( CODE )()\"></a>eval =&gt; <code>[][&quot;filter&quot;][&quot;constructor&quot;]( CODE )()</code></h3><p><code>[][&quot;filter&quot;]</code> is a function. In JavaScript, each function is an instance of <code>Function</code> and has access to <code>Function.prototype</code> properties. <code>Function.prototype.constructor</code> is one of these properties (this one is actually a reference to <code>Function</code>). Thus, <code>[][&quot;filter&quot;][&quot;constructor&quot;]</code> is an equivalent of <code>Function</code>. With or without <code>new</code>, <code>Function()</code> returns a new function. We could then make a simple addition like so:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Function</span>(<span class=\"string\">'a'</span>, <span class=\"string\">'b'</span>, <span class=\"string\">'return a + b'</span>)(<span class=\"number\">3</span>, <span class=\"number\">7</span>) <span class=\"comment\">// returns 10</span></div></pre></td></tr></table></figure>\n<h3 id=\"window-gt-quot-filter-quot-quot-constructor-quot-quot-return-this-quot\"><a href=\"#window-gt-quot-filter-quot-quot-constructor-quot-quot-return-this-quot\" class=\"headerlink\" title=\"window =&gt; [][&quot;filter&quot;][&quot;constructor&quot;](&quot;return this&quot;)()\"></a>window =&gt; <code>[][&quot;filter&quot;][&quot;constructor&quot;](&quot;return this&quot;)()</code></h3><p><code>[][&quot;filter&quot;][&quot;constructor&quot;]</code> is <code>Function</code>. When the code is not in <em>strict mode</em>, <code>this</code> is generally <code>window</code> in regular functions. Here is an example:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>); <span class=\"comment\">// window</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo();</div></pre></td></tr></table></figure>\n<p>For the record, this result would be <code>undefined</code> in strict mode:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"><span class=\"meta\">  'use strict'</span>;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>); <span class=\"comment\">// undefined</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo();</div></pre></td></tr></table></figure>\n<p>It could also be written like this:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">[][<span class=\"string\">\"filter\"</span>][<span class=\"string\">\"constructor\"</span>](<span class=\"string\">\"'use strict'; console.log(this);\"</span>)()</div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Challenge\"><a href=\"#Challenge\" class=\"headerlink\" title=\"Challenge\"></a>Challenge</h2><p>Try to decrypt the following code. Don’t cheat, if you can… :P</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">(!![]+[])[!+[]+!+[]+!+[]]+([][[]]+[])[+!+[]]+([][[]]+[])[!+[]+!+[]]</div></pre></td></tr></table></figure>\n<h3 id=\"Hints\"><a href=\"#Hints\" class=\"headerlink\" title=\"Hints\"></a>Hints</h3><ul>\n<li>Identify the main operands</li>\n<li>Break it into small pieces</li>\n<li>The result is a string</li>\n</ul>\n<p>Good luck!</p>\n<h3 id=\"Solution\"><a href=\"#Solution\" class=\"headerlink\" title=\"Solution\"></a>Solution</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">(!![]+[]) =&gt; (true+[]) =&gt; (&quot;true&quot;+&quot;&quot;) =&gt; (&quot;true&quot;) =&gt; &quot;true&quot;</div><div class=\"line\">[!+[]+!+[]+!+[]] =&gt; [!0+!0+!0] =&gt; [true+true+true] =&gt; [1+1+1] =&gt; [3]</div><div class=\"line\"></div><div class=\"line\">+</div><div class=\"line\"></div><div class=\"line\">([][[]]+[]) =&gt; (undefined+[]) =&gt; (&quot;undefined&quot;+&quot;&quot;) =&gt; &quot;undefined&quot;</div><div class=\"line\">[+!+[]] =&gt; [+!0] =&gt; [+true] =&gt; [1]</div><div class=\"line\"></div><div class=\"line\">+</div><div class=\"line\"></div><div class=\"line\">([][[]]+[]) =&gt; (undefined+[]) =&gt; (&quot;undefined&quot;+&quot;&quot;) =&gt; &quot;undefined&quot;</div><div class=\"line\">[!+[]+!+[]] =&gt; [!0+!0] =&gt; [true+true] =&gt; [1+1] =&gt; [2]</div><div class=\"line\"></div><div class=\"line\">= &quot;true&quot;[3]+&quot;undefined&quot;[1]+&quot;undefined&quot;[2]</div><div class=\"line\">= &quot;e&quot;+&quot;n&quot;+&quot;d&quot;</div><div class=\"line\">= &quot;end&quot;</div></pre></td></tr></table></figure>\n","excerpt":"<p><em>JavaScript: The Good Parts</em> readers and <strong>Douglas Crockford</strong> fans know that JavaScript subsets matter. Due to the permissive and versatile nature of the language, it is reasonable to select only the most solid stones to build a wall. But hey, why would we need to bother with a full programming language when we just need 6 characters? Here comes <a href=\"http://www.jsfuck.com/\"><strong>JSFuck</strong></a> by <strong>Martin Kleppe</strong>…</p>","more":"<blockquote>\n<p>JSFuck is an esoteric and educational programming style based on the atomic parts of JavaScript. It uses only six different characters to write and execute code.</p>\n</blockquote>\n<p>I know what you think: “<em>6 characters? WTF!?</em>“. Yes, JSFuck allows you to code using <code>(</code>, <code>)</code>, <code>[</code>, <code>]</code>, <code>+</code> and <code>!</code> only. How is this possible?</p>\n<p>To understand what is going on behind JSFuck, we have to explain how JavaScript works with:</p>\n<ul>\n<li><strong>Type conversion/coercion</strong></li>\n<li><strong>Truthy/falsy values</strong></li>\n<li><strong>Operator precedence/associativity</strong></li>\n<li><strong>Bracket notation</strong></li>\n</ul>\n<h2 id=\"Type-conversion-coercion\"><a href=\"#Type-conversion-coercion\" class=\"headerlink\" title=\"Type conversion/coercion\"></a>Type conversion/coercion</h2><h3 id=\"Explicit-type-conversion\"><a href=\"#Explicit-type-conversion\" class=\"headerlink\" title=\"Explicit type conversion\"></a>Explicit type conversion</h3><p>For explicit type conversion in JavaScript, <strong>unary operators</strong> like <code>+</code> or <code>!</code> may be used:</p>\n<ul>\n<li><code>+</code> can convert the operand to a number</li>\n<li><code>!</code> can convert the operand to a boolean (and “negates” it)</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// MULTIPLE TYPES</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> str = <span class=\"string\">''</span>,</div><div class=\"line\">    nb = <span class=\"number\">42</span>,</div><div class=\"line\">    bool = <span class=\"literal\">true</span>,</div><div class=\"line\">    arr = [],</div><div class=\"line\">    obj = &#123;&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(str, <span class=\"keyword\">typeof</span> str); <span class=\"comment\">// \"\" string</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(nb, <span class=\"keyword\">typeof</span> nb); <span class=\"comment\">// 42 number</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(bool, <span class=\"keyword\">typeof</span> bool); <span class=\"comment\">// true boolean</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(arr, <span class=\"built_in\">Array</span>.isArray(arr)); <span class=\"comment\">// [] true</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(obj, <span class=\"keyword\">typeof</span> obj); <span class=\"comment\">// &#123;&#125; object</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// NUMBERS</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> n_str = +str,</div><div class=\"line\">    n_nb = +nb,</div><div class=\"line\">    n_bool = +bool,</div><div class=\"line\">    n_arr = +arr,</div><div class=\"line\">    n_obj = +obj;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(n_str, <span class=\"keyword\">typeof</span> n_str); <span class=\"comment\">// 0 number</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(n_nb, <span class=\"keyword\">typeof</span> n_nb); <span class=\"comment\">// 42 number</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(n_bool, <span class=\"keyword\">typeof</span> n_bool); <span class=\"comment\">// 1 number</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(n_arr, <span class=\"keyword\">typeof</span> n_arr); <span class=\"comment\">// 0 number</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(n_obj, <span class=\"keyword\">typeof</span> n_obj); <span class=\"comment\">// NaN number</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// BOOLEANS</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> b_str = !str,</div><div class=\"line\">    b_nb = !nb,</div><div class=\"line\">    b_bool = !bool,</div><div class=\"line\">    b_arr = !arr,</div><div class=\"line\">    b_obj = !obj;</div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(b_str, <span class=\"keyword\">typeof</span> b_str); <span class=\"comment\">// true boolean</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(b_nb, <span class=\"keyword\">typeof</span> b_nb); <span class=\"comment\">// false boolean</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(b_bool, <span class=\"keyword\">typeof</span> b_bool); <span class=\"comment\">// false boolean</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(b_arr, <span class=\"keyword\">typeof</span> b_arr); <span class=\"comment\">// false boolean</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(b_obj, <span class=\"keyword\">typeof</span> b_obj); <span class=\"comment\">// false boolean</span></div></pre></td></tr></table></figure>\n<h3 id=\"Implicit-type-conversion-coercion\"><a href=\"#Implicit-type-conversion-coercion\" class=\"headerlink\" title=\"Implicit type conversion (coercion)\"></a>Implicit type conversion (coercion)</h3><p>There would be many things to say about type coercion in JavaScript… However, with JSFuck, we only need to understand why:</p>\n<ul>\n<li><code>[]+[]</code> is an empty string</li>\n<li><code>+[]</code> is <code>0</code></li>\n<li><code>true+false</code> = <code>1</code></li>\n</ul>\n<p>These three odd behaviors are linked to the same ambiguity: the <code>+</code> operator which can be used for concatenation (in a string context) and for addition/incrementation/conversion (in a numerical context).</p>\n<p>In fact, <code>Array.prototype.toString()</code> is called internally during an array-to-primitive conversion, and we know that its output is different from the one given by <code>Object.prototype.toString()</code>: it will not return something like <code>[object Object]</code>, but a concatenation of all elements in the array with a comma as a separator.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"string\">'foo'</span>, <span class=\"string\">'bar'</span>, <span class=\"string\">'baz'</span>];</div><div class=\"line\"><span class=\"built_in\">console</span>.log(arr.toString()); <span class=\"comment\">// foo,bar,baz</span></div></pre></td></tr></table></figure>\n<p>Of course, if the array is empty, <code>Array.prototype.toString()</code> returns an empty string. That is why <code>[]+[]</code> gives an empty string: this operation is actually no more than a concatenation of empty strings after coercion!</p>\n<p>Moreover, when converted to a number, an empty string becomes <code>0</code>. <code>[object Object]</code> is not an empty string and does not contain numbers, so it becomes <code>NaN</code>. Here is what happens (roughly) under the hood:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log([].toString() + [].toString()); <span class=\"comment\">// \"\"</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log([].toString(), +[].toString()); <span class=\"comment\">// \"\" 0</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(&#123;&#125;.toString(), +&#123;&#125;.toString()); <span class=\"comment\">// [object Object] NaN</span></div></pre></td></tr></table></figure>\n<p>An operation with <code>+</code> where operands are booleans is not evaluated in a string context, but in a numerical context. This means booleans are coerced to numbers. <code>true</code> becomes <code>1</code> and <code>false</code> becomes <code>0</code>.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">false</span> + <span class=\"literal\">false</span>); <span class=\"comment\">// 0</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">true</span> + <span class=\"literal\">false</span>); <span class=\"comment\">// 1</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"literal\">true</span> + <span class=\"literal\">true</span>); <span class=\"comment\">// 2</span></div></pre></td></tr></table></figure>\n<h2 id=\"Truthy-Falsy-values\"><a href=\"#Truthy-Falsy-values\" class=\"headerlink\" title=\"Truthy/Falsy values\"></a>Truthy/Falsy values</h2><p>In boolean expressions, JavaScript accepts booleans (<code>true</code>/<code>false</code>), but it also evaluates <strong>truthy</strong> and <strong>falsy</strong> values:</p>\n<ul>\n<li>An object (object literal, array, function, etc.) is always <strong>truthy</strong></li>\n<li><code>undefined</code>, <code>null</code>, <code>NaN</code>, <code>0</code> and the empty string are <strong>falsy</strong></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">truthyOrFalsy</span>(<span class=\"params\">arg</span>) </span>&#123;</div><div class=\"line\">  arg ? <span class=\"built_in\">console</span>.log(<span class=\"string\">'truthy'</span>) : <span class=\"built_in\">console</span>.log(<span class=\"string\">'falsy'</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">truthyOrFalsy(<span class=\"string\">''</span>); <span class=\"comment\">// falsy</span></div><div class=\"line\">truthyOrFalsy(<span class=\"string\">'str'</span>); <span class=\"comment\">// truthy</span></div><div class=\"line\">truthyOrFalsy(<span class=\"number\">0</span>); <span class=\"comment\">// falsy</span></div><div class=\"line\">truthyOrFalsy(<span class=\"number\">1</span>); <span class=\"comment\">// truthy</span></div><div class=\"line\">truthyOrFalsy([]); <span class=\"comment\">// truthy</span></div><div class=\"line\">truthyOrFalsy(&#123;&#125;); <span class=\"comment\">// truthy</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(!<span class=\"string\">''</span>, !!<span class=\"string\">''</span>); <span class=\"comment\">// true false</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(!<span class=\"string\">'str'</span>, !!<span class=\"string\">'str'</span>); <span class=\"comment\">// false true</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(!<span class=\"number\">0</span>, !!<span class=\"number\">0</span>); <span class=\"comment\">// true false</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(!<span class=\"number\">1</span>, !!<span class=\"number\">1</span>); <span class=\"comment\">// false true</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(![], !![]); <span class=\"comment\">// false true</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(!&#123;&#125;, !!&#123;&#125;); <span class=\"comment\">// false true</span></div></pre></td></tr></table></figure>\n<p>Obviously, truthy values become <code>true</code> when they are converted to booleans with <code>!!</code> (double logical NOT or “NOT NOT”) and falsy values become <code>false</code>.</p>\n<h2 id=\"Operator-precedence-and-associativity\"><a href=\"#Operator-precedence-and-associativity\" class=\"headerlink\" title=\"Operator precedence and associativity\"></a>Operator precedence and associativity</h2><p>Just like in math, operations must be performed in a specific order, following certain conventions. This order is determined by:</p>\n<ul>\n<li>Operator precedence</li>\n<li>Operator associativity</li>\n</ul>\n<h3 id=\"Operator-precedence\"><a href=\"#Operator-precedence\" class=\"headerlink\" title=\"Operator precedence\"></a>Operator precedence</h3><p>Each operator has its own priority. For example, we know that multiplication takes priority over addition and that parentheses allow us to override this natural priority.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">1</span> + <span class=\"number\">2</span> * <span class=\"number\">3</span>); <span class=\"comment\">// 7</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log((<span class=\"number\">1</span> + <span class=\"number\">2</span>) * <span class=\"number\">3</span>); <span class=\"comment\">// 9</span></div></pre></td></tr></table></figure>\n<p>Like most programming languages, JavaScript has many operators. The full <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table\">reference of operator precedence</a> is available on MDN.</p>\n<p>An interesting point is that the unary <code>+</code> has higher precedence than the binary <code>+</code>.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Conversions are performed BEFORE the addition</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(+<span class=\"string\">'41'</span> + +<span class=\"literal\">true</span>); <span class=\"comment\">// 42</span></div></pre></td></tr></table></figure>\n<h3 id=\"Operator-associativity\"><a href=\"#Operator-associativity\" class=\"headerlink\" title=\"Operator associativity\"></a>Operator associativity</h3><p>Unfortunately, operator precedence cannot determine the “absolute” order of all operations. An operation can contain several operators that have the same precedence, so we need a clear direction (“left-to-right” or “right-to-left”).</p>\n<p>In math, we know that the order does not really matter to perform an addition:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">1000</span> + <span class=\"number\">300</span> + <span class=\"number\">37</span>); <span class=\"comment\">// 1337</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">300</span> + <span class=\"number\">1000</span> + <span class=\"number\">37</span>); <span class=\"comment\">// 1337</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">37</span> + <span class=\"number\">300</span> + <span class=\"number\">1000</span>); <span class=\"comment\">// 1337</span></div></pre></td></tr></table></figure>\n<p>But it is much more problematic with subtraction:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">100</span> - <span class=\"number\">58</span>); <span class=\"comment\">// 42</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"number\">58</span> - <span class=\"number\">100</span>); <span class=\"comment\">// -42</span></div></pre></td></tr></table></figure>\n<p>An interesting point is that the unary <code>+</code> has “right-to-left” associativity, whereas the binary <code>+</code> has “left-to-right” associativity.</p>\n<p>Again, the full <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table\">reference of operator associativity</a> is available on MDN. We could also bring back the previous example:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Conversions are performed right-to-left</span></div><div class=\"line\"><span class=\"comment\">// The addition is performed left-to-right</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(+<span class=\"string\">'41'</span> + +<span class=\"literal\">true</span>); <span class=\"comment\">// 42</span></div></pre></td></tr></table></figure>\n<h2 id=\"Bracket-notation\"><a href=\"#Bracket-notation\" class=\"headerlink\" title=\"Bracket notation\"></a>Bracket notation</h2><p>In JavaScript, all objects have <strong>own</strong> and/or <strong>prototype</strong> properties. These properties can be accessed using the <strong>dot</strong> (<code>.</code>) notation or the <strong>bracket</strong> notation (<code>[]</code>). JSFuck uses bracket notation, which must not be confused with empty arrays…</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">console</span>.log(&#123;<span class=\"attr\">foo</span>: <span class=\"string\">'Foo'</span>&#125;.foo); <span class=\"comment\">// Foo</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(&#123;<span class=\"attr\">foo</span>: <span class=\"string\">'Foo'</span>&#125;[<span class=\"string\">'foo'</span>]); <span class=\"comment\">// Foo</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log([].length); <span class=\"comment\">// 0</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log([][<span class=\"string\">'length'</span>]); <span class=\"comment\">// 0</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"regexp\">/abc/g</span>.flags); <span class=\"comment\">// g</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"regexp\">/abc/g</span>[<span class=\"string\">'flags'</span>]); <span class=\"comment\">// g</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\"></span>) </span>&#123;&#125;.name); <span class=\"comment\">// fn</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\"></span>) </span>&#123;&#125;[<span class=\"string\">'name'</span>]); <span class=\"comment\">// fn</span></div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"JSFuck-basics\"><a href=\"#JSFuck-basics\" class=\"headerlink\" title=\"JSFuck basics\"></a>JSFuck basics</h2><p><a href=\"http://www.jsfuck.com/\">JSFuck</a> introduces itself with the following basics:</p>\n<ul>\n<li><strong>false</strong>       =&gt;  <code>![]</code></li>\n<li><strong>true</strong>        =&gt;  <code>!![]</code></li>\n<li><strong>undefined</strong>   =&gt;  <code>[][[]]</code></li>\n<li><strong>NaN</strong>         =&gt;  <code>+[![]]</code></li>\n<li><strong>0</strong>           =&gt;  <code>+[]</code></li>\n<li><strong>1</strong>           =&gt;  <code>+!+[]</code></li>\n<li><strong>2</strong>           =&gt;  <code>!+[]+!+[]</code></li>\n<li><strong>10</strong>          =&gt;  <code>[+!+[]]+[+[]]</code></li>\n<li><strong>Array</strong>       =&gt;  <code>[]</code></li>\n<li><strong>Number</strong>      =&gt;  <code>+[]</code></li>\n<li><strong>String</strong>      =&gt;  <code>[]+[]</code></li>\n<li><strong>Boolean</strong>     =&gt;  <code>![]</code></li>\n<li><strong>Function</strong>    =&gt;  <code>[][&quot;filter&quot;]</code></li>\n<li><strong>eval</strong>        =&gt;  <code>[][&quot;filter&quot;][&quot;constructor&quot;]( CODE )()</code></li>\n<li><strong>window</strong>      =&gt;  <code>[][&quot;filter&quot;][&quot;constructor&quot;](&quot;return this&quot;)()</code></li>\n</ul>\n<p>With what we know about <strong>type conversion/coercion</strong>, <strong>truthy/falsy values</strong>, <strong>operator precedence/associativity</strong> and <strong>bracket notation</strong>, we can know explain this mess!</p>\n<h3 id=\"false-gt\"><a href=\"#false-gt\" class=\"headerlink\" title=\"false =&gt; ![]\"></a>false =&gt; <code>![]</code></h3><p><code>[]</code> is an array. JS arrays are objects and objects are always truthy. So if we negate a truthy value with a logical NOT, it becomes <code>false</code>.</p>\n<h3 id=\"true-gt\"><a href=\"#true-gt\" class=\"headerlink\" title=\"true =&gt; !![]\"></a>true =&gt; <code>!![]</code></h3><p><code>![]</code> is <code>false</code>, but <code>!![]</code> is equivalent to <code>!false</code>. So it is <code>true</code>.</p>\n<h3 id=\"undefined-gt\"><a href=\"#undefined-gt\" class=\"headerlink\" title=\"undefined =&gt; [][[]]\"></a>undefined =&gt; <code>[][[]]</code></h3><p><code>[]</code> is an array. Each array has built-in properties. <code>length</code> is a valid one and could be accessed like so: <code>[][&quot;length&quot;]</code>. In this case, the array is empty and returns <code>0</code>.</p>\n<p>But in our case, <code>[]</code> or <code>&quot;&quot;</code> is not a valid property of the array, so <code>[][[]]</code> obviously returns <code>undefined</code>.</p>\n<h3 id=\"NaN-gt\"><a href=\"#NaN-gt\" class=\"headerlink\" title=\"NaN =&gt; +[![]]\"></a>NaN =&gt; <code>+[![]]</code></h3><p><code>![]</code> is <code>false</code>, but <code>[false]</code> is truthy (this is an array containing a boolean). <code>[false].toString()</code> returns the string <code>&quot;false&quot;</code> and <code>+&quot;false&quot;</code> returns <code>NaN</code>.</p>\n<h3 id=\"0-gt\"><a href=\"#0-gt\" class=\"headerlink\" title=\"0 =&gt; +[]\"></a>0 =&gt; <code>+[]</code></h3><p><code>[].toString()</code> gives an empty string and <code>+&quot;&quot;</code> gives <code>0</code>.</p>\n<h3 id=\"1-gt\"><a href=\"#1-gt\" class=\"headerlink\" title=\"1 =&gt; +!+[]\"></a>1 =&gt; <code>+!+[]</code></h3><p><code>+[]</code> gives <code>0</code>. <code>0</code> is falsy, so <code>!0</code> gives <code>true</code>. <code>+true</code> gives <code>1</code>.</p>\n<h3 id=\"2-gt\"><a href=\"#2-gt\" class=\"headerlink\" title=\"2 =&gt; !+[]+!+[]\"></a>2 =&gt; <code>!+[]+!+[]</code></h3><p><code>!+[]</code> is <code>true</code> because <code>+[]</code> is <code>0</code> and <code>0</code> is falsy (<code>!0</code> is <code>true</code>). <code>true+true</code> = <code>2</code> because booleans are coerced to numbers when evaluated in a numerical context (<code>+false</code> is <code>0</code> and <code>+true</code> is <code>1</code>).</p>\n<h3 id=\"10-gt\"><a href=\"#10-gt\" class=\"headerlink\" title=\"10 =&gt; [+!+[]]+[+[]]\"></a>10 =&gt; <code>[+!+[]]+[+[]]</code></h3><p><strong>Left part:</strong> <code>+!+[]</code> = <code>1</code>, so <code>[+!+[]]</code> = <code>[1]</code>.<br><strong>Right part:</strong> <code>+[]</code> = <code>0</code>, so <code>[+[]]</code> = <code>[0]</code>.</p>\n<p><strong>Concatenation:</strong><br><code>[1]+[0]</code> is equivalent to <code>[1].toString() + [0].toString()</code> and returns <code>&quot;10&quot;</code>.</p>\n<h3 id=\"Array-gt\"><a href=\"#Array-gt\" class=\"headerlink\" title=\"Array =&gt; []\"></a>Array =&gt; <code>[]</code></h3><p>An array literal (better alternative to <code>new Array()</code>). <code>Array.isArray([])</code> = <code>true</code>.</p>\n<h3 id=\"Number-gt\"><a href=\"#Number-gt\" class=\"headerlink\" title=\"Number =&gt; +[]\"></a>Number =&gt; <code>+[]</code></h3><p><code>+[] = 0</code> and <code>typeof +[]</code> = <code>number</code>.</p>\n<h3 id=\"String-gt\"><a href=\"#String-gt\" class=\"headerlink\" title=\"String =&gt; []+[]\"></a>String =&gt; <code>[]+[]</code></h3><p><code>[]+[]</code> is equivalent to <code>[].toString() + [].toString()</code>. It is actually a concatenation of empty strings and the result is an empty string.</p>\n<h3 id=\"Boolean-gt\"><a href=\"#Boolean-gt\" class=\"headerlink\" title=\"Boolean =&gt; ![]\"></a>Boolean =&gt; <code>![]</code></h3><p><code>[]</code> is truthy, <code>![]</code> is <code>false</code>.</p>\n<h3 id=\"Function-gt-quot-filter-quot\"><a href=\"#Function-gt-quot-filter-quot\" class=\"headerlink\" title=\"Function =&gt; [][&quot;filter&quot;]\"></a>Function =&gt; <code>[][&quot;filter&quot;]</code></h3><p><code>[]</code> is an array (instance of <code>Array</code>) and has access to <code>Array.prototype</code> methods. We can then access <code>Array.prototype.filter</code> (which is a function) using bracket notation.</p>\n<h3 id=\"eval-gt-quot-filter-quot-quot-constructor-quot-CODE\"><a href=\"#eval-gt-quot-filter-quot-quot-constructor-quot-CODE\" class=\"headerlink\" title=\"eval =&gt; [][&quot;filter&quot;][&quot;constructor&quot;]( CODE )()\"></a>eval =&gt; <code>[][&quot;filter&quot;][&quot;constructor&quot;]( CODE )()</code></h3><p><code>[][&quot;filter&quot;]</code> is a function. In JavaScript, each function is an instance of <code>Function</code> and has access to <code>Function.prototype</code> properties. <code>Function.prototype.constructor</code> is one of these properties (this one is actually a reference to <code>Function</code>). Thus, <code>[][&quot;filter&quot;][&quot;constructor&quot;]</code> is an equivalent of <code>Function</code>. With or without <code>new</code>, <code>Function()</code> returns a new function. We could then make a simple addition like so:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"built_in\">Function</span>(<span class=\"string\">'a'</span>, <span class=\"string\">'b'</span>, <span class=\"string\">'return a + b'</span>)(<span class=\"number\">3</span>, <span class=\"number\">7</span>) <span class=\"comment\">// returns 10</span></div></pre></td></tr></table></figure>\n<h3 id=\"window-gt-quot-filter-quot-quot-constructor-quot-quot-return-this-quot\"><a href=\"#window-gt-quot-filter-quot-quot-constructor-quot-quot-return-this-quot\" class=\"headerlink\" title=\"window =&gt; [][&quot;filter&quot;][&quot;constructor&quot;](&quot;return this&quot;)()\"></a>window =&gt; <code>[][&quot;filter&quot;][&quot;constructor&quot;](&quot;return this&quot;)()</code></h3><p><code>[][&quot;filter&quot;][&quot;constructor&quot;]</code> is <code>Function</code>. When the code is not in <em>strict mode</em>, <code>this</code> is generally <code>window</code> in regular functions. Here is an example:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>); <span class=\"comment\">// window</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo();</div></pre></td></tr></table></figure>\n<p>For the record, this result would be <code>undefined</code> in strict mode:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\"><span class=\"meta\">  'use strict'</span>;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"keyword\">this</span>); <span class=\"comment\">// undefined</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">foo();</div></pre></td></tr></table></figure>\n<p>It could also be written like this:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">[][<span class=\"string\">\"filter\"</span>][<span class=\"string\">\"constructor\"</span>](<span class=\"string\">\"'use strict'; console.log(this);\"</span>)()</div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Challenge\"><a href=\"#Challenge\" class=\"headerlink\" title=\"Challenge\"></a>Challenge</h2><p>Try to decrypt the following code. Don’t cheat, if you can… :P</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">(!![]+[])[!+[]+!+[]+!+[]]+([][[]]+[])[+!+[]]+([][[]]+[])[!+[]+!+[]]</div></pre></td></tr></table></figure>\n<h3 id=\"Hints\"><a href=\"#Hints\" class=\"headerlink\" title=\"Hints\"></a>Hints</h3><ul>\n<li>Identify the main operands</li>\n<li>Break it into small pieces</li>\n<li>The result is a string</li>\n</ul>\n<p>Good luck!</p>\n<h3 id=\"Solution\"><a href=\"#Solution\" class=\"headerlink\" title=\"Solution\"></a>Solution</h3><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">(!![]+[]) =&gt; (true+[]) =&gt; (&quot;true&quot;+&quot;&quot;) =&gt; (&quot;true&quot;) =&gt; &quot;true&quot;</div><div class=\"line\">[!+[]+!+[]+!+[]] =&gt; [!0+!0+!0] =&gt; [true+true+true] =&gt; [1+1+1] =&gt; [3]</div><div class=\"line\"></div><div class=\"line\">+</div><div class=\"line\"></div><div class=\"line\">([][[]]+[]) =&gt; (undefined+[]) =&gt; (&quot;undefined&quot;+&quot;&quot;) =&gt; &quot;undefined&quot;</div><div class=\"line\">[+!+[]] =&gt; [+!0] =&gt; [+true] =&gt; [1]</div><div class=\"line\"></div><div class=\"line\">+</div><div class=\"line\"></div><div class=\"line\">([][[]]+[]) =&gt; (undefined+[]) =&gt; (&quot;undefined&quot;+&quot;&quot;) =&gt; &quot;undefined&quot;</div><div class=\"line\">[!+[]+!+[]] =&gt; [!0+!0] =&gt; [true+true] =&gt; [1+1] =&gt; [2]</div><div class=\"line\"></div><div class=\"line\">= &quot;true&quot;[3]+&quot;undefined&quot;[1]+&quot;undefined&quot;[2]</div><div class=\"line\">= &quot;e&quot;+&quot;n&quot;+&quot;d&quot;</div><div class=\"line\">= &quot;end&quot;</div></pre></td></tr></table></figure>"},{"title":"What if JavaScript was a Java scripting language?","date":"2017-06-08T21:51:28.000Z","thumbnail":"/images/javascript.png","_content":"\n*Meanwhile, in a parallel universe...*\n\nJavaScript is a scripting language for the Java Platform and JS scripts should strictly apply the key concepts of **object-oriented programming** (OOP).\n\nOur task is to model and implement a simple program that involves living beings. This is of course a vast topic and, for the sake of simplicity, we will not deal with peripheral concepts like generics, synchronized methods, collections or packages. This would bring us too far.\n\n<!-- more -->\n\n---\n\n## Inheritance\n\nJava is a class-based language where inheritance is performed using the `extends` keyword. This is much more complicated in JavaScript...\n\n### ES5\n\nECMAScript 5 does not have built-in classes. JavaScript is a **prototype-based language**, but classes can be emulated thanks to **constructor functions**. Inheritance is possible, but should be done through a manipulation of prototypes:\n\n```JavaScript\n// Parent class\nfunction LivingBeing(species) { // constructor\n  this.species = species; // attribute\n}\n\nLivingBeing.live = function() { // static method\n  return 'Life is life!';\n};\n\n// Child class\nfunction Person(firstname, lastname) { // constructor\n  LivingBeing.call(this, 'Homo sapiens'); // super(\"Homo sapiens\")\n  this.firstname = firstname; // attribute\n  this.lastname = lastname; // attribute\n}\n// extends\nPerson.prototype = Object.create(LivingBeing.prototype);\nPerson.prototype.constructor = Person;\n\nPerson.prototype.sayHello = function () { // instance method\n  return 'Hello, ' + this.firstname + ' ' + this.lastname + '!';\n};\n\n// --------------------\n\nvar anonymousDog = new LivingBeing('Canis lupus');\nconsole.log(anonymousDog.species); // Canis lupus\n\nvar john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), '(' + john.species + ')'); // Hello, John Doe! (Homo sapiens)\n\nconsole.log(LivingBeing.live()); // Life is life!\n```\n\n### ES6\n\nECMAScript 6 brought syntactic sugar to work more easily with so-called classes and inheritance. This new syntax hides the true prototypal nature of JavaScript, but now the language looks much more familiar for Java developers:\n\n```JavaScript\n// Parent class\nclass LivingBeing {\n  constructor(species) {\n    this.species = species; // attribute\n  }\n\n  static live() { // static method\n    return 'Life is life!';\n  }\n}\n\n// Child class\nclass Person extends LivingBeing {\n  constructor(firstname, lastname) {\n    super('Homo sapiens');\n    this.firstname = firstname; // attribute\n    this.lastname = lastname; // attribute\n  }\n\n  sayHello() { // instance method\n    return `Hello, ${this.firstname} ${this.lastname}!`;\n  }\n}\n\n// --------------------\n\nlet anonymousDog = new LivingBeing('Canis lupus');\nconsole.log(anonymousDog.species); // Canis lupus\n\nlet john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), `(${john.species})`); // Hello, John Doe! (Homo sapiens)\n\nconsole.log(LivingBeing.live()); // Life is life!\n```\n\n---\n\n## Composition\n\nIn OOP, a best practice is to favor **composition over inheritance**.\n\n### ES5\n\nComposition in ECMAScript 5 is not so different from composition in Java. A specific class may reference another class using an instance of the latter in one of its properties.\n\n```JavaScript\n// Class to be referenced\nfunction LivingBeing(species) { // constructor\n  this.species = species; // attribute\n}\n\nLivingBeing.live = function() { // static method\n  return 'Life is life!';\n};\n\n// Main class\nfunction Person(firstname, lastname) { // constructor\n  this.livingBeing = new LivingBeing('Homo sapiens'); // attribute (composition)\n  this.firstname = firstname; // attribute\n  this.lastname = lastname; // attribute\n}\n\nPerson.prototype.sayHello = function () { // instance method\n  return 'Hello, ' + this.firstname + ' ' + this.lastname + '!';\n};\n\n// --------------------\n\nvar  anonymousDog = new LivingBeing('Canis lupus');\nconsole.log(anonymousDog.species);\n\nvar john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), '(' + john.livingBeing.species + ')'); // Hello, John Doe! (Homo sapiens)\n\nconsole.log(LivingBeing.live()); // Life is life!\n```\n\n### ES6\n\nComposition in ECMAScript 6 is even closer to Java, thanks to the syntactic sugar that emulates classes natively:\n\n```JavaScript\n// Class to be referenced\nclass LivingBeing {\n  constructor(species) {\n    this.species = species; // attribute\n  }\n\n  static live() {\n    return 'Life is life!';\n  }\n}\n\n// Main class\nclass Person {\n  constructor(firstname, lastname) {\n    this.livingBeing = new LivingBeing('Homo sapiens'); // attribute (composition)\n    this.firstname = firstname; // attribute\n    this.lastname = lastname; // attribute\n  }\n\n  sayHello() {\n    return `Hello, ${this.firstname} ${this.lastname}!`;\n  }\n}\n\n// --------------------\n\nlet anonymousDog = new LivingBeing('Canis lupus');\nconsole.log(anonymousDog.species);\n\nlet john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), `(${john.livingBeing.species})`); // Hello, John Doe (Homo sapiens)\n\nconsole.log(LivingBeing.live()); // Life is life!\n```\n\nComposition works fine here, but conceptually, inheritance is more meaningful for this particular problem.\n\n---\n\n## Abstraction\n\nAbstraction in Java is based on **abstract classes** and **interfaces**. JavaScript does not have a built-in abstraction mechanism, but like classes in ES5, this concept can be emulated.\n\n### Abstract class\n\nAn abstract class is a class that cannot be instantiated, so we cannot create direct objects from an abstract class. In JavaScript, we can prevent instantiation of a particular class using conditions in the constructor.\n\nAn abstract class can contain abstract methods which are methods without implementation. In JavaScript, this can be reproduced quite easily if we declare a prototype method that only throws an error. It will remain \"abstract\" (it will throw an error) as long as it is not redefined in the prototype chain.\n\n#### ES5\n\nTo create an abstract class in ES5 (here `LivingBeing`), the best test to check if the constructor has been called directly with `new` is `this.constructor === LivingBeing`. Be careful to use the right comparison operator because `this.constructor !== LivingBeing` would create (roughly) a **final class** (a class that cannot be extended)!\n\n```JavaScript\n// Abstract class\nfunction LivingBeing(species) {\n  if (this.constructor === LivingBeing) {\n    throw new Error('You cannot instantiate an abstract class!');\n  }\n  this.species = species;\n}\n\nLivingBeing.prototype.communicate = function () { // abstract method\n  throw new Error('You cannot call an abstract method!');\n};\n\n// Concrete class\nfunction Person(firstname, lastname) {\n  LivingBeing.call(this, 'Homo sapiens');\n  this.firstname = firstname;\n  this.lastname = lastname;\n}\nPerson.prototype = Object.create(LivingBeing.prototype);\nPerson.prototype.constructor = Person;\n\nPerson.prototype.sayHello = function () { // concrete method\n  return 'Hello, ' + this.firstname + ' ' + this.lastname + '!';\n};\n\n// --------------------\n\nvar john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), '(' + john.species + ')'); // Hello, John Doe! (Homo sapiens)\n\njohn.communicate(); // Error: Your cannot call an abstract method!\nnew LivingBeing('Canis lupus'); // Error: You cannot instantiate an abstract class!\n```\n\n#### ES6\n\nWith ES6, it is better to use `new.target` like this: `new.target.name === 'LivingBeing'`. Once again, be careful with the comparison operator: `new.target.name !== 'LivingBeing'` would create a final class.\n\n```JavaScript\n// Abstract class\nclass LivingBeing {\n  constructor(species) {\n    if (new.target.name === 'LivingBeing') {\n      throw new Error('You cannot instantiate an abstract class!');\n    }\n    this.species = species;\n  }\n\n  communicate() { // abstract method\n    throw new Error('You cannot call an abstract method!');\n  }\n}\n\n// Concrete class\nclass Person extends LivingBeing {\n  constructor(firstname, lastname) {\n    super('Homo sapiens');\n    this.firstname = firstname;\n    this.lastname = lastname;\n  }\n\n  sayHello() { // concrete method\n    return `Hello, ${this.firstname} ${this.lastname}`;\n  }\n}\n\n// --------------------\n\nlet john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), `(${john.species})`); // Hello, John Doe! (Homo sapiens)\n\njohn.communicate(); // Error: You cannot call an abstract method!\nnew LivingBeing('Canis lupus'); // Error: You cannot instantiate an abstract class!\n```\n\n### Interface\n\nInterfaces in Java are quite close to 100% abstract classes. They contain `public abstract` methods that must be overriden in classes which implement them.\n\n#### ES5\n\nA solution to get interfaces in ES5 is to create a custom `implements` function in `Function.prototype` and use object literals to declare interfaces.\n\nThe custom function must traverse the **own properties** of the interface passed as an argument and test if they exist in the current function instance (presumably a constructor function). If they do not exist, they should be created in the function's prototype. In this case, they remain abstract, meaning that they will throw an error if we try to use them before to override them.\n\n```JavaScript\n// Custom \"implements\" function\nFunction.prototype.implements = function (iface) {\n  if (iface.toString() !== '[object Object]') {\n    throw new Error('Invalid argument. An interface must be an object.');\n  } else {\n    for (var prop in iface) {\n      if (iface.hasOwnProperty(prop)) {\n        if (typeof iface[prop] === 'function' && !(prop in this.prototype)) {\n          this.prototype[prop] = iface[prop];\n        }\n      }\n    }\n  }\n};\n\n// Interface\nvar LivingBeingInterface = {\n  communicate: function () {\n    throw new Error('You cannot call an abstract method!');\n  },\n  getSpecies: function () {\n    throw new Error('You cannot call an abstract method!');\n  }\n};\n\n// Class\nPerson.implements(LivingBeingInterface); // cool, isn't it?\n\nfunction Person(firstname, lastname) {\n  this.firstname = firstname;\n  this.lastname = lastname;\n  this.species = 'Homo sapiens';\n}\n\nPerson.prototype.sayHello = function () {\n  return 'Hello, ' + this.firstname + ' ' + this.lastname + '!';\n};\n\nPerson.prototype.communicate = function () { // overrides the default implementation\n  return 'blah blah blah';\n};\n\n// Person.prototype.getSpecies() is not overriden\n\n// --------------------\n\nvar john = new Person('John', 'Doe');\nconsole.log(john.sayHello()); // Hello, John Doe!\nconsole.log(john.communicate()); // blah blah blah\nconsole.log(john.getSpecies()); // Error: You cannot call an abstract method!\n```\n\n#### ES6\n\nES6 classes are like coherent blocks of methods and they are not hoisted. Thus, contrary to ES5, we must call our `implements` method after the class declaration.\n\n```JavaScript\n// Custom \"implements\" function\nFunction.prototype.implements = function (iface) {\n  if (iface.toString() !== '[object Object]') {\n    throw new Error('Invalid argument. An interface must be an object.');\n  } else {\n    for (let prop in iface) {\n      if (iface.hasOwnProperty(prop)) {\n        if (typeof iface[prop] === 'function' && !(prop in this.prototype)) {\n          this.prototype[prop] = iface[prop];\n        }\n      }\n    }\n  }\n};\n\n// Interface\nconst LivingBeingInterface = {\n  communicate() {\n    throw new Error('You cannot call an abstract method!');\n  },\n  getSpecies() {\n    throw new Error('You cannot call an abstract method!');\n  }\n};\n\n// Class\nclass Person {\n  constructor (firstname, lastname) {\n    this.firstname = firstname;\n    this.lastname = lastname;\n    this.species = 'Homo sapiens';\n  }\n\n  sayHello() {\n    return `Hello, ${this.firstname} ${this.lastname}!`;\n  }\n\n  communicate() { // overrides the default implementation\n    return 'blah blah blah';\n  }\n\n  // Person.prototype.getSpecies() is not overriden\n}\nPerson.implements(LivingBeingInterface); // cool, isn't it?\n\n// --------------------\n\nlet john = new Person('John', 'Doe');\nconsole.log(john.sayHello()); // Hello, John Doe!\nconsole.log(john.communicate()); // blah blah blah\nconsole.log(john.getSpecies()); // Error: You cannot call an abstract method!\n```\n\n---\n\n## Polymorphism\n\nAs you may know, Java is strongly typed. On the contrary, JavaScript is loosely typed. But, in Java, if you create an instance of `Person` that extends `LivingBeing`, this instance is of type `Person` **and** `LivingBeing`. So if you iterate through a collection of `LivingBeing` objects containing people, animals or plants, and call the same method on each object, you will have specific results for each living being thanks to a **dynamic binding**. JavaScript works this way too if we use the **prototype chain** properly.\n\n### ES5\n\nAs an example, we could override the original `Object.prototype.toString()` method for people and dogs.\n\nIn JavaScript, classes and their instances are objects. By default, when we call `toString()` on an object, we get `[object Object]`. `Person` or `Dog` instances are also indirect instances of `LivingBeing`, so we could define several `toString()` methods in the prototype chain.\n\n```JavaScript\nfunction LivingBeing(species) {\n  if (this.constructor === LivingBeing) {\n    throw new Error('You cannot instantiate an abstract class!');\n  }\n  this.species = species;\n}\n\n// Overrides Object.prototype.toString()\nLivingBeing.prototype.toString = function () {\n  // returns the species instead of [object Object]\n  return 'Species: ' + this.species;\n};\n\nfunction Person(firstname, lastname) {\n  LivingBeing.call(this, 'Homo sapiens');\n  this.firstname = firstname;\n  this.lastname = lastname;\n}\nPerson.prototype = Object.create(LivingBeing.prototype);\nPerson.prototype.constructor = Person;\n\nPerson.prototype.sayHello = function () {\n  return 'Hello, ' + this.firstname + ' ' + this.lastname + '!';\n};\n\n// Overrides LivingBeing.prototype.toString()\nPerson.prototype.toString = function () {\n  var str = '\\n';\n  str += 'First name: ' + this.firstname + '\\n';\n  str += 'Last name: ' + this.lastname + '\\n';\n  str += LivingBeing.prototype.toString.call(this); // super.toString()\n  return str; // returns a summary instead of the species\n};\n\nfunction Dog(name) {\n  LivingBeing.call(this, 'Canis lupus');\n  this.name = name;\n}\n\n// Overrides LivingBeing.prototype.toString()\nDog.prototype.toString = function () {\n  var str = '\\n';\n  str += 'Name: ' + this.name + '\\n';\n  str += LivingBeing.prototype.toString.call(this);\n  return str; // returns a summary instead of the species\n};\n\n// --------------------\n\nvar john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), '(' + john.species + ')'); // Hello, John Doe! (Homo sapiens)\n\nvar fido = new Dog('Fido');\nconsole.log(fido.name, '(' + fido.species + ')'); // Fido (Canis lupus)\n\nvar livingBeings = [john, fido];\n\nfor (var i = 0; i < livingBeings.length; i++) {\n  console.log(livingBeings[i].toString());\n}\n\n// First name: John\n// Last name: Doe\n// Species: Homo sapiens\n\n// Name: Fido\n// Species: Canis lupus\n```\n\n### ES6\n\nIt is not so different with ES6, except that we can use classes, string interpolation and a `for...of` loop for convenience:\n\n```JavaScript\nclass LivingBeing {\n  constructor(species) {\n    if (new.target.name === 'LivingBeing') {\n      throw new Error('You cannot instantiate an abstract class!');\n    }\n    this.species = species;\n  }\n\n  toString() { // overrides Object.prototype.toString()\n    // returns the species instead of [object Object]\n    return `Species: ${this.species}`;\n  }\n}\n\nclass Person extends LivingBeing {\n  constructor(firstname, lastname) {\n    super('Homo sapiens');\n    this.firstname = firstname;\n    this.lastname = lastname;\n  }\n\n  sayHello() {\n    return `Hello, ${this.firstname} ${this.lastname}!`;\n  }\n\n  toString() { // overrides LivingBeing.prototype.toString()\n    return `\nFirst name: ${this.firstname}\nLast name: ${this.lastname}\n${super.toString()}`; // returns a summary instead of the species\n  }\n}\n\nclass Dog extends LivingBeing {\n  constructor(name) {\n    super('Canis lupus');\n    this.name = name;\n  }\n\n  toString() { // overrides LivingBeing.prototype.toString()\n    return `\nName: ${this.name}\n${super.toString()}`; // returns a summary instead of the species\n  }\n}\n\n// --------------------\n\nlet john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), `(${john.species})`); // Hello, John Doe! (Homo sapiens)\n\nlet fido = new Dog('Fido');\nconsole.log(fido.name, `(${fido.species})`); // Fido (Canis lupus)\n\nlet livingBeings = [john, fido];\n\nfor (const being of livingBeings) {\n  console.log(being.toString());\n}\n\n// First name: John\n// Last name: Doe\n// Species: Homo sapiens\n\n// Name: Fido\n// Species: Canis lupus\n```\n\n---\n\n## Encapsulation\n\nEncapsulation makes it possible to restrict the access to class members through **access level modifiers** and **getters/setters**.\n\n### Access level modifiers\n\nJava provides useful keywords like `public`, `protected` or `private` to modify access level of class attributes and methods. Unfortunately, JavaScript does not have these access modifiers (they are reserved words but are still unused).\n\n#### ES5\n\nTo reproduce the effect of `public`, `protected` or `private`, we have to play with the **scope chain**, **closures** and **IIFEs** (Immediately-Invoked Function Expressions).\n\n- A **public** member is basically a prototype property.\n- A **protected** member is a simple variable or function declared inside a surrounding function and that can be accessed from `LivingBeing` and `Person`.\n- A **private** member is a simple variable or function declared inside a nested function and that can be accessed from `Person` only.\n\n```JavaScript\nvar Person = (function () { // public class\n  var species = ''; // protected attribute\n\n  function LivingBeing(s) { // protected inner class\n    species = s;\n  }\n\n  var Person = (function () {\n    var firstname = '', // private attribute\n        lastname = ''; // private attribute\n\n    function Person(first, last) { // private inner class\n      LivingBeing.call(this, 'Homo sapiens');\n      firstname = first;\n      lastname = last;\n    }\n    Person.prototype = Object.create(LivingBeing.prototype);\n    Person.prototype.constructor = Person;\n\n    Person.prototype.sayHello = function () { // public method\n      return 'Hello, ' + firstname + ' ' + lastname + '! (' + species + ')';\n    };\n\n    return Person;\n  })();\n\n  return Person;\n})();\n\n// --------------------\n\nvar john = new Person('John', 'Doe');\nconsole.log(john.sayHello()); // Hello, John Doe! (Homo sapiens)\nconsole.log(john.firstname, john.lastname, john.species); // undefined undefined undefined\n```\n\n#### ES6\n\nIt may be surprising, but ES6 classes do not even have access level modifiers. Here we can use arrow functions for convenience:\n\n```JavaScript\nconst Person = (() => { // public class\n  let species = ''; // protected attribute\n\n  class LivingBeing { // protected inner class\n    constructor(s) {\n      species = s;\n    }\n  }\n\n  const Person = (() => {\n    let firstname = '', // private attribute\n        lastname = ''; // private attribute\n\n    class Person extends LivingBeing { // private inner class\n      constructor (first, last) {\n        super('Homo sapiens');\n        firstname = first;\n        lastname = last;\n      }\n\n      sayHello() { // public method\n        return `Hello, ${firstname} ${lastname}! (${species})`;\n      }\n    }\n\n    return Person;\n  })();\n\n  return Person;\n})();\n\n// --------------------\n\nlet john = new Person('John', 'Doe');\nconsole.log(john.sayHello()); // Hello, John Doe! (Homo sapiens)\nconsole.log(john.firstname, john.lastname, john.species); // undefined undefined undefined\n```\n\n### Getters/Setters\n\nWhen some fields are private or protected, they cannot be accessed from the outside. To read them or modify them, we need public methods: **getters** and **setters**.\n\n#### ES5\n\nGetters and setters can be defined with the old (now deprecated) `__defineGetter__` or `__defineSetter__` respectively, but this is much better to create a regular function with `get` or `set` in the name.\n\n```JavaScript\nvar Person = (function () { // public class\n  var species = ''; // protected attribute\n\n  function LivingBeing(s) { // protected inner class\n    species = s;\n  }\n\n  LivingBeing.prototype.getSpecies = function () { // public getter\n    return species;\n  };\n\n  LivingBeing.prototype.setSpecies = function (s) { // public setter\n    species = s;\n  };\n\n  var Person = (function () {\n    var firstname = '', // private attribute\n        lastname = ''; // private attribute\n\n    function Person(first, last) { // private inner class\n      LivingBeing.call(this, 'Homo sapiens');\n      firstname = first;\n      lastname = last;\n    }\n    Person.prototype = Object.create(LivingBeing.prototype);\n    Person.prototype.constructor = Person;\n\n    Person.prototype.sayHello = function () { // public method\n      return 'Hello, ' + firstname + ' ' + lastname + '! (' + species + ')';\n    };\n\n    Person.prototype.getFirstname = function () { // public getter\n      return firstname;\n    };\n\n    Person.prototype.setFirstname = function (first) { // public setter\n      firstname = first;\n    };\n\n    Person.prototype.getLastname = function () { // public getter\n      return lastname;\n    };\n\n    Person.prototype.setLastname = function (last) { // public setter\n      lastname = last;\n    };\n\n    return Person;\n  })();\n\n  return Person;\n})();\n\nvar john = new Person('John', 'Doe');\nconsole.log(john.sayHello()); // Hello, John Doe! (Homo sapiens)\nconsole.log(john.getFirstname(), john.getLastname(), '(' + john.getSpecies() + ')'); // John Doe (Homo sapiens)\n\njohn.setFirstname('Jane');\nconsole.log(john.getFirstname(), john.getLastname()); // Jane Doe\n```\n\n#### ES6\n\n`get` and `set` keywords, which were available in ES5 object literals, are now available in ES6 classes. They can be used like so:\n\n```JavaScript\nconst Person = (() => { // public class\n  let species = ''; // protected attribute\n\n  // Abstract class\n  class LivingBeing { // protected inner class\n    constructor(s) {\n      species = s;\n    }\n\n    get species() { // public getter\n      return species;\n    }\n\n    set species(s) { // public setter\n      species = s;\n    }\n  }\n\n  // Concrete class\n  const Person = (() => {\n    let firstname = '', // private attribute\n        lastname = ''; // private attribute\n\n    class Person extends LivingBeing { // private inner class\n      constructor (first, last) {\n        super('Homo sapiens');\n        firstname = first;\n        lastname = last;\n      }\n\n      sayHello() { // public method\n        return `Hello, ${firstname} ${lastname}! (${species})`;\n      }\n\n      get firstname() { // public getter\n        return firstname;\n      }\n\n      set firstname(first) { // public setter\n        firstname = first;\n      }\n\n      get lastname() { // public getter\n        return lastname;\n      }\n\n      set lastname(last) { // public setter\n        lastname = last;\n      }\n    }\n\n    return Person;\n  })();\n\n  return Person;\n})();\n\nlet john = new Person('John', 'Doe');\nconsole.log(john.sayHello()); // Hello, John Doe! (Homo sapiens)\nconsole.log(john.firstname, john.lastname, `(${john.species})`); // John Doe (Homo sapiens)\n\njohn.firstname = 'Jane';\nconsole.log(john.firstname, john.lastname); // Jane Doe\n```\n\n---\n\n## Back to reality\n\nJavaScript is **NOT** Java. Trying to imitate Java with JavaScript is not necessarily a good idea in real life, but this is extremely interesting for educational purposes.\n\nJavaScript is an object-oriented language (in spite of its prototypal nature), but it is much more flexible and permissive than Java. It does not matter if you do not have a strict class hierarchy. It does not matter if you do not have abstraction. It does not even matter if you do not have a strict encapsulation.\n\nFor Java developers who really want to feel at home with JavaScript, use [TypeScript](https://www.typescriptlang.org/).\n","source":"_posts/What-if-JavaScript-was-a-Java-scripting-language.md","raw":"---\ntitle: What if JavaScript was a Java scripting language?\ndate: 2017-06-08 23:51:28\ncategories:\n  - JavaScript\ntags:\n  - OOP\n  - ES5\n  - ES6\nthumbnail: /images/javascript.png\n---\n\n*Meanwhile, in a parallel universe...*\n\nJavaScript is a scripting language for the Java Platform and JS scripts should strictly apply the key concepts of **object-oriented programming** (OOP).\n\nOur task is to model and implement a simple program that involves living beings. This is of course a vast topic and, for the sake of simplicity, we will not deal with peripheral concepts like generics, synchronized methods, collections or packages. This would bring us too far.\n\n<!-- more -->\n\n---\n\n## Inheritance\n\nJava is a class-based language where inheritance is performed using the `extends` keyword. This is much more complicated in JavaScript...\n\n### ES5\n\nECMAScript 5 does not have built-in classes. JavaScript is a **prototype-based language**, but classes can be emulated thanks to **constructor functions**. Inheritance is possible, but should be done through a manipulation of prototypes:\n\n```JavaScript\n// Parent class\nfunction LivingBeing(species) { // constructor\n  this.species = species; // attribute\n}\n\nLivingBeing.live = function() { // static method\n  return 'Life is life!';\n};\n\n// Child class\nfunction Person(firstname, lastname) { // constructor\n  LivingBeing.call(this, 'Homo sapiens'); // super(\"Homo sapiens\")\n  this.firstname = firstname; // attribute\n  this.lastname = lastname; // attribute\n}\n// extends\nPerson.prototype = Object.create(LivingBeing.prototype);\nPerson.prototype.constructor = Person;\n\nPerson.prototype.sayHello = function () { // instance method\n  return 'Hello, ' + this.firstname + ' ' + this.lastname + '!';\n};\n\n// --------------------\n\nvar anonymousDog = new LivingBeing('Canis lupus');\nconsole.log(anonymousDog.species); // Canis lupus\n\nvar john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), '(' + john.species + ')'); // Hello, John Doe! (Homo sapiens)\n\nconsole.log(LivingBeing.live()); // Life is life!\n```\n\n### ES6\n\nECMAScript 6 brought syntactic sugar to work more easily with so-called classes and inheritance. This new syntax hides the true prototypal nature of JavaScript, but now the language looks much more familiar for Java developers:\n\n```JavaScript\n// Parent class\nclass LivingBeing {\n  constructor(species) {\n    this.species = species; // attribute\n  }\n\n  static live() { // static method\n    return 'Life is life!';\n  }\n}\n\n// Child class\nclass Person extends LivingBeing {\n  constructor(firstname, lastname) {\n    super('Homo sapiens');\n    this.firstname = firstname; // attribute\n    this.lastname = lastname; // attribute\n  }\n\n  sayHello() { // instance method\n    return `Hello, ${this.firstname} ${this.lastname}!`;\n  }\n}\n\n// --------------------\n\nlet anonymousDog = new LivingBeing('Canis lupus');\nconsole.log(anonymousDog.species); // Canis lupus\n\nlet john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), `(${john.species})`); // Hello, John Doe! (Homo sapiens)\n\nconsole.log(LivingBeing.live()); // Life is life!\n```\n\n---\n\n## Composition\n\nIn OOP, a best practice is to favor **composition over inheritance**.\n\n### ES5\n\nComposition in ECMAScript 5 is not so different from composition in Java. A specific class may reference another class using an instance of the latter in one of its properties.\n\n```JavaScript\n// Class to be referenced\nfunction LivingBeing(species) { // constructor\n  this.species = species; // attribute\n}\n\nLivingBeing.live = function() { // static method\n  return 'Life is life!';\n};\n\n// Main class\nfunction Person(firstname, lastname) { // constructor\n  this.livingBeing = new LivingBeing('Homo sapiens'); // attribute (composition)\n  this.firstname = firstname; // attribute\n  this.lastname = lastname; // attribute\n}\n\nPerson.prototype.sayHello = function () { // instance method\n  return 'Hello, ' + this.firstname + ' ' + this.lastname + '!';\n};\n\n// --------------------\n\nvar  anonymousDog = new LivingBeing('Canis lupus');\nconsole.log(anonymousDog.species);\n\nvar john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), '(' + john.livingBeing.species + ')'); // Hello, John Doe! (Homo sapiens)\n\nconsole.log(LivingBeing.live()); // Life is life!\n```\n\n### ES6\n\nComposition in ECMAScript 6 is even closer to Java, thanks to the syntactic sugar that emulates classes natively:\n\n```JavaScript\n// Class to be referenced\nclass LivingBeing {\n  constructor(species) {\n    this.species = species; // attribute\n  }\n\n  static live() {\n    return 'Life is life!';\n  }\n}\n\n// Main class\nclass Person {\n  constructor(firstname, lastname) {\n    this.livingBeing = new LivingBeing('Homo sapiens'); // attribute (composition)\n    this.firstname = firstname; // attribute\n    this.lastname = lastname; // attribute\n  }\n\n  sayHello() {\n    return `Hello, ${this.firstname} ${this.lastname}!`;\n  }\n}\n\n// --------------------\n\nlet anonymousDog = new LivingBeing('Canis lupus');\nconsole.log(anonymousDog.species);\n\nlet john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), `(${john.livingBeing.species})`); // Hello, John Doe (Homo sapiens)\n\nconsole.log(LivingBeing.live()); // Life is life!\n```\n\nComposition works fine here, but conceptually, inheritance is more meaningful for this particular problem.\n\n---\n\n## Abstraction\n\nAbstraction in Java is based on **abstract classes** and **interfaces**. JavaScript does not have a built-in abstraction mechanism, but like classes in ES5, this concept can be emulated.\n\n### Abstract class\n\nAn abstract class is a class that cannot be instantiated, so we cannot create direct objects from an abstract class. In JavaScript, we can prevent instantiation of a particular class using conditions in the constructor.\n\nAn abstract class can contain abstract methods which are methods without implementation. In JavaScript, this can be reproduced quite easily if we declare a prototype method that only throws an error. It will remain \"abstract\" (it will throw an error) as long as it is not redefined in the prototype chain.\n\n#### ES5\n\nTo create an abstract class in ES5 (here `LivingBeing`), the best test to check if the constructor has been called directly with `new` is `this.constructor === LivingBeing`. Be careful to use the right comparison operator because `this.constructor !== LivingBeing` would create (roughly) a **final class** (a class that cannot be extended)!\n\n```JavaScript\n// Abstract class\nfunction LivingBeing(species) {\n  if (this.constructor === LivingBeing) {\n    throw new Error('You cannot instantiate an abstract class!');\n  }\n  this.species = species;\n}\n\nLivingBeing.prototype.communicate = function () { // abstract method\n  throw new Error('You cannot call an abstract method!');\n};\n\n// Concrete class\nfunction Person(firstname, lastname) {\n  LivingBeing.call(this, 'Homo sapiens');\n  this.firstname = firstname;\n  this.lastname = lastname;\n}\nPerson.prototype = Object.create(LivingBeing.prototype);\nPerson.prototype.constructor = Person;\n\nPerson.prototype.sayHello = function () { // concrete method\n  return 'Hello, ' + this.firstname + ' ' + this.lastname + '!';\n};\n\n// --------------------\n\nvar john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), '(' + john.species + ')'); // Hello, John Doe! (Homo sapiens)\n\njohn.communicate(); // Error: Your cannot call an abstract method!\nnew LivingBeing('Canis lupus'); // Error: You cannot instantiate an abstract class!\n```\n\n#### ES6\n\nWith ES6, it is better to use `new.target` like this: `new.target.name === 'LivingBeing'`. Once again, be careful with the comparison operator: `new.target.name !== 'LivingBeing'` would create a final class.\n\n```JavaScript\n// Abstract class\nclass LivingBeing {\n  constructor(species) {\n    if (new.target.name === 'LivingBeing') {\n      throw new Error('You cannot instantiate an abstract class!');\n    }\n    this.species = species;\n  }\n\n  communicate() { // abstract method\n    throw new Error('You cannot call an abstract method!');\n  }\n}\n\n// Concrete class\nclass Person extends LivingBeing {\n  constructor(firstname, lastname) {\n    super('Homo sapiens');\n    this.firstname = firstname;\n    this.lastname = lastname;\n  }\n\n  sayHello() { // concrete method\n    return `Hello, ${this.firstname} ${this.lastname}`;\n  }\n}\n\n// --------------------\n\nlet john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), `(${john.species})`); // Hello, John Doe! (Homo sapiens)\n\njohn.communicate(); // Error: You cannot call an abstract method!\nnew LivingBeing('Canis lupus'); // Error: You cannot instantiate an abstract class!\n```\n\n### Interface\n\nInterfaces in Java are quite close to 100% abstract classes. They contain `public abstract` methods that must be overriden in classes which implement them.\n\n#### ES5\n\nA solution to get interfaces in ES5 is to create a custom `implements` function in `Function.prototype` and use object literals to declare interfaces.\n\nThe custom function must traverse the **own properties** of the interface passed as an argument and test if they exist in the current function instance (presumably a constructor function). If they do not exist, they should be created in the function's prototype. In this case, they remain abstract, meaning that they will throw an error if we try to use them before to override them.\n\n```JavaScript\n// Custom \"implements\" function\nFunction.prototype.implements = function (iface) {\n  if (iface.toString() !== '[object Object]') {\n    throw new Error('Invalid argument. An interface must be an object.');\n  } else {\n    for (var prop in iface) {\n      if (iface.hasOwnProperty(prop)) {\n        if (typeof iface[prop] === 'function' && !(prop in this.prototype)) {\n          this.prototype[prop] = iface[prop];\n        }\n      }\n    }\n  }\n};\n\n// Interface\nvar LivingBeingInterface = {\n  communicate: function () {\n    throw new Error('You cannot call an abstract method!');\n  },\n  getSpecies: function () {\n    throw new Error('You cannot call an abstract method!');\n  }\n};\n\n// Class\nPerson.implements(LivingBeingInterface); // cool, isn't it?\n\nfunction Person(firstname, lastname) {\n  this.firstname = firstname;\n  this.lastname = lastname;\n  this.species = 'Homo sapiens';\n}\n\nPerson.prototype.sayHello = function () {\n  return 'Hello, ' + this.firstname + ' ' + this.lastname + '!';\n};\n\nPerson.prototype.communicate = function () { // overrides the default implementation\n  return 'blah blah blah';\n};\n\n// Person.prototype.getSpecies() is not overriden\n\n// --------------------\n\nvar john = new Person('John', 'Doe');\nconsole.log(john.sayHello()); // Hello, John Doe!\nconsole.log(john.communicate()); // blah blah blah\nconsole.log(john.getSpecies()); // Error: You cannot call an abstract method!\n```\n\n#### ES6\n\nES6 classes are like coherent blocks of methods and they are not hoisted. Thus, contrary to ES5, we must call our `implements` method after the class declaration.\n\n```JavaScript\n// Custom \"implements\" function\nFunction.prototype.implements = function (iface) {\n  if (iface.toString() !== '[object Object]') {\n    throw new Error('Invalid argument. An interface must be an object.');\n  } else {\n    for (let prop in iface) {\n      if (iface.hasOwnProperty(prop)) {\n        if (typeof iface[prop] === 'function' && !(prop in this.prototype)) {\n          this.prototype[prop] = iface[prop];\n        }\n      }\n    }\n  }\n};\n\n// Interface\nconst LivingBeingInterface = {\n  communicate() {\n    throw new Error('You cannot call an abstract method!');\n  },\n  getSpecies() {\n    throw new Error('You cannot call an abstract method!');\n  }\n};\n\n// Class\nclass Person {\n  constructor (firstname, lastname) {\n    this.firstname = firstname;\n    this.lastname = lastname;\n    this.species = 'Homo sapiens';\n  }\n\n  sayHello() {\n    return `Hello, ${this.firstname} ${this.lastname}!`;\n  }\n\n  communicate() { // overrides the default implementation\n    return 'blah blah blah';\n  }\n\n  // Person.prototype.getSpecies() is not overriden\n}\nPerson.implements(LivingBeingInterface); // cool, isn't it?\n\n// --------------------\n\nlet john = new Person('John', 'Doe');\nconsole.log(john.sayHello()); // Hello, John Doe!\nconsole.log(john.communicate()); // blah blah blah\nconsole.log(john.getSpecies()); // Error: You cannot call an abstract method!\n```\n\n---\n\n## Polymorphism\n\nAs you may know, Java is strongly typed. On the contrary, JavaScript is loosely typed. But, in Java, if you create an instance of `Person` that extends `LivingBeing`, this instance is of type `Person` **and** `LivingBeing`. So if you iterate through a collection of `LivingBeing` objects containing people, animals or plants, and call the same method on each object, you will have specific results for each living being thanks to a **dynamic binding**. JavaScript works this way too if we use the **prototype chain** properly.\n\n### ES5\n\nAs an example, we could override the original `Object.prototype.toString()` method for people and dogs.\n\nIn JavaScript, classes and their instances are objects. By default, when we call `toString()` on an object, we get `[object Object]`. `Person` or `Dog` instances are also indirect instances of `LivingBeing`, so we could define several `toString()` methods in the prototype chain.\n\n```JavaScript\nfunction LivingBeing(species) {\n  if (this.constructor === LivingBeing) {\n    throw new Error('You cannot instantiate an abstract class!');\n  }\n  this.species = species;\n}\n\n// Overrides Object.prototype.toString()\nLivingBeing.prototype.toString = function () {\n  // returns the species instead of [object Object]\n  return 'Species: ' + this.species;\n};\n\nfunction Person(firstname, lastname) {\n  LivingBeing.call(this, 'Homo sapiens');\n  this.firstname = firstname;\n  this.lastname = lastname;\n}\nPerson.prototype = Object.create(LivingBeing.prototype);\nPerson.prototype.constructor = Person;\n\nPerson.prototype.sayHello = function () {\n  return 'Hello, ' + this.firstname + ' ' + this.lastname + '!';\n};\n\n// Overrides LivingBeing.prototype.toString()\nPerson.prototype.toString = function () {\n  var str = '\\n';\n  str += 'First name: ' + this.firstname + '\\n';\n  str += 'Last name: ' + this.lastname + '\\n';\n  str += LivingBeing.prototype.toString.call(this); // super.toString()\n  return str; // returns a summary instead of the species\n};\n\nfunction Dog(name) {\n  LivingBeing.call(this, 'Canis lupus');\n  this.name = name;\n}\n\n// Overrides LivingBeing.prototype.toString()\nDog.prototype.toString = function () {\n  var str = '\\n';\n  str += 'Name: ' + this.name + '\\n';\n  str += LivingBeing.prototype.toString.call(this);\n  return str; // returns a summary instead of the species\n};\n\n// --------------------\n\nvar john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), '(' + john.species + ')'); // Hello, John Doe! (Homo sapiens)\n\nvar fido = new Dog('Fido');\nconsole.log(fido.name, '(' + fido.species + ')'); // Fido (Canis lupus)\n\nvar livingBeings = [john, fido];\n\nfor (var i = 0; i < livingBeings.length; i++) {\n  console.log(livingBeings[i].toString());\n}\n\n// First name: John\n// Last name: Doe\n// Species: Homo sapiens\n\n// Name: Fido\n// Species: Canis lupus\n```\n\n### ES6\n\nIt is not so different with ES6, except that we can use classes, string interpolation and a `for...of` loop for convenience:\n\n```JavaScript\nclass LivingBeing {\n  constructor(species) {\n    if (new.target.name === 'LivingBeing') {\n      throw new Error('You cannot instantiate an abstract class!');\n    }\n    this.species = species;\n  }\n\n  toString() { // overrides Object.prototype.toString()\n    // returns the species instead of [object Object]\n    return `Species: ${this.species}`;\n  }\n}\n\nclass Person extends LivingBeing {\n  constructor(firstname, lastname) {\n    super('Homo sapiens');\n    this.firstname = firstname;\n    this.lastname = lastname;\n  }\n\n  sayHello() {\n    return `Hello, ${this.firstname} ${this.lastname}!`;\n  }\n\n  toString() { // overrides LivingBeing.prototype.toString()\n    return `\nFirst name: ${this.firstname}\nLast name: ${this.lastname}\n${super.toString()}`; // returns a summary instead of the species\n  }\n}\n\nclass Dog extends LivingBeing {\n  constructor(name) {\n    super('Canis lupus');\n    this.name = name;\n  }\n\n  toString() { // overrides LivingBeing.prototype.toString()\n    return `\nName: ${this.name}\n${super.toString()}`; // returns a summary instead of the species\n  }\n}\n\n// --------------------\n\nlet john = new Person('John', 'Doe');\nconsole.log(john.sayHello(), `(${john.species})`); // Hello, John Doe! (Homo sapiens)\n\nlet fido = new Dog('Fido');\nconsole.log(fido.name, `(${fido.species})`); // Fido (Canis lupus)\n\nlet livingBeings = [john, fido];\n\nfor (const being of livingBeings) {\n  console.log(being.toString());\n}\n\n// First name: John\n// Last name: Doe\n// Species: Homo sapiens\n\n// Name: Fido\n// Species: Canis lupus\n```\n\n---\n\n## Encapsulation\n\nEncapsulation makes it possible to restrict the access to class members through **access level modifiers** and **getters/setters**.\n\n### Access level modifiers\n\nJava provides useful keywords like `public`, `protected` or `private` to modify access level of class attributes and methods. Unfortunately, JavaScript does not have these access modifiers (they are reserved words but are still unused).\n\n#### ES5\n\nTo reproduce the effect of `public`, `protected` or `private`, we have to play with the **scope chain**, **closures** and **IIFEs** (Immediately-Invoked Function Expressions).\n\n- A **public** member is basically a prototype property.\n- A **protected** member is a simple variable or function declared inside a surrounding function and that can be accessed from `LivingBeing` and `Person`.\n- A **private** member is a simple variable or function declared inside a nested function and that can be accessed from `Person` only.\n\n```JavaScript\nvar Person = (function () { // public class\n  var species = ''; // protected attribute\n\n  function LivingBeing(s) { // protected inner class\n    species = s;\n  }\n\n  var Person = (function () {\n    var firstname = '', // private attribute\n        lastname = ''; // private attribute\n\n    function Person(first, last) { // private inner class\n      LivingBeing.call(this, 'Homo sapiens');\n      firstname = first;\n      lastname = last;\n    }\n    Person.prototype = Object.create(LivingBeing.prototype);\n    Person.prototype.constructor = Person;\n\n    Person.prototype.sayHello = function () { // public method\n      return 'Hello, ' + firstname + ' ' + lastname + '! (' + species + ')';\n    };\n\n    return Person;\n  })();\n\n  return Person;\n})();\n\n// --------------------\n\nvar john = new Person('John', 'Doe');\nconsole.log(john.sayHello()); // Hello, John Doe! (Homo sapiens)\nconsole.log(john.firstname, john.lastname, john.species); // undefined undefined undefined\n```\n\n#### ES6\n\nIt may be surprising, but ES6 classes do not even have access level modifiers. Here we can use arrow functions for convenience:\n\n```JavaScript\nconst Person = (() => { // public class\n  let species = ''; // protected attribute\n\n  class LivingBeing { // protected inner class\n    constructor(s) {\n      species = s;\n    }\n  }\n\n  const Person = (() => {\n    let firstname = '', // private attribute\n        lastname = ''; // private attribute\n\n    class Person extends LivingBeing { // private inner class\n      constructor (first, last) {\n        super('Homo sapiens');\n        firstname = first;\n        lastname = last;\n      }\n\n      sayHello() { // public method\n        return `Hello, ${firstname} ${lastname}! (${species})`;\n      }\n    }\n\n    return Person;\n  })();\n\n  return Person;\n})();\n\n// --------------------\n\nlet john = new Person('John', 'Doe');\nconsole.log(john.sayHello()); // Hello, John Doe! (Homo sapiens)\nconsole.log(john.firstname, john.lastname, john.species); // undefined undefined undefined\n```\n\n### Getters/Setters\n\nWhen some fields are private or protected, they cannot be accessed from the outside. To read them or modify them, we need public methods: **getters** and **setters**.\n\n#### ES5\n\nGetters and setters can be defined with the old (now deprecated) `__defineGetter__` or `__defineSetter__` respectively, but this is much better to create a regular function with `get` or `set` in the name.\n\n```JavaScript\nvar Person = (function () { // public class\n  var species = ''; // protected attribute\n\n  function LivingBeing(s) { // protected inner class\n    species = s;\n  }\n\n  LivingBeing.prototype.getSpecies = function () { // public getter\n    return species;\n  };\n\n  LivingBeing.prototype.setSpecies = function (s) { // public setter\n    species = s;\n  };\n\n  var Person = (function () {\n    var firstname = '', // private attribute\n        lastname = ''; // private attribute\n\n    function Person(first, last) { // private inner class\n      LivingBeing.call(this, 'Homo sapiens');\n      firstname = first;\n      lastname = last;\n    }\n    Person.prototype = Object.create(LivingBeing.prototype);\n    Person.prototype.constructor = Person;\n\n    Person.prototype.sayHello = function () { // public method\n      return 'Hello, ' + firstname + ' ' + lastname + '! (' + species + ')';\n    };\n\n    Person.prototype.getFirstname = function () { // public getter\n      return firstname;\n    };\n\n    Person.prototype.setFirstname = function (first) { // public setter\n      firstname = first;\n    };\n\n    Person.prototype.getLastname = function () { // public getter\n      return lastname;\n    };\n\n    Person.prototype.setLastname = function (last) { // public setter\n      lastname = last;\n    };\n\n    return Person;\n  })();\n\n  return Person;\n})();\n\nvar john = new Person('John', 'Doe');\nconsole.log(john.sayHello()); // Hello, John Doe! (Homo sapiens)\nconsole.log(john.getFirstname(), john.getLastname(), '(' + john.getSpecies() + ')'); // John Doe (Homo sapiens)\n\njohn.setFirstname('Jane');\nconsole.log(john.getFirstname(), john.getLastname()); // Jane Doe\n```\n\n#### ES6\n\n`get` and `set` keywords, which were available in ES5 object literals, are now available in ES6 classes. They can be used like so:\n\n```JavaScript\nconst Person = (() => { // public class\n  let species = ''; // protected attribute\n\n  // Abstract class\n  class LivingBeing { // protected inner class\n    constructor(s) {\n      species = s;\n    }\n\n    get species() { // public getter\n      return species;\n    }\n\n    set species(s) { // public setter\n      species = s;\n    }\n  }\n\n  // Concrete class\n  const Person = (() => {\n    let firstname = '', // private attribute\n        lastname = ''; // private attribute\n\n    class Person extends LivingBeing { // private inner class\n      constructor (first, last) {\n        super('Homo sapiens');\n        firstname = first;\n        lastname = last;\n      }\n\n      sayHello() { // public method\n        return `Hello, ${firstname} ${lastname}! (${species})`;\n      }\n\n      get firstname() { // public getter\n        return firstname;\n      }\n\n      set firstname(first) { // public setter\n        firstname = first;\n      }\n\n      get lastname() { // public getter\n        return lastname;\n      }\n\n      set lastname(last) { // public setter\n        lastname = last;\n      }\n    }\n\n    return Person;\n  })();\n\n  return Person;\n})();\n\nlet john = new Person('John', 'Doe');\nconsole.log(john.sayHello()); // Hello, John Doe! (Homo sapiens)\nconsole.log(john.firstname, john.lastname, `(${john.species})`); // John Doe (Homo sapiens)\n\njohn.firstname = 'Jane';\nconsole.log(john.firstname, john.lastname); // Jane Doe\n```\n\n---\n\n## Back to reality\n\nJavaScript is **NOT** Java. Trying to imitate Java with JavaScript is not necessarily a good idea in real life, but this is extremely interesting for educational purposes.\n\nJavaScript is an object-oriented language (in spite of its prototypal nature), but it is much more flexible and permissive than Java. It does not matter if you do not have a strict class hierarchy. It does not matter if you do not have abstraction. It does not even matter if you do not have a strict encapsulation.\n\nFor Java developers who really want to feel at home with JavaScript, use [TypeScript](https://www.typescriptlang.org/).\n","slug":"What-if-JavaScript-was-a-Java-scripting-language","published":1,"updated":"2017-06-10T21:56:53.180Z","_id":"cj3oylqu10006o3c65p6rmnrx","comments":1,"layout":"post","photos":[],"link":"","content":"<p><em>Meanwhile, in a parallel universe…</em></p>\n<p>JavaScript is a scripting language for the Java Platform and JS scripts should strictly apply the key concepts of <strong>object-oriented programming</strong> (OOP).</p>\n<p>Our task is to model and implement a simple program that involves living beings. This is of course a vast topic and, for the sake of simplicity, we will not deal with peripheral concepts like generics, synchronized methods, collections or packages. This would bring us too far.</p>\n<a id=\"more\"></a>\n<hr>\n<h2 id=\"Inheritance\"><a href=\"#Inheritance\" class=\"headerlink\" title=\"Inheritance\"></a>Inheritance</h2><p>Java is a class-based language where inheritance is performed using the <code>extends</code> keyword. This is much more complicated in JavaScript…</p>\n<h3 id=\"ES5\"><a href=\"#ES5\" class=\"headerlink\" title=\"ES5\"></a>ES5</h3><p>ECMAScript 5 does not have built-in classes. JavaScript is a <strong>prototype-based language</strong>, but classes can be emulated thanks to <strong>constructor functions</strong>. Inheritance is possible, but should be done through a manipulation of prototypes:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Parent class</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LivingBeing</span>(<span class=\"params\">species</span>) </span>&#123; <span class=\"comment\">// constructor</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.species = species; <span class=\"comment\">// attribute</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">LivingBeing.live = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// static method</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Life is life!'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Child class</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">firstname, lastname</span>) </span>&#123; <span class=\"comment\">// constructor</span></div><div class=\"line\">  LivingBeing.call(<span class=\"keyword\">this</span>, <span class=\"string\">'Homo sapiens'</span>); <span class=\"comment\">// super(\"Homo sapiens\")</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.firstname = firstname; <span class=\"comment\">// attribute</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.lastname = lastname; <span class=\"comment\">// attribute</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// extends</span></div><div class=\"line\">Person.prototype = <span class=\"built_in\">Object</span>.create(LivingBeing.prototype);</div><div class=\"line\">Person.prototype.constructor = Person;</div><div class=\"line\"></div><div class=\"line\">Person.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// instance method</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Hello, '</span> + <span class=\"keyword\">this</span>.firstname + <span class=\"string\">' '</span> + <span class=\"keyword\">this</span>.lastname + <span class=\"string\">'!'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> anonymousDog = <span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Canis lupus'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(anonymousDog.species); <span class=\"comment\">// Canis lupus</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">'('</span> + john.species + <span class=\"string\">')'</span>); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(LivingBeing.live()); <span class=\"comment\">// Life is life!</span></div></pre></td></tr></table></figure>\n<h3 id=\"ES6\"><a href=\"#ES6\" class=\"headerlink\" title=\"ES6\"></a>ES6</h3><p>ECMAScript 6 brought syntactic sugar to work more easily with so-called classes and inheritance. This new syntax hides the true prototypal nature of JavaScript, but now the language looks much more familiar for Java developers:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Parent class</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(species) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.species = species; <span class=\"comment\">// attribute</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">static</span> live() &#123; <span class=\"comment\">// static method</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Life is life!'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Child class</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> <span class=\"keyword\">extends</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(firstname, lastname) &#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(<span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">    <span class=\"keyword\">this</span>.firstname = firstname; <span class=\"comment\">// attribute</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.lastname = lastname; <span class=\"comment\">// attribute</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  sayHello() &#123; <span class=\"comment\">// instance method</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.firstname&#125;</span> <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.lastname&#125;</span>!`</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> anonymousDog = <span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Canis lupus'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(anonymousDog.species); <span class=\"comment\">// Canis lupus</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">`(<span class=\"subst\">$&#123;john.species&#125;</span>)`</span>); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(LivingBeing.live()); <span class=\"comment\">// Life is life!</span></div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Composition\"><a href=\"#Composition\" class=\"headerlink\" title=\"Composition\"></a>Composition</h2><p>In OOP, a best practice is to favor <strong>composition over inheritance</strong>.</p>\n<h3 id=\"ES5-1\"><a href=\"#ES5-1\" class=\"headerlink\" title=\"ES5\"></a>ES5</h3><p>Composition in ECMAScript 5 is not so different from composition in Java. A specific class may reference another class using an instance of the latter in one of its properties.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Class to be referenced</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LivingBeing</span>(<span class=\"params\">species</span>) </span>&#123; <span class=\"comment\">// constructor</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.species = species; <span class=\"comment\">// attribute</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">LivingBeing.live = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// static method</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Life is life!'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Main class</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">firstname, lastname</span>) </span>&#123; <span class=\"comment\">// constructor</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.livingBeing = <span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Homo sapiens'</span>); <span class=\"comment\">// attribute (composition)</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.firstname = firstname; <span class=\"comment\">// attribute</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.lastname = lastname; <span class=\"comment\">// attribute</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">Person.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// instance method</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Hello, '</span> + <span class=\"keyword\">this</span>.firstname + <span class=\"string\">' '</span> + <span class=\"keyword\">this</span>.lastname + <span class=\"string\">'!'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span>  anonymousDog = <span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Canis lupus'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(anonymousDog.species);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">'('</span> + john.livingBeing.species + <span class=\"string\">')'</span>); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(LivingBeing.live()); <span class=\"comment\">// Life is life!</span></div></pre></td></tr></table></figure>\n<h3 id=\"ES6-1\"><a href=\"#ES6-1\" class=\"headerlink\" title=\"ES6\"></a>ES6</h3><p>Composition in ECMAScript 6 is even closer to Java, thanks to the syntactic sugar that emulates classes natively:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Class to be referenced</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(species) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.species = species; <span class=\"comment\">// attribute</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">static</span> live() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Life is life!'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Main class</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(firstname, lastname) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.livingBeing = <span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Homo sapiens'</span>); <span class=\"comment\">// attribute (composition)</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.firstname = firstname; <span class=\"comment\">// attribute</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.lastname = lastname; <span class=\"comment\">// attribute</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  sayHello() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.firstname&#125;</span> <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.lastname&#125;</span>!`</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> anonymousDog = <span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Canis lupus'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(anonymousDog.species);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">`(<span class=\"subst\">$&#123;john.livingBeing.species&#125;</span>)`</span>); <span class=\"comment\">// Hello, John Doe (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(LivingBeing.live()); <span class=\"comment\">// Life is life!</span></div></pre></td></tr></table></figure>\n<p>Composition works fine here, but conceptually, inheritance is more meaningful for this particular problem.</p>\n<hr>\n<h2 id=\"Abstraction\"><a href=\"#Abstraction\" class=\"headerlink\" title=\"Abstraction\"></a>Abstraction</h2><p>Abstraction in Java is based on <strong>abstract classes</strong> and <strong>interfaces</strong>. JavaScript does not have a built-in abstraction mechanism, but like classes in ES5, this concept can be emulated.</p>\n<h3 id=\"Abstract-class\"><a href=\"#Abstract-class\" class=\"headerlink\" title=\"Abstract class\"></a>Abstract class</h3><p>An abstract class is a class that cannot be instantiated, so we cannot create direct objects from an abstract class. In JavaScript, we can prevent instantiation of a particular class using conditions in the constructor.</p>\n<p>An abstract class can contain abstract methods which are methods without implementation. In JavaScript, this can be reproduced quite easily if we declare a prototype method that only throws an error. It will remain “abstract” (it will throw an error) as long as it is not redefined in the prototype chain.</p>\n<h4 id=\"ES5-2\"><a href=\"#ES5-2\" class=\"headerlink\" title=\"ES5\"></a>ES5</h4><p>To create an abstract class in ES5 (here <code>LivingBeing</code>), the best test to check if the constructor has been called directly with <code>new</code> is <code>this.constructor === LivingBeing</code>. Be careful to use the right comparison operator because <code>this.constructor !== LivingBeing</code> would create (roughly) a <strong>final class</strong> (a class that cannot be extended)!</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Abstract class</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LivingBeing</span>(<span class=\"params\">species</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.constructor === LivingBeing) &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot instantiate an abstract class!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">this</span>.species = species;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">LivingBeing.prototype.communicate = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// abstract method</span></div><div class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot call an abstract method!'</span>);</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Concrete class</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">firstname, lastname</span>) </span>&#123;</div><div class=\"line\">  LivingBeing.call(<span class=\"keyword\">this</span>, <span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">  <span class=\"keyword\">this</span>.firstname = firstname;</div><div class=\"line\">  <span class=\"keyword\">this</span>.lastname = lastname;</div><div class=\"line\">&#125;</div><div class=\"line\">Person.prototype = <span class=\"built_in\">Object</span>.create(LivingBeing.prototype);</div><div class=\"line\">Person.prototype.constructor = Person;</div><div class=\"line\"></div><div class=\"line\">Person.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// concrete method</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Hello, '</span> + <span class=\"keyword\">this</span>.firstname + <span class=\"string\">' '</span> + <span class=\"keyword\">this</span>.lastname + <span class=\"string\">'!'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">'('</span> + john.species + <span class=\"string\">')'</span>); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\">john.communicate(); <span class=\"comment\">// Error: Your cannot call an abstract method!</span></div><div class=\"line\"><span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Canis lupus'</span>); <span class=\"comment\">// Error: You cannot instantiate an abstract class!</span></div></pre></td></tr></table></figure>\n<h4 id=\"ES6-2\"><a href=\"#ES6-2\" class=\"headerlink\" title=\"ES6\"></a>ES6</h4><p>With ES6, it is better to use <code>new.target</code> like this: <code>new.target.name === &#39;LivingBeing&#39;</code>. Once again, be careful with the comparison operator: <code>new.target.name !== &#39;LivingBeing&#39;</code> would create a final class.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Abstract class</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(species) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">new</span>.target.name === <span class=\"string\">'LivingBeing'</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot instantiate an abstract class!'</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">this</span>.species = species;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  communicate() &#123; <span class=\"comment\">// abstract method</span></div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot call an abstract method!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Concrete class</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> <span class=\"keyword\">extends</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(firstname, lastname) &#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(<span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">    <span class=\"keyword\">this</span>.firstname = firstname;</div><div class=\"line\">    <span class=\"keyword\">this</span>.lastname = lastname;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  sayHello() &#123; <span class=\"comment\">// concrete method</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.firstname&#125;</span> <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.lastname&#125;</span>`</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">`(<span class=\"subst\">$&#123;john.species&#125;</span>)`</span>); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\">john.communicate(); <span class=\"comment\">// Error: You cannot call an abstract method!</span></div><div class=\"line\"><span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Canis lupus'</span>); <span class=\"comment\">// Error: You cannot instantiate an abstract class!</span></div></pre></td></tr></table></figure>\n<h3 id=\"Interface\"><a href=\"#Interface\" class=\"headerlink\" title=\"Interface\"></a>Interface</h3><p>Interfaces in Java are quite close to 100% abstract classes. They contain <code>public abstract</code> methods that must be overriden in classes which implement them.</p>\n<h4 id=\"ES5-3\"><a href=\"#ES5-3\" class=\"headerlink\" title=\"ES5\"></a>ES5</h4><p>A solution to get interfaces in ES5 is to create a custom <code>implements</code> function in <code>Function.prototype</code> and use object literals to declare interfaces.</p>\n<p>The custom function must traverse the <strong>own properties</strong> of the interface passed as an argument and test if they exist in the current function instance (presumably a constructor function). If they do not exist, they should be created in the function’s prototype. In this case, they remain abstract, meaning that they will throw an error if we try to use them before to override them.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Custom \"implements\" function</span></div><div class=\"line\"><span class=\"built_in\">Function</span>.prototype.implements = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">iface</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (iface.toString() !== <span class=\"string\">'[object Object]'</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Invalid argument. An interface must be an object.'</span>);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> prop <span class=\"keyword\">in</span> iface) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (iface.hasOwnProperty(prop)) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> iface[prop] === <span class=\"string\">'function'</span> &amp;&amp; !(prop <span class=\"keyword\">in</span> <span class=\"keyword\">this</span>.prototype)) &#123;</div><div class=\"line\">          <span class=\"keyword\">this</span>.prototype[prop] = iface[prop];</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Interface</span></div><div class=\"line\"><span class=\"keyword\">var</span> LivingBeingInterface = &#123;</div><div class=\"line\">  <span class=\"attr\">communicate</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot call an abstract method!'</span>);</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">getSpecies</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot call an abstract method!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Class</span></div><div class=\"line\">Person.implements(LivingBeingInterface); <span class=\"comment\">// cool, isn't it?</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">firstname, lastname</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.firstname = firstname;</div><div class=\"line\">  <span class=\"keyword\">this</span>.lastname = lastname;</div><div class=\"line\">  <span class=\"keyword\">this</span>.species = <span class=\"string\">'Homo sapiens'</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">Person.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Hello, '</span> + <span class=\"keyword\">this</span>.firstname + <span class=\"string\">' '</span> + <span class=\"keyword\">this</span>.lastname + <span class=\"string\">'!'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">Person.prototype.communicate = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// overrides the default implementation</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'blah blah blah'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Person.prototype.getSpecies() is not overriden</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello()); <span class=\"comment\">// Hello, John Doe!</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.communicate()); <span class=\"comment\">// blah blah blah</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.getSpecies()); <span class=\"comment\">// Error: You cannot call an abstract method!</span></div></pre></td></tr></table></figure>\n<h4 id=\"ES6-3\"><a href=\"#ES6-3\" class=\"headerlink\" title=\"ES6\"></a>ES6</h4><p>ES6 classes are like coherent blocks of methods and they are not hoisted. Thus, contrary to ES5, we must call our <code>implements</code> method after the class declaration.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Custom \"implements\" function</span></div><div class=\"line\"><span class=\"built_in\">Function</span>.prototype.implements = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">iface</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (iface.toString() !== <span class=\"string\">'[object Object]'</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Invalid argument. An interface must be an object.'</span>);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> prop <span class=\"keyword\">in</span> iface) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (iface.hasOwnProperty(prop)) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> iface[prop] === <span class=\"string\">'function'</span> &amp;&amp; !(prop <span class=\"keyword\">in</span> <span class=\"keyword\">this</span>.prototype)) &#123;</div><div class=\"line\">          <span class=\"keyword\">this</span>.prototype[prop] = iface[prop];</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Interface</span></div><div class=\"line\"><span class=\"keyword\">const</span> LivingBeingInterface = &#123;</div><div class=\"line\">  communicate() &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot call an abstract method!'</span>);</div><div class=\"line\">  &#125;,</div><div class=\"line\">  getSpecies() &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot call an abstract method!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Class</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span> (firstname, lastname) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.firstname = firstname;</div><div class=\"line\">    <span class=\"keyword\">this</span>.lastname = lastname;</div><div class=\"line\">    <span class=\"keyword\">this</span>.species = <span class=\"string\">'Homo sapiens'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  sayHello() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.firstname&#125;</span> <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.lastname&#125;</span>!`</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  communicate() &#123; <span class=\"comment\">// overrides the default implementation</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'blah blah blah'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Person.prototype.getSpecies() is not overriden</span></div><div class=\"line\">&#125;</div><div class=\"line\">Person.implements(LivingBeingInterface); <span class=\"comment\">// cool, isn't it?</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello()); <span class=\"comment\">// Hello, John Doe!</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.communicate()); <span class=\"comment\">// blah blah blah</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.getSpecies()); <span class=\"comment\">// Error: You cannot call an abstract method!</span></div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Polymorphism\"><a href=\"#Polymorphism\" class=\"headerlink\" title=\"Polymorphism\"></a>Polymorphism</h2><p>As you may know, Java is strongly typed. On the contrary, JavaScript is loosely typed. But, in Java, if you create an instance of <code>Person</code> that extends <code>LivingBeing</code>, this instance is of type <code>Person</code> <strong>and</strong> <code>LivingBeing</code>. So if you iterate through a collection of <code>LivingBeing</code> objects containing people, animals or plants, and call the same method on each object, you will have specific results for each living being thanks to a <strong>dynamic binding</strong>. JavaScript works this way too if we use the <strong>prototype chain</strong> properly.</p>\n<h3 id=\"ES5-4\"><a href=\"#ES5-4\" class=\"headerlink\" title=\"ES5\"></a>ES5</h3><p>As an example, we could override the original <code>Object.prototype.toString()</code> method for people and dogs.</p>\n<p>In JavaScript, classes and their instances are objects. By default, when we call <code>toString()</code> on an object, we get <code>[object Object]</code>. <code>Person</code> or <code>Dog</code> instances are also indirect instances of <code>LivingBeing</code>, so we could define several <code>toString()</code> methods in the prototype chain.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LivingBeing</span>(<span class=\"params\">species</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.constructor === LivingBeing) &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot instantiate an abstract class!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">this</span>.species = species;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Overrides Object.prototype.toString()</span></div><div class=\"line\">LivingBeing.prototype.toString = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// returns the species instead of [object Object]</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Species: '</span> + <span class=\"keyword\">this</span>.species;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">firstname, lastname</span>) </span>&#123;</div><div class=\"line\">  LivingBeing.call(<span class=\"keyword\">this</span>, <span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">  <span class=\"keyword\">this</span>.firstname = firstname;</div><div class=\"line\">  <span class=\"keyword\">this</span>.lastname = lastname;</div><div class=\"line\">&#125;</div><div class=\"line\">Person.prototype = <span class=\"built_in\">Object</span>.create(LivingBeing.prototype);</div><div class=\"line\">Person.prototype.constructor = Person;</div><div class=\"line\"></div><div class=\"line\">Person.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Hello, '</span> + <span class=\"keyword\">this</span>.firstname + <span class=\"string\">' '</span> + <span class=\"keyword\">this</span>.lastname + <span class=\"string\">'!'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Overrides LivingBeing.prototype.toString()</span></div><div class=\"line\">Person.prototype.toString = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> str = <span class=\"string\">'\\n'</span>;</div><div class=\"line\">  str += <span class=\"string\">'First name: '</span> + <span class=\"keyword\">this</span>.firstname + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">  str += <span class=\"string\">'Last name: '</span> + <span class=\"keyword\">this</span>.lastname + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">  str += LivingBeing.prototype.toString.call(<span class=\"keyword\">this</span>); <span class=\"comment\">// super.toString()</span></div><div class=\"line\">  <span class=\"keyword\">return</span> str; <span class=\"comment\">// returns a summary instead of the species</span></div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Dog</span>(<span class=\"params\">name</span>) </span>&#123;</div><div class=\"line\">  LivingBeing.call(<span class=\"keyword\">this</span>, <span class=\"string\">'Canis lupus'</span>);</div><div class=\"line\">  <span class=\"keyword\">this</span>.name = name;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Overrides LivingBeing.prototype.toString()</span></div><div class=\"line\">Dog.prototype.toString = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> str = <span class=\"string\">'\\n'</span>;</div><div class=\"line\">  str += <span class=\"string\">'Name: '</span> + <span class=\"keyword\">this</span>.name + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">  str += LivingBeing.prototype.toString.call(<span class=\"keyword\">this</span>);</div><div class=\"line\">  <span class=\"keyword\">return</span> str; <span class=\"comment\">// returns a summary instead of the species</span></div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">'('</span> + john.species + <span class=\"string\">')'</span>); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> fido = <span class=\"keyword\">new</span> Dog(<span class=\"string\">'Fido'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(fido.name, <span class=\"string\">'('</span> + fido.species + <span class=\"string\">')'</span>); <span class=\"comment\">// Fido (Canis lupus)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> livingBeings = [john, fido];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; livingBeings.length; i++) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(livingBeings[i].toString());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// First name: John</span></div><div class=\"line\"><span class=\"comment\">// Last name: Doe</span></div><div class=\"line\"><span class=\"comment\">// Species: Homo sapiens</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Name: Fido</span></div><div class=\"line\"><span class=\"comment\">// Species: Canis lupus</span></div></pre></td></tr></table></figure>\n<h3 id=\"ES6-4\"><a href=\"#ES6-4\" class=\"headerlink\" title=\"ES6\"></a>ES6</h3><p>It is not so different with ES6, except that we can use classes, string interpolation and a <code>for...of</code> loop for convenience:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(species) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">new</span>.target.name === <span class=\"string\">'LivingBeing'</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot instantiate an abstract class!'</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">this</span>.species = species;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  toString() &#123; <span class=\"comment\">// overrides Object.prototype.toString()</span></div><div class=\"line\">    <span class=\"comment\">// returns the species instead of [object Object]</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Species: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.species&#125;</span>`</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> <span class=\"keyword\">extends</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(firstname, lastname) &#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(<span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">    <span class=\"keyword\">this</span>.firstname = firstname;</div><div class=\"line\">    <span class=\"keyword\">this</span>.lastname = lastname;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  sayHello() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.firstname&#125;</span> <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.lastname&#125;</span>!`</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  toString() &#123; <span class=\"comment\">// overrides LivingBeing.prototype.toString()</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`</span></div><div class=\"line\">First name: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.firstname&#125;</span></div><div class=\"line\">Last name: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.lastname&#125;</span></div><div class=\"line\"><span class=\"subst\">$&#123;<span class=\"keyword\">super</span>.toString()&#125;</span>`; <span class=\"comment\">// returns a summary instead of the species</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> <span class=\"keyword\">extends</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(name) &#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(<span class=\"string\">'Canis lupus'</span>);</div><div class=\"line\">    <span class=\"keyword\">this</span>.name = name;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  toString() &#123; <span class=\"comment\">// overrides LivingBeing.prototype.toString()</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`</span></div><div class=\"line\">Name: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.name&#125;</span></div><div class=\"line\"><span class=\"subst\">$&#123;<span class=\"keyword\">super</span>.toString()&#125;</span>`; <span class=\"comment\">// returns a summary instead of the species</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">`(<span class=\"subst\">$&#123;john.species&#125;</span>)`</span>); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> fido = <span class=\"keyword\">new</span> Dog(<span class=\"string\">'Fido'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(fido.name, <span class=\"string\">`(<span class=\"subst\">$&#123;fido.species&#125;</span>)`</span>); <span class=\"comment\">// Fido (Canis lupus)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> livingBeings = [john, fido];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> being <span class=\"keyword\">of</span> livingBeings) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(being.toString());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// First name: John</span></div><div class=\"line\"><span class=\"comment\">// Last name: Doe</span></div><div class=\"line\"><span class=\"comment\">// Species: Homo sapiens</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Name: Fido</span></div><div class=\"line\"><span class=\"comment\">// Species: Canis lupus</span></div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Encapsulation\"><a href=\"#Encapsulation\" class=\"headerlink\" title=\"Encapsulation\"></a>Encapsulation</h2><p>Encapsulation makes it possible to restrict the access to class members through <strong>access level modifiers</strong> and <strong>getters/setters</strong>.</p>\n<h3 id=\"Access-level-modifiers\"><a href=\"#Access-level-modifiers\" class=\"headerlink\" title=\"Access level modifiers\"></a>Access level modifiers</h3><p>Java provides useful keywords like <code>public</code>, <code>protected</code> or <code>private</code> to modify access level of class attributes and methods. Unfortunately, JavaScript does not have these access modifiers (they are reserved words but are still unused).</p>\n<h4 id=\"ES5-5\"><a href=\"#ES5-5\" class=\"headerlink\" title=\"ES5\"></a>ES5</h4><p>To reproduce the effect of <code>public</code>, <code>protected</code> or <code>private</code>, we have to play with the <strong>scope chain</strong>, <strong>closures</strong> and <strong>IIFEs</strong> (Immediately-Invoked Function Expressions).</p>\n<ul>\n<li>A <strong>public</strong> member is basically a prototype property.</li>\n<li>A <strong>protected</strong> member is a simple variable or function declared inside a surrounding function and that can be accessed from <code>LivingBeing</code> and <code>Person</code>.</li>\n<li>A <strong>private</strong> member is a simple variable or function declared inside a nested function and that can be accessed from <code>Person</code> only.</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> Person = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public class</span></div><div class=\"line\">  <span class=\"keyword\">var</span> species = <span class=\"string\">''</span>; <span class=\"comment\">// protected attribute</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LivingBeing</span>(<span class=\"params\">s</span>) </span>&#123; <span class=\"comment\">// protected inner class</span></div><div class=\"line\">    species = s;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> Person = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> firstname = <span class=\"string\">''</span>, <span class=\"comment\">// private attribute</span></div><div class=\"line\">        lastname = <span class=\"string\">''</span>; <span class=\"comment\">// private attribute</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">first, last</span>) </span>&#123; <span class=\"comment\">// private inner class</span></div><div class=\"line\">      LivingBeing.call(<span class=\"keyword\">this</span>, <span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">      firstname = first;</div><div class=\"line\">      lastname = last;</div><div class=\"line\">    &#125;</div><div class=\"line\">    Person.prototype = <span class=\"built_in\">Object</span>.create(LivingBeing.prototype);</div><div class=\"line\">    Person.prototype.constructor = Person;</div><div class=\"line\"></div><div class=\"line\">    Person.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public method</span></div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'Hello, '</span> + firstname + <span class=\"string\">' '</span> + lastname + <span class=\"string\">'! ('</span> + species + <span class=\"string\">')'</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> Person;</div><div class=\"line\">  &#125;)();</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> Person;</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello()); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.firstname, john.lastname, john.species); <span class=\"comment\">// undefined undefined undefined</span></div></pre></td></tr></table></figure>\n<h4 id=\"ES6-5\"><a href=\"#ES6-5\" class=\"headerlink\" title=\"ES6\"></a>ES6</h4><p>It may be surprising, but ES6 classes do not even have access level modifiers. Here we can use arrow functions for convenience:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> Person = <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123; <span class=\"comment\">// public class</span></div><div class=\"line\">  <span class=\"keyword\">let</span> species = <span class=\"string\">''</span>; <span class=\"comment\">// protected attribute</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LivingBeing</span> </span>&#123; <span class=\"comment\">// protected inner class</span></div><div class=\"line\">    <span class=\"keyword\">constructor</span>(s) &#123;</div><div class=\"line\">      species = s;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">const</span> Person = <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> firstname = <span class=\"string\">''</span>, <span class=\"comment\">// private attribute</span></div><div class=\"line\">        lastname = <span class=\"string\">''</span>; <span class=\"comment\">// private attribute</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> <span class=\"keyword\">extends</span> <span class=\"title\">LivingBeing</span> </span>&#123; <span class=\"comment\">// private inner class</span></div><div class=\"line\">      <span class=\"keyword\">constructor</span> (first, last) &#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(<span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">        firstname = first;</div><div class=\"line\">        lastname = last;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      sayHello() &#123; <span class=\"comment\">// public method</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;firstname&#125;</span> <span class=\"subst\">$&#123;lastname&#125;</span>! (<span class=\"subst\">$&#123;species&#125;</span>)`</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> Person;</div><div class=\"line\">  &#125;)();</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> Person;</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello()); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.firstname, john.lastname, john.species); <span class=\"comment\">// undefined undefined undefined</span></div></pre></td></tr></table></figure>\n<h3 id=\"Getters-Setters\"><a href=\"#Getters-Setters\" class=\"headerlink\" title=\"Getters/Setters\"></a>Getters/Setters</h3><p>When some fields are private or protected, they cannot be accessed from the outside. To read them or modify them, we need public methods: <strong>getters</strong> and <strong>setters</strong>.</p>\n<h4 id=\"ES5-6\"><a href=\"#ES5-6\" class=\"headerlink\" title=\"ES5\"></a>ES5</h4><p>Getters and setters can be defined with the old (now deprecated) <code>__defineGetter__</code> or <code>__defineSetter__</code> respectively, but this is much better to create a regular function with <code>get</code> or <code>set</code> in the name.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> Person = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public class</span></div><div class=\"line\">  <span class=\"keyword\">var</span> species = <span class=\"string\">''</span>; <span class=\"comment\">// protected attribute</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LivingBeing</span>(<span class=\"params\">s</span>) </span>&#123; <span class=\"comment\">// protected inner class</span></div><div class=\"line\">    species = s;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  LivingBeing.prototype.getSpecies = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public getter</span></div><div class=\"line\">    <span class=\"keyword\">return</span> species;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  LivingBeing.prototype.setSpecies = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">s</span>) </span>&#123; <span class=\"comment\">// public setter</span></div><div class=\"line\">    species = s;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> Person = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> firstname = <span class=\"string\">''</span>, <span class=\"comment\">// private attribute</span></div><div class=\"line\">        lastname = <span class=\"string\">''</span>; <span class=\"comment\">// private attribute</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">first, last</span>) </span>&#123; <span class=\"comment\">// private inner class</span></div><div class=\"line\">      LivingBeing.call(<span class=\"keyword\">this</span>, <span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">      firstname = first;</div><div class=\"line\">      lastname = last;</div><div class=\"line\">    &#125;</div><div class=\"line\">    Person.prototype = <span class=\"built_in\">Object</span>.create(LivingBeing.prototype);</div><div class=\"line\">    Person.prototype.constructor = Person;</div><div class=\"line\"></div><div class=\"line\">    Person.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public method</span></div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'Hello, '</span> + firstname + <span class=\"string\">' '</span> + lastname + <span class=\"string\">'! ('</span> + species + <span class=\"string\">')'</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    Person.prototype.getFirstname = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public getter</span></div><div class=\"line\">      <span class=\"keyword\">return</span> firstname;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    Person.prototype.setFirstname = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">first</span>) </span>&#123; <span class=\"comment\">// public setter</span></div><div class=\"line\">      firstname = first;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    Person.prototype.getLastname = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public getter</span></div><div class=\"line\">      <span class=\"keyword\">return</span> lastname;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    Person.prototype.setLastname = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">last</span>) </span>&#123; <span class=\"comment\">// public setter</span></div><div class=\"line\">      lastname = last;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> Person;</div><div class=\"line\">  &#125;)();</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> Person;</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello()); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.getFirstname(), john.getLastname(), <span class=\"string\">'('</span> + john.getSpecies() + <span class=\"string\">')'</span>); <span class=\"comment\">// John Doe (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\">john.setFirstname(<span class=\"string\">'Jane'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.getFirstname(), john.getLastname()); <span class=\"comment\">// Jane Doe</span></div></pre></td></tr></table></figure>\n<h4 id=\"ES6-6\"><a href=\"#ES6-6\" class=\"headerlink\" title=\"ES6\"></a>ES6</h4><p><code>get</code> and <code>set</code> keywords, which were available in ES5 object literals, are now available in ES6 classes. They can be used like so:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> Person = <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123; <span class=\"comment\">// public class</span></div><div class=\"line\">  <span class=\"keyword\">let</span> species = <span class=\"string\">''</span>; <span class=\"comment\">// protected attribute</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Abstract class</span></div><div class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LivingBeing</span> </span>&#123; <span class=\"comment\">// protected inner class</span></div><div class=\"line\">    <span class=\"keyword\">constructor</span>(s) &#123;</div><div class=\"line\">      species = s;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    get species() &#123; <span class=\"comment\">// public getter</span></div><div class=\"line\">      <span class=\"keyword\">return</span> species;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    set species(s) &#123; <span class=\"comment\">// public setter</span></div><div class=\"line\">      species = s;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Concrete class</span></div><div class=\"line\">  <span class=\"keyword\">const</span> Person = <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> firstname = <span class=\"string\">''</span>, <span class=\"comment\">// private attribute</span></div><div class=\"line\">        lastname = <span class=\"string\">''</span>; <span class=\"comment\">// private attribute</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> <span class=\"keyword\">extends</span> <span class=\"title\">LivingBeing</span> </span>&#123; <span class=\"comment\">// private inner class</span></div><div class=\"line\">      <span class=\"keyword\">constructor</span> (first, last) &#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(<span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">        firstname = first;</div><div class=\"line\">        lastname = last;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      sayHello() &#123; <span class=\"comment\">// public method</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;firstname&#125;</span> <span class=\"subst\">$&#123;lastname&#125;</span>! (<span class=\"subst\">$&#123;species&#125;</span>)`</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      get firstname() &#123; <span class=\"comment\">// public getter</span></div><div class=\"line\">        <span class=\"keyword\">return</span> firstname;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      set firstname(first) &#123; <span class=\"comment\">// public setter</span></div><div class=\"line\">        firstname = first;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      get lastname() &#123; <span class=\"comment\">// public getter</span></div><div class=\"line\">        <span class=\"keyword\">return</span> lastname;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      set lastname(last) &#123; <span class=\"comment\">// public setter</span></div><div class=\"line\">        lastname = last;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> Person;</div><div class=\"line\">  &#125;)();</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> Person;</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello()); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.firstname, john.lastname, <span class=\"string\">`(<span class=\"subst\">$&#123;john.species&#125;</span>)`</span>); <span class=\"comment\">// John Doe (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\">john.firstname = <span class=\"string\">'Jane'</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.firstname, john.lastname); <span class=\"comment\">// Jane Doe</span></div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Back-to-reality\"><a href=\"#Back-to-reality\" class=\"headerlink\" title=\"Back to reality\"></a>Back to reality</h2><p>JavaScript is <strong>NOT</strong> Java. Trying to imitate Java with JavaScript is not necessarily a good idea in real life, but this is extremely interesting for educational purposes.</p>\n<p>JavaScript is an object-oriented language (in spite of its prototypal nature), but it is much more flexible and permissive than Java. It does not matter if you do not have a strict class hierarchy. It does not matter if you do not have abstraction. It does not even matter if you do not have a strict encapsulation.</p>\n<p>For Java developers who really want to feel at home with JavaScript, use <a href=\"https://www.typescriptlang.org/\" target=\"_blank\" rel=\"external\">TypeScript</a>.</p>\n","excerpt":"<p><em>Meanwhile, in a parallel universe…</em></p>\n<p>JavaScript is a scripting language for the Java Platform and JS scripts should strictly apply the key concepts of <strong>object-oriented programming</strong> (OOP).</p>\n<p>Our task is to model and implement a simple program that involves living beings. This is of course a vast topic and, for the sake of simplicity, we will not deal with peripheral concepts like generics, synchronized methods, collections or packages. This would bring us too far.</p>","more":"<hr>\n<h2 id=\"Inheritance\"><a href=\"#Inheritance\" class=\"headerlink\" title=\"Inheritance\"></a>Inheritance</h2><p>Java is a class-based language where inheritance is performed using the <code>extends</code> keyword. This is much more complicated in JavaScript…</p>\n<h3 id=\"ES5\"><a href=\"#ES5\" class=\"headerlink\" title=\"ES5\"></a>ES5</h3><p>ECMAScript 5 does not have built-in classes. JavaScript is a <strong>prototype-based language</strong>, but classes can be emulated thanks to <strong>constructor functions</strong>. Inheritance is possible, but should be done through a manipulation of prototypes:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Parent class</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LivingBeing</span>(<span class=\"params\">species</span>) </span>&#123; <span class=\"comment\">// constructor</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.species = species; <span class=\"comment\">// attribute</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">LivingBeing.live = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// static method</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Life is life!'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Child class</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">firstname, lastname</span>) </span>&#123; <span class=\"comment\">// constructor</span></div><div class=\"line\">  LivingBeing.call(<span class=\"keyword\">this</span>, <span class=\"string\">'Homo sapiens'</span>); <span class=\"comment\">// super(\"Homo sapiens\")</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.firstname = firstname; <span class=\"comment\">// attribute</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.lastname = lastname; <span class=\"comment\">// attribute</span></div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"comment\">// extends</span></div><div class=\"line\">Person.prototype = <span class=\"built_in\">Object</span>.create(LivingBeing.prototype);</div><div class=\"line\">Person.prototype.constructor = Person;</div><div class=\"line\"></div><div class=\"line\">Person.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// instance method</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Hello, '</span> + <span class=\"keyword\">this</span>.firstname + <span class=\"string\">' '</span> + <span class=\"keyword\">this</span>.lastname + <span class=\"string\">'!'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> anonymousDog = <span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Canis lupus'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(anonymousDog.species); <span class=\"comment\">// Canis lupus</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">'('</span> + john.species + <span class=\"string\">')'</span>); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(LivingBeing.live()); <span class=\"comment\">// Life is life!</span></div></pre></td></tr></table></figure>\n<h3 id=\"ES6\"><a href=\"#ES6\" class=\"headerlink\" title=\"ES6\"></a>ES6</h3><p>ECMAScript 6 brought syntactic sugar to work more easily with so-called classes and inheritance. This new syntax hides the true prototypal nature of JavaScript, but now the language looks much more familiar for Java developers:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Parent class</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(species) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.species = species; <span class=\"comment\">// attribute</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">static</span> live() &#123; <span class=\"comment\">// static method</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Life is life!'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Child class</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> <span class=\"keyword\">extends</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(firstname, lastname) &#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(<span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">    <span class=\"keyword\">this</span>.firstname = firstname; <span class=\"comment\">// attribute</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.lastname = lastname; <span class=\"comment\">// attribute</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  sayHello() &#123; <span class=\"comment\">// instance method</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.firstname&#125;</span> <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.lastname&#125;</span>!`</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> anonymousDog = <span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Canis lupus'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(anonymousDog.species); <span class=\"comment\">// Canis lupus</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">`(<span class=\"subst\">$&#123;john.species&#125;</span>)`</span>); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(LivingBeing.live()); <span class=\"comment\">// Life is life!</span></div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Composition\"><a href=\"#Composition\" class=\"headerlink\" title=\"Composition\"></a>Composition</h2><p>In OOP, a best practice is to favor <strong>composition over inheritance</strong>.</p>\n<h3 id=\"ES5-1\"><a href=\"#ES5-1\" class=\"headerlink\" title=\"ES5\"></a>ES5</h3><p>Composition in ECMAScript 5 is not so different from composition in Java. A specific class may reference another class using an instance of the latter in one of its properties.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Class to be referenced</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LivingBeing</span>(<span class=\"params\">species</span>) </span>&#123; <span class=\"comment\">// constructor</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.species = species; <span class=\"comment\">// attribute</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">LivingBeing.live = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// static method</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Life is life!'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Main class</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">firstname, lastname</span>) </span>&#123; <span class=\"comment\">// constructor</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.livingBeing = <span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Homo sapiens'</span>); <span class=\"comment\">// attribute (composition)</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.firstname = firstname; <span class=\"comment\">// attribute</span></div><div class=\"line\">  <span class=\"keyword\">this</span>.lastname = lastname; <span class=\"comment\">// attribute</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">Person.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// instance method</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Hello, '</span> + <span class=\"keyword\">this</span>.firstname + <span class=\"string\">' '</span> + <span class=\"keyword\">this</span>.lastname + <span class=\"string\">'!'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span>  anonymousDog = <span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Canis lupus'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(anonymousDog.species);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">'('</span> + john.livingBeing.species + <span class=\"string\">')'</span>); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(LivingBeing.live()); <span class=\"comment\">// Life is life!</span></div></pre></td></tr></table></figure>\n<h3 id=\"ES6-1\"><a href=\"#ES6-1\" class=\"headerlink\" title=\"ES6\"></a>ES6</h3><p>Composition in ECMAScript 6 is even closer to Java, thanks to the syntactic sugar that emulates classes natively:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Class to be referenced</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(species) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.species = species; <span class=\"comment\">// attribute</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">static</span> live() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'Life is life!'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Main class</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(firstname, lastname) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.livingBeing = <span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Homo sapiens'</span>); <span class=\"comment\">// attribute (composition)</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.firstname = firstname; <span class=\"comment\">// attribute</span></div><div class=\"line\">    <span class=\"keyword\">this</span>.lastname = lastname; <span class=\"comment\">// attribute</span></div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  sayHello() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.firstname&#125;</span> <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.lastname&#125;</span>!`</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> anonymousDog = <span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Canis lupus'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(anonymousDog.species);</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">`(<span class=\"subst\">$&#123;john.livingBeing.species&#125;</span>)`</span>); <span class=\"comment\">// Hello, John Doe (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">console</span>.log(LivingBeing.live()); <span class=\"comment\">// Life is life!</span></div></pre></td></tr></table></figure>\n<p>Composition works fine here, but conceptually, inheritance is more meaningful for this particular problem.</p>\n<hr>\n<h2 id=\"Abstraction\"><a href=\"#Abstraction\" class=\"headerlink\" title=\"Abstraction\"></a>Abstraction</h2><p>Abstraction in Java is based on <strong>abstract classes</strong> and <strong>interfaces</strong>. JavaScript does not have a built-in abstraction mechanism, but like classes in ES5, this concept can be emulated.</p>\n<h3 id=\"Abstract-class\"><a href=\"#Abstract-class\" class=\"headerlink\" title=\"Abstract class\"></a>Abstract class</h3><p>An abstract class is a class that cannot be instantiated, so we cannot create direct objects from an abstract class. In JavaScript, we can prevent instantiation of a particular class using conditions in the constructor.</p>\n<p>An abstract class can contain abstract methods which are methods without implementation. In JavaScript, this can be reproduced quite easily if we declare a prototype method that only throws an error. It will remain “abstract” (it will throw an error) as long as it is not redefined in the prototype chain.</p>\n<h4 id=\"ES5-2\"><a href=\"#ES5-2\" class=\"headerlink\" title=\"ES5\"></a>ES5</h4><p>To create an abstract class in ES5 (here <code>LivingBeing</code>), the best test to check if the constructor has been called directly with <code>new</code> is <code>this.constructor === LivingBeing</code>. Be careful to use the right comparison operator because <code>this.constructor !== LivingBeing</code> would create (roughly) a <strong>final class</strong> (a class that cannot be extended)!</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Abstract class</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LivingBeing</span>(<span class=\"params\">species</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.constructor === LivingBeing) &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot instantiate an abstract class!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">this</span>.species = species;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">LivingBeing.prototype.communicate = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// abstract method</span></div><div class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot call an abstract method!'</span>);</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Concrete class</span></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">firstname, lastname</span>) </span>&#123;</div><div class=\"line\">  LivingBeing.call(<span class=\"keyword\">this</span>, <span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">  <span class=\"keyword\">this</span>.firstname = firstname;</div><div class=\"line\">  <span class=\"keyword\">this</span>.lastname = lastname;</div><div class=\"line\">&#125;</div><div class=\"line\">Person.prototype = <span class=\"built_in\">Object</span>.create(LivingBeing.prototype);</div><div class=\"line\">Person.prototype.constructor = Person;</div><div class=\"line\"></div><div class=\"line\">Person.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// concrete method</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Hello, '</span> + <span class=\"keyword\">this</span>.firstname + <span class=\"string\">' '</span> + <span class=\"keyword\">this</span>.lastname + <span class=\"string\">'!'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">'('</span> + john.species + <span class=\"string\">')'</span>); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\">john.communicate(); <span class=\"comment\">// Error: Your cannot call an abstract method!</span></div><div class=\"line\"><span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Canis lupus'</span>); <span class=\"comment\">// Error: You cannot instantiate an abstract class!</span></div></pre></td></tr></table></figure>\n<h4 id=\"ES6-2\"><a href=\"#ES6-2\" class=\"headerlink\" title=\"ES6\"></a>ES6</h4><p>With ES6, it is better to use <code>new.target</code> like this: <code>new.target.name === &#39;LivingBeing&#39;</code>. Once again, be careful with the comparison operator: <code>new.target.name !== &#39;LivingBeing&#39;</code> would create a final class.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Abstract class</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(species) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">new</span>.target.name === <span class=\"string\">'LivingBeing'</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot instantiate an abstract class!'</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">this</span>.species = species;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  communicate() &#123; <span class=\"comment\">// abstract method</span></div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot call an abstract method!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Concrete class</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> <span class=\"keyword\">extends</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(firstname, lastname) &#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(<span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">    <span class=\"keyword\">this</span>.firstname = firstname;</div><div class=\"line\">    <span class=\"keyword\">this</span>.lastname = lastname;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  sayHello() &#123; <span class=\"comment\">// concrete method</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.firstname&#125;</span> <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.lastname&#125;</span>`</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">`(<span class=\"subst\">$&#123;john.species&#125;</span>)`</span>); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\">john.communicate(); <span class=\"comment\">// Error: You cannot call an abstract method!</span></div><div class=\"line\"><span class=\"keyword\">new</span> LivingBeing(<span class=\"string\">'Canis lupus'</span>); <span class=\"comment\">// Error: You cannot instantiate an abstract class!</span></div></pre></td></tr></table></figure>\n<h3 id=\"Interface\"><a href=\"#Interface\" class=\"headerlink\" title=\"Interface\"></a>Interface</h3><p>Interfaces in Java are quite close to 100% abstract classes. They contain <code>public abstract</code> methods that must be overriden in classes which implement them.</p>\n<h4 id=\"ES5-3\"><a href=\"#ES5-3\" class=\"headerlink\" title=\"ES5\"></a>ES5</h4><p>A solution to get interfaces in ES5 is to create a custom <code>implements</code> function in <code>Function.prototype</code> and use object literals to declare interfaces.</p>\n<p>The custom function must traverse the <strong>own properties</strong> of the interface passed as an argument and test if they exist in the current function instance (presumably a constructor function). If they do not exist, they should be created in the function’s prototype. In this case, they remain abstract, meaning that they will throw an error if we try to use them before to override them.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Custom \"implements\" function</span></div><div class=\"line\"><span class=\"built_in\">Function</span>.prototype.implements = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">iface</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (iface.toString() !== <span class=\"string\">'[object Object]'</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Invalid argument. An interface must be an object.'</span>);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> prop <span class=\"keyword\">in</span> iface) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (iface.hasOwnProperty(prop)) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> iface[prop] === <span class=\"string\">'function'</span> &amp;&amp; !(prop <span class=\"keyword\">in</span> <span class=\"keyword\">this</span>.prototype)) &#123;</div><div class=\"line\">          <span class=\"keyword\">this</span>.prototype[prop] = iface[prop];</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Interface</span></div><div class=\"line\"><span class=\"keyword\">var</span> LivingBeingInterface = &#123;</div><div class=\"line\">  <span class=\"attr\">communicate</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot call an abstract method!'</span>);</div><div class=\"line\">  &#125;,</div><div class=\"line\">  <span class=\"attr\">getSpecies</span>: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot call an abstract method!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Class</span></div><div class=\"line\">Person.implements(LivingBeingInterface); <span class=\"comment\">// cool, isn't it?</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">firstname, lastname</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">this</span>.firstname = firstname;</div><div class=\"line\">  <span class=\"keyword\">this</span>.lastname = lastname;</div><div class=\"line\">  <span class=\"keyword\">this</span>.species = <span class=\"string\">'Homo sapiens'</span>;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">Person.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Hello, '</span> + <span class=\"keyword\">this</span>.firstname + <span class=\"string\">' '</span> + <span class=\"keyword\">this</span>.lastname + <span class=\"string\">'!'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\">Person.prototype.communicate = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// overrides the default implementation</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'blah blah blah'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Person.prototype.getSpecies() is not overriden</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello()); <span class=\"comment\">// Hello, John Doe!</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.communicate()); <span class=\"comment\">// blah blah blah</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.getSpecies()); <span class=\"comment\">// Error: You cannot call an abstract method!</span></div></pre></td></tr></table></figure>\n<h4 id=\"ES6-3\"><a href=\"#ES6-3\" class=\"headerlink\" title=\"ES6\"></a>ES6</h4><p>ES6 classes are like coherent blocks of methods and they are not hoisted. Thus, contrary to ES5, we must call our <code>implements</code> method after the class declaration.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">// Custom \"implements\" function</span></div><div class=\"line\"><span class=\"built_in\">Function</span>.prototype.implements = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">iface</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (iface.toString() !== <span class=\"string\">'[object Object]'</span>) &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'Invalid argument. An interface must be an object.'</span>);</div><div class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> prop <span class=\"keyword\">in</span> iface) &#123;</div><div class=\"line\">      <span class=\"keyword\">if</span> (iface.hasOwnProperty(prop)) &#123;</div><div class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> iface[prop] === <span class=\"string\">'function'</span> &amp;&amp; !(prop <span class=\"keyword\">in</span> <span class=\"keyword\">this</span>.prototype)) &#123;</div><div class=\"line\">          <span class=\"keyword\">this</span>.prototype[prop] = iface[prop];</div><div class=\"line\">        &#125;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Interface</span></div><div class=\"line\"><span class=\"keyword\">const</span> LivingBeingInterface = &#123;</div><div class=\"line\">  communicate() &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot call an abstract method!'</span>);</div><div class=\"line\">  &#125;,</div><div class=\"line\">  getSpecies() &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot call an abstract method!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Class</span></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span> (firstname, lastname) &#123;</div><div class=\"line\">    <span class=\"keyword\">this</span>.firstname = firstname;</div><div class=\"line\">    <span class=\"keyword\">this</span>.lastname = lastname;</div><div class=\"line\">    <span class=\"keyword\">this</span>.species = <span class=\"string\">'Homo sapiens'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  sayHello() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.firstname&#125;</span> <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.lastname&#125;</span>!`</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  communicate() &#123; <span class=\"comment\">// overrides the default implementation</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'blah blah blah'</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Person.prototype.getSpecies() is not overriden</span></div><div class=\"line\">&#125;</div><div class=\"line\">Person.implements(LivingBeingInterface); <span class=\"comment\">// cool, isn't it?</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello()); <span class=\"comment\">// Hello, John Doe!</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.communicate()); <span class=\"comment\">// blah blah blah</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.getSpecies()); <span class=\"comment\">// Error: You cannot call an abstract method!</span></div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Polymorphism\"><a href=\"#Polymorphism\" class=\"headerlink\" title=\"Polymorphism\"></a>Polymorphism</h2><p>As you may know, Java is strongly typed. On the contrary, JavaScript is loosely typed. But, in Java, if you create an instance of <code>Person</code> that extends <code>LivingBeing</code>, this instance is of type <code>Person</code> <strong>and</strong> <code>LivingBeing</code>. So if you iterate through a collection of <code>LivingBeing</code> objects containing people, animals or plants, and call the same method on each object, you will have specific results for each living being thanks to a <strong>dynamic binding</strong>. JavaScript works this way too if we use the <strong>prototype chain</strong> properly.</p>\n<h3 id=\"ES5-4\"><a href=\"#ES5-4\" class=\"headerlink\" title=\"ES5\"></a>ES5</h3><p>As an example, we could override the original <code>Object.prototype.toString()</code> method for people and dogs.</p>\n<p>In JavaScript, classes and their instances are objects. By default, when we call <code>toString()</code> on an object, we get <code>[object Object]</code>. <code>Person</code> or <code>Dog</code> instances are also indirect instances of <code>LivingBeing</code>, so we could define several <code>toString()</code> methods in the prototype chain.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LivingBeing</span>(<span class=\"params\">species</span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.constructor === LivingBeing) &#123;</div><div class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot instantiate an abstract class!'</span>);</div><div class=\"line\">  &#125;</div><div class=\"line\">  <span class=\"keyword\">this</span>.species = species;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Overrides Object.prototype.toString()</span></div><div class=\"line\">LivingBeing.prototype.toString = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"comment\">// returns the species instead of [object Object]</span></div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Species: '</span> + <span class=\"keyword\">this</span>.species;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">firstname, lastname</span>) </span>&#123;</div><div class=\"line\">  LivingBeing.call(<span class=\"keyword\">this</span>, <span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">  <span class=\"keyword\">this</span>.firstname = firstname;</div><div class=\"line\">  <span class=\"keyword\">this</span>.lastname = lastname;</div><div class=\"line\">&#125;</div><div class=\"line\">Person.prototype = <span class=\"built_in\">Object</span>.create(LivingBeing.prototype);</div><div class=\"line\">Person.prototype.constructor = Person;</div><div class=\"line\"></div><div class=\"line\">Person.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">'Hello, '</span> + <span class=\"keyword\">this</span>.firstname + <span class=\"string\">' '</span> + <span class=\"keyword\">this</span>.lastname + <span class=\"string\">'!'</span>;</div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Overrides LivingBeing.prototype.toString()</span></div><div class=\"line\">Person.prototype.toString = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> str = <span class=\"string\">'\\n'</span>;</div><div class=\"line\">  str += <span class=\"string\">'First name: '</span> + <span class=\"keyword\">this</span>.firstname + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">  str += <span class=\"string\">'Last name: '</span> + <span class=\"keyword\">this</span>.lastname + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">  str += LivingBeing.prototype.toString.call(<span class=\"keyword\">this</span>); <span class=\"comment\">// super.toString()</span></div><div class=\"line\">  <span class=\"keyword\">return</span> str; <span class=\"comment\">// returns a summary instead of the species</span></div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Dog</span>(<span class=\"params\">name</span>) </span>&#123;</div><div class=\"line\">  LivingBeing.call(<span class=\"keyword\">this</span>, <span class=\"string\">'Canis lupus'</span>);</div><div class=\"line\">  <span class=\"keyword\">this</span>.name = name;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Overrides LivingBeing.prototype.toString()</span></div><div class=\"line\">Dog.prototype.toString = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">var</span> str = <span class=\"string\">'\\n'</span>;</div><div class=\"line\">  str += <span class=\"string\">'Name: '</span> + <span class=\"keyword\">this</span>.name + <span class=\"string\">'\\n'</span>;</div><div class=\"line\">  str += LivingBeing.prototype.toString.call(<span class=\"keyword\">this</span>);</div><div class=\"line\">  <span class=\"keyword\">return</span> str; <span class=\"comment\">// returns a summary instead of the species</span></div><div class=\"line\">&#125;;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">'('</span> + john.species + <span class=\"string\">')'</span>); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> fido = <span class=\"keyword\">new</span> Dog(<span class=\"string\">'Fido'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(fido.name, <span class=\"string\">'('</span> + fido.species + <span class=\"string\">')'</span>); <span class=\"comment\">// Fido (Canis lupus)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> livingBeings = [john, fido];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; livingBeings.length; i++) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(livingBeings[i].toString());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// First name: John</span></div><div class=\"line\"><span class=\"comment\">// Last name: Doe</span></div><div class=\"line\"><span class=\"comment\">// Species: Homo sapiens</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Name: Fido</span></div><div class=\"line\"><span class=\"comment\">// Species: Canis lupus</span></div></pre></td></tr></table></figure>\n<h3 id=\"ES6-4\"><a href=\"#ES6-4\" class=\"headerlink\" title=\"ES6\"></a>ES6</h3><p>It is not so different with ES6, except that we can use classes, string interpolation and a <code>for...of</code> loop for convenience:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(species) &#123;</div><div class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">new</span>.target.name === <span class=\"string\">'LivingBeing'</span>) &#123;</div><div class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'You cannot instantiate an abstract class!'</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"keyword\">this</span>.species = species;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  toString() &#123; <span class=\"comment\">// overrides Object.prototype.toString()</span></div><div class=\"line\">    <span class=\"comment\">// returns the species instead of [object Object]</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Species: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.species&#125;</span>`</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> <span class=\"keyword\">extends</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(firstname, lastname) &#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(<span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">    <span class=\"keyword\">this</span>.firstname = firstname;</div><div class=\"line\">    <span class=\"keyword\">this</span>.lastname = lastname;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  sayHello() &#123;</div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.firstname&#125;</span> <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.lastname&#125;</span>!`</span>;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  toString() &#123; <span class=\"comment\">// overrides LivingBeing.prototype.toString()</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`</div><div class=\"line\">First name: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.firstname&#125;</span></div><div class=\"line\">Last name: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.lastname&#125;</span></div><div class=\"line\"><span class=\"subst\">$&#123;<span class=\"keyword\">super</span>.toString()&#125;</span>`</span>; <span class=\"comment\">// returns a summary instead of the species</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> <span class=\"keyword\">extends</span> <span class=\"title\">LivingBeing</span> </span>&#123;</div><div class=\"line\">  <span class=\"keyword\">constructor</span>(name) &#123;</div><div class=\"line\">    <span class=\"keyword\">super</span>(<span class=\"string\">'Canis lupus'</span>);</div><div class=\"line\">    <span class=\"keyword\">this</span>.name = name;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  toString() &#123; <span class=\"comment\">// overrides LivingBeing.prototype.toString()</span></div><div class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`</div><div class=\"line\">Name: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.name&#125;</span></div><div class=\"line\"><span class=\"subst\">$&#123;<span class=\"keyword\">super</span>.toString()&#125;</span>`</span>; <span class=\"comment\">// returns a summary instead of the species</span></div><div class=\"line\">  &#125;</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello(), <span class=\"string\">`(<span class=\"subst\">$&#123;john.species&#125;</span>)`</span>); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> fido = <span class=\"keyword\">new</span> Dog(<span class=\"string\">'Fido'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(fido.name, <span class=\"string\">`(<span class=\"subst\">$&#123;fido.species&#125;</span>)`</span>); <span class=\"comment\">// Fido (Canis lupus)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> livingBeings = [john, fido];</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> being <span class=\"keyword\">of</span> livingBeings) &#123;</div><div class=\"line\">  <span class=\"built_in\">console</span>.log(being.toString());</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// First name: John</span></div><div class=\"line\"><span class=\"comment\">// Last name: Doe</span></div><div class=\"line\"><span class=\"comment\">// Species: Homo sapiens</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// Name: Fido</span></div><div class=\"line\"><span class=\"comment\">// Species: Canis lupus</span></div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Encapsulation\"><a href=\"#Encapsulation\" class=\"headerlink\" title=\"Encapsulation\"></a>Encapsulation</h2><p>Encapsulation makes it possible to restrict the access to class members through <strong>access level modifiers</strong> and <strong>getters/setters</strong>.</p>\n<h3 id=\"Access-level-modifiers\"><a href=\"#Access-level-modifiers\" class=\"headerlink\" title=\"Access level modifiers\"></a>Access level modifiers</h3><p>Java provides useful keywords like <code>public</code>, <code>protected</code> or <code>private</code> to modify access level of class attributes and methods. Unfortunately, JavaScript does not have these access modifiers (they are reserved words but are still unused).</p>\n<h4 id=\"ES5-5\"><a href=\"#ES5-5\" class=\"headerlink\" title=\"ES5\"></a>ES5</h4><p>To reproduce the effect of <code>public</code>, <code>protected</code> or <code>private</code>, we have to play with the <strong>scope chain</strong>, <strong>closures</strong> and <strong>IIFEs</strong> (Immediately-Invoked Function Expressions).</p>\n<ul>\n<li>A <strong>public</strong> member is basically a prototype property.</li>\n<li>A <strong>protected</strong> member is a simple variable or function declared inside a surrounding function and that can be accessed from <code>LivingBeing</code> and <code>Person</code>.</li>\n<li>A <strong>private</strong> member is a simple variable or function declared inside a nested function and that can be accessed from <code>Person</code> only.</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> Person = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public class</span></div><div class=\"line\">  <span class=\"keyword\">var</span> species = <span class=\"string\">''</span>; <span class=\"comment\">// protected attribute</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LivingBeing</span>(<span class=\"params\">s</span>) </span>&#123; <span class=\"comment\">// protected inner class</span></div><div class=\"line\">    species = s;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> Person = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> firstname = <span class=\"string\">''</span>, <span class=\"comment\">// private attribute</span></div><div class=\"line\">        lastname = <span class=\"string\">''</span>; <span class=\"comment\">// private attribute</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">first, last</span>) </span>&#123; <span class=\"comment\">// private inner class</span></div><div class=\"line\">      LivingBeing.call(<span class=\"keyword\">this</span>, <span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">      firstname = first;</div><div class=\"line\">      lastname = last;</div><div class=\"line\">    &#125;</div><div class=\"line\">    Person.prototype = <span class=\"built_in\">Object</span>.create(LivingBeing.prototype);</div><div class=\"line\">    Person.prototype.constructor = Person;</div><div class=\"line\"></div><div class=\"line\">    Person.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public method</span></div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'Hello, '</span> + firstname + <span class=\"string\">' '</span> + lastname + <span class=\"string\">'! ('</span> + species + <span class=\"string\">')'</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> Person;</div><div class=\"line\">  &#125;)();</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> Person;</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello()); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.firstname, john.lastname, john.species); <span class=\"comment\">// undefined undefined undefined</span></div></pre></td></tr></table></figure>\n<h4 id=\"ES6-5\"><a href=\"#ES6-5\" class=\"headerlink\" title=\"ES6\"></a>ES6</h4><p>It may be surprising, but ES6 classes do not even have access level modifiers. Here we can use arrow functions for convenience:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> Person = <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123; <span class=\"comment\">// public class</span></div><div class=\"line\">  <span class=\"keyword\">let</span> species = <span class=\"string\">''</span>; <span class=\"comment\">// protected attribute</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LivingBeing</span> </span>&#123; <span class=\"comment\">// protected inner class</span></div><div class=\"line\">    <span class=\"keyword\">constructor</span>(s) &#123;</div><div class=\"line\">      species = s;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">const</span> Person = <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> firstname = <span class=\"string\">''</span>, <span class=\"comment\">// private attribute</span></div><div class=\"line\">        lastname = <span class=\"string\">''</span>; <span class=\"comment\">// private attribute</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> <span class=\"keyword\">extends</span> <span class=\"title\">LivingBeing</span> </span>&#123; <span class=\"comment\">// private inner class</span></div><div class=\"line\">      <span class=\"keyword\">constructor</span> (first, last) &#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(<span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">        firstname = first;</div><div class=\"line\">        lastname = last;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      sayHello() &#123; <span class=\"comment\">// public method</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;firstname&#125;</span> <span class=\"subst\">$&#123;lastname&#125;</span>! (<span class=\"subst\">$&#123;species&#125;</span>)`</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> Person;</div><div class=\"line\">  &#125;)();</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> Person;</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">// --------------------</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello()); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.firstname, john.lastname, john.species); <span class=\"comment\">// undefined undefined undefined</span></div></pre></td></tr></table></figure>\n<h3 id=\"Getters-Setters\"><a href=\"#Getters-Setters\" class=\"headerlink\" title=\"Getters/Setters\"></a>Getters/Setters</h3><p>When some fields are private or protected, they cannot be accessed from the outside. To read them or modify them, we need public methods: <strong>getters</strong> and <strong>setters</strong>.</p>\n<h4 id=\"ES5-6\"><a href=\"#ES5-6\" class=\"headerlink\" title=\"ES5\"></a>ES5</h4><p>Getters and setters can be defined with the old (now deprecated) <code>__defineGetter__</code> or <code>__defineSetter__</code> respectively, but this is much better to create a regular function with <code>get</code> or <code>set</code> in the name.</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">var</span> Person = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public class</span></div><div class=\"line\">  <span class=\"keyword\">var</span> species = <span class=\"string\">''</span>; <span class=\"comment\">// protected attribute</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">LivingBeing</span>(<span class=\"params\">s</span>) </span>&#123; <span class=\"comment\">// protected inner class</span></div><div class=\"line\">    species = s;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  LivingBeing.prototype.getSpecies = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public getter</span></div><div class=\"line\">    <span class=\"keyword\">return</span> species;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  LivingBeing.prototype.setSpecies = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">s</span>) </span>&#123; <span class=\"comment\">// public setter</span></div><div class=\"line\">    species = s;</div><div class=\"line\">  &#125;;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">var</span> Person = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">var</span> firstname = <span class=\"string\">''</span>, <span class=\"comment\">// private attribute</span></div><div class=\"line\">        lastname = <span class=\"string\">''</span>; <span class=\"comment\">// private attribute</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\">first, last</span>) </span>&#123; <span class=\"comment\">// private inner class</span></div><div class=\"line\">      LivingBeing.call(<span class=\"keyword\">this</span>, <span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">      firstname = first;</div><div class=\"line\">      lastname = last;</div><div class=\"line\">    &#125;</div><div class=\"line\">    Person.prototype = <span class=\"built_in\">Object</span>.create(LivingBeing.prototype);</div><div class=\"line\">    Person.prototype.constructor = Person;</div><div class=\"line\"></div><div class=\"line\">    Person.prototype.sayHello = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public method</span></div><div class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'Hello, '</span> + firstname + <span class=\"string\">' '</span> + lastname + <span class=\"string\">'! ('</span> + species + <span class=\"string\">')'</span>;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    Person.prototype.getFirstname = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public getter</span></div><div class=\"line\">      <span class=\"keyword\">return</span> firstname;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    Person.prototype.setFirstname = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">first</span>) </span>&#123; <span class=\"comment\">// public setter</span></div><div class=\"line\">      firstname = first;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    Person.prototype.getLastname = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123; <span class=\"comment\">// public getter</span></div><div class=\"line\">      <span class=\"keyword\">return</span> lastname;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    Person.prototype.setLastname = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">last</span>) </span>&#123; <span class=\"comment\">// public setter</span></div><div class=\"line\">      lastname = last;</div><div class=\"line\">    &#125;;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> Person;</div><div class=\"line\">  &#125;)();</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> Person;</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">var</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello()); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.getFirstname(), john.getLastname(), <span class=\"string\">'('</span> + john.getSpecies() + <span class=\"string\">')'</span>); <span class=\"comment\">// John Doe (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\">john.setFirstname(<span class=\"string\">'Jane'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.getFirstname(), john.getLastname()); <span class=\"comment\">// Jane Doe</span></div></pre></td></tr></table></figure>\n<h4 id=\"ES6-6\"><a href=\"#ES6-6\" class=\"headerlink\" title=\"ES6\"></a>ES6</h4><p><code>get</code> and <code>set</code> keywords, which were available in ES5 object literals, are now available in ES6 classes. They can be used like so:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">const</span> Person = <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123; <span class=\"comment\">// public class</span></div><div class=\"line\">  <span class=\"keyword\">let</span> species = <span class=\"string\">''</span>; <span class=\"comment\">// protected attribute</span></div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Abstract class</span></div><div class=\"line\">  <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LivingBeing</span> </span>&#123; <span class=\"comment\">// protected inner class</span></div><div class=\"line\">    <span class=\"keyword\">constructor</span>(s) &#123;</div><div class=\"line\">      species = s;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    get species() &#123; <span class=\"comment\">// public getter</span></div><div class=\"line\">      <span class=\"keyword\">return</span> species;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    set species(s) &#123; <span class=\"comment\">// public setter</span></div><div class=\"line\">      species = s;</div><div class=\"line\">    &#125;</div><div class=\"line\">  &#125;</div><div class=\"line\"></div><div class=\"line\">  <span class=\"comment\">// Concrete class</span></div><div class=\"line\">  <span class=\"keyword\">const</span> Person = <span class=\"function\">(<span class=\"params\">(</span>) =&gt;</span> &#123;</div><div class=\"line\">    <span class=\"keyword\">let</span> firstname = <span class=\"string\">''</span>, <span class=\"comment\">// private attribute</span></div><div class=\"line\">        lastname = <span class=\"string\">''</span>; <span class=\"comment\">// private attribute</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> <span class=\"keyword\">extends</span> <span class=\"title\">LivingBeing</span> </span>&#123; <span class=\"comment\">// private inner class</span></div><div class=\"line\">      <span class=\"keyword\">constructor</span> (first, last) &#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>(<span class=\"string\">'Homo sapiens'</span>);</div><div class=\"line\">        firstname = first;</div><div class=\"line\">        lastname = last;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      sayHello() &#123; <span class=\"comment\">// public method</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;firstname&#125;</span> <span class=\"subst\">$&#123;lastname&#125;</span>! (<span class=\"subst\">$&#123;species&#125;</span>)`</span>;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      get firstname() &#123; <span class=\"comment\">// public getter</span></div><div class=\"line\">        <span class=\"keyword\">return</span> firstname;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      set firstname(first) &#123; <span class=\"comment\">// public setter</span></div><div class=\"line\">        firstname = first;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      get lastname() &#123; <span class=\"comment\">// public getter</span></div><div class=\"line\">        <span class=\"keyword\">return</span> lastname;</div><div class=\"line\">      &#125;</div><div class=\"line\"></div><div class=\"line\">      set lastname(last) &#123; <span class=\"comment\">// public setter</span></div><div class=\"line\">        lastname = last;</div><div class=\"line\">      &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"keyword\">return</span> Person;</div><div class=\"line\">  &#125;)();</div><div class=\"line\"></div><div class=\"line\">  <span class=\"keyword\">return</span> Person;</div><div class=\"line\">&#125;)();</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">let</span> john = <span class=\"keyword\">new</span> Person(<span class=\"string\">'John'</span>, <span class=\"string\">'Doe'</span>);</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.sayHello()); <span class=\"comment\">// Hello, John Doe! (Homo sapiens)</span></div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.firstname, john.lastname, <span class=\"string\">`(<span class=\"subst\">$&#123;john.species&#125;</span>)`</span>); <span class=\"comment\">// John Doe (Homo sapiens)</span></div><div class=\"line\"></div><div class=\"line\">john.firstname = <span class=\"string\">'Jane'</span>;</div><div class=\"line\"><span class=\"built_in\">console</span>.log(john.firstname, john.lastname); <span class=\"comment\">// Jane Doe</span></div></pre></td></tr></table></figure>\n<hr>\n<h2 id=\"Back-to-reality\"><a href=\"#Back-to-reality\" class=\"headerlink\" title=\"Back to reality\"></a>Back to reality</h2><p>JavaScript is <strong>NOT</strong> Java. Trying to imitate Java with JavaScript is not necessarily a good idea in real life, but this is extremely interesting for educational purposes.</p>\n<p>JavaScript is an object-oriented language (in spite of its prototypal nature), but it is much more flexible and permissive than Java. It does not matter if you do not have a strict class hierarchy. It does not matter if you do not have abstraction. It does not even matter if you do not have a strict encapsulation.</p>\n<p>For Java developers who really want to feel at home with JavaScript, use <a href=\"https://www.typescriptlang.org/\">TypeScript</a>.</p>"}],"PostAsset":[{"_id":"source/_posts/Building-a-visual-form-in-your-terminal-emulator-with-Blessed/blessed.png","slug":"blessed.png","post":"cj3oylqto0000o3c63cm9oewt","modified":0,"renderable":0}],"PostCategory":[{"post_id":"cj3oylqu10006o3c65p6rmnrx","category_id":"cj3oylqtv0003o3c6tlt0lm8s","_id":"cj3oylqu50009o3c6ujm6tluy"},{"post_id":"cj3oylqto0000o3c63cm9oewt","category_id":"cj3oylqtv0003o3c6tlt0lm8s","_id":"cj3oylqu6000co3c6prfcyz8c"},{"post_id":"cj3oylqtt0002o3c6prc718r6","category_id":"cj3oylqtv0003o3c6tlt0lm8s","_id":"cj3oylqu6000do3c6jmxz8bub"},{"post_id":"cj3oylqtz0005o3c6cqx2b9a8","category_id":"cj3oylqtv0003o3c6tlt0lm8s","_id":"cj3oylqu7000go3c6pld976y5"}],"PostTag":[{"post_id":"cj3oylqto0000o3c63cm9oewt","tag_id":"cj3oylqty0004o3c68z4y3ixf","_id":"cj3oylqu7000fo3c6575lm50o"},{"post_id":"cj3oylqto0000o3c63cm9oewt","tag_id":"cj3oylqu30008o3c630i671r2","_id":"cj3oylqu8000ho3c6le9qx0g7"},{"post_id":"cj3oylqto0000o3c63cm9oewt","tag_id":"cj3oylqu6000bo3c62ah10wsh","_id":"cj3oylqua000jo3c6cse5uo8t"},{"post_id":"cj3oylqtt0002o3c6prc718r6","tag_id":"cj3oylqu6000eo3c6xmx82fel","_id":"cj3oylqud000oo3c6vxoq239w"},{"post_id":"cj3oylqtt0002o3c6prc718r6","tag_id":"cj3oylqu9000io3c6rbipk5vh","_id":"cj3oylqud000po3c6dg1ue36h"},{"post_id":"cj3oylqtt0002o3c6prc718r6","tag_id":"cj3oylqub000ko3c69twn4kyz","_id":"cj3oylque000ro3c68rq9w4v0"},{"post_id":"cj3oylqtt0002o3c6prc718r6","tag_id":"cj3oylqub000lo3c6y4i40dcg","_id":"cj3oylquf000so3c6peq1yofh"},{"post_id":"cj3oylqtt0002o3c6prc718r6","tag_id":"cj3oylqu6000bo3c62ah10wsh","_id":"cj3oylqug000uo3c6g0p60c9p"},{"post_id":"cj3oylqtz0005o3c6cqx2b9a8","tag_id":"cj3oylquc000no3c6c08qg4tq","_id":"cj3oylqug000vo3c6lbxemsy0"},{"post_id":"cj3oylqtz0005o3c6cqx2b9a8","tag_id":"cj3oylqu6000bo3c62ah10wsh","_id":"cj3oylquh000xo3c60kg3idez"},{"post_id":"cj3oylqu10006o3c65p6rmnrx","tag_id":"cj3oylqug000to3c6l47dfgm2","_id":"cj3oylqui000zo3c66k3hwpwb"},{"post_id":"cj3oylqu10006o3c65p6rmnrx","tag_id":"cj3oylqu6000bo3c62ah10wsh","_id":"cj3oylquj0010o3c6va2alv6x"},{"post_id":"cj3oylqu10006o3c65p6rmnrx","tag_id":"cj3oylqui000yo3c67l6qs7s0","_id":"cj3oylquk0011o3c6go6zepnj"}],"Tag":[{"name":"Blessed","_id":"cj3oylqty0004o3c68z4y3ixf"},{"name":"Node.js","_id":"cj3oylqu30008o3c630i671r2"},{"name":"ES5","_id":"cj3oylqu6000bo3c62ah10wsh"},{"name":"Ghost","_id":"cj3oylqu6000eo3c6xmx82fel"},{"name":"PhantomJS","_id":"cj3oylqu9000io3c6rbipk5vh"},{"name":"SlimerJS","_id":"cj3oylqub000ko3c69twn4kyz"},{"name":"CasperJS","_id":"cj3oylqub000lo3c6y4i40dcg"},{"name":"JSFuck","_id":"cj3oylquc000no3c6c08qg4tq"},{"name":"OOP","_id":"cj3oylqug000to3c6l47dfgm2"},{"name":"ES6","_id":"cj3oylqui000yo3c67l6qs7s0"}]}}